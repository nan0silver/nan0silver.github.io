---
layout: post
collection: project_diary
title: 친구하자 프로젝트 일기
description: >
  친구하자 프로젝트 개발 중 논문 내용을 읽고 프로젝트 개발을 구체화한 내용입니다.
sitemap: false
---

# [친구하자] Hidden Technical Debt in Machine Learning Systems

- [1. 오늘 읽은 내용 요약](#1-오늘-읽은-내용-요약)
- [2. 나에게 필요했던 이유 — **친구하자** 적용 사례](#2-나에게-필요했던-이유--친구하자-적용-사례)
- [3. 느낀 점 & 인사이트](#3-느낀-점--인사이트)
- [4. 다음 액션 아이템](#4-다음-액션-아이템)
- [💡 핵심 요약](#-핵심-요약)

---

> 이번에는 서울 AI 허브 특강을 듣다가 알게 된 ML관련 논문을 읽고 지금 하고있는 "친구하자" 프로젝트의 어떤 부분에서 도움을 받을 수 있을지에 대해 알아보았다.

**논문**: [Hidden Technical Debt in Machine Learning Systems (NIPS 2015)]
**작성자**: D. Sculley외 10인 (Google, Inc.)

- [논문에 대한 TIL 작성](https://nan0silver.github.io/til/2025-08-16-til/)

---

### 1. 오늘 읽은 내용 요약

> **핵심 주제**: 머신러닝 시스템에서는 단순히 모델 성능을 높이는 것보다 **데이터 흐름 관리, 파이프라인 구조, 의존성 관리**가 더 중요하다는 점을 강조.

- **기술 부채(Technical Debt)**

  - ML 시스템은 빠르게 개발 가능하지만, 장기 유지보수 비용은 전통적인 소프트웨어보다 훨씬 높음.
  - 숨은 부채는 코드 수준이 아니라 **시스템 수준**에서 쌓이기 때문에 발견하기 어렵고 비용이 급격히 커짐.

- **주요 이슈와 원인**

  1. **CACE 원칙** _(Changing Anything Changes Everything)_

     - 피처, 하이퍼파라미터, 데이터셋 중 하나만 바꿔도 전체 모델 성능이 예측 불가능하게 바뀜.

  2. **데이터 의존성**

     - 불안정한 입력 신호, 중복 피처, 과도한 데이터 연결은 장애 가능성을 높임.

  3. **Pipeline Jungle**

     - 데이터 전처리 단계가 쌓이면 유지보수가 어려워지고 에러 포인트가 증가.

  4. **모델 간 숨은 피드백 루프**

     - 하나의 모델 변경이 다른 시스템의 입력 데이터에 간접적으로 영향을 미침.

  5. **실시간 모니터링 부족**

     - 모델 업데이트 후 이상 징후를 늦게 발견하면 복구 비용이 기하급수적으로 커짐.

---

### 2. 나에게 필요했던 이유 — **친구하자** 적용 사례

#### (1) 발화/화행 분석 모델 파이프라인 설계 시 고려할 점

- **현재 시나리오**

  - 통화 음성 → 스펙트로그램 변환 → 감정/화행 분석 모델 → 사용자 인지 지표 산출
  - 향후 **AI 기반 발화 분석 모델**을 도입해 지남력, 유창성, 어휘력, 주의집중력 등의 점수를 자동 산출할 계획.

- **적용 포인트**

  - **데이터 버저닝 필요성**

    - 예: 스펙트로그램 생성 방식을 바꿀 경우, 기존 학습 데이터와 호환성이 깨질 수 있음.
    - → DVC나 MLflow 같은 도구를 도입해 음성 데이터, 스펙트로그램, 학습된 모델을 **버전 단위로 관리**해야 함.

  - **Pipeline Jungle 방지**

    - 현재는 음성 → 텍스트 → 감정 점수 산출이라는 단순 구조지만, 향후 발화 분석, 화행 분석, 치매 위험 예측까지 추가되면 **중간 파이프라인이 폭발적으로 늘어남**.
    - → 파이프라인을 계층적으로 나누고, 데이터 입출력 포맷을 표준화하는 설계가 필요.

---

#### (2) 실시간 통화 분석 시스템 설계 시 고려할 점

- **현재 시나리오**

  - WebRTC 기반 통화 → 통화 녹음 → 분석 API 호출 → 사용자/보호자 알림
  - 향후 실시간 음성 분석을 통해 **통화 중 인지 저하, 우울감 등 감지** 시 알림을 제공하는 기능을 목표.

- **적용 포인트**

  - **실시간 피처 드리프트 모니터링**

    - 예: 고령 사용자들의 발화 속도나 어휘 다양성이 계절, 이벤트에 따라 달라질 수 있음.
    - → 실시간으로 **데이터 분포 변화를 감시**해 학습 데이터와 입력 데이터의 괴리를 탐지하는 모니터링 필요.

  - **모델 업데이트 전략(A/B Testing)**

    - 새로운 화행 분석 모델을 도입할 때, **전체 사용자에게 바로 적용**하면 위험.
    - → 전체 롤아웃 전 **소규모 샘플 그룹**에서 먼저 성능을 검증하고, 이상 징후 시 자동 롤백하는 시스템 필요.

  - **경계 침식 문제 해결**

    - 통화 감정 분석 결과가 **다른 추천 시스템**(예: 대화 주제 추천)에도 입력될 경우, 모델 간 강한 의존성이 생김.
    - → API 수준에서 **의존성 추적 및 제어** 기능을 설계해 시스템 분리를 유지해야 함.

---

### 3. 느낀 점 & 인사이트

- 발화/화행 분석 모델처럼 **실시간 데이터 기반 ML 시스템**은 전통적인 오프라인 예측 모델보다 훨씬 **기술 부채 리스크**가 큼.
- 특히 이 논문에서 제시한 **CACE 원칙**을 그대로 체감할 수 있음:

  > "스펙트로그램 해상도만 살짝 바꿨는데 전체 감정 분석 성능이 붕괴될 수도 있다."

- 결론적으로, **친구하자**에서는 모델 성능 향상보다 **데이터/파이프라인 안정성**을 우선시해야 함.
- **모델 버저닝**, **실시간 모니터링**, **A/B 테스트**, **피처 관리 자동화**는 반드시 초기에 설계해야 장기 비용을 줄일 수 있음.

---

### 4. 다음 액션 아이템

- **DVC/MLflow** 도입 → 발화/화행 분석 모델, 음성 데이터, 스펙트로그램 버전 관리
- 데이터 파이프라인 표준화 → 입력/출력 포맷 및 계층 구조 설계
- **실시간 데이터 분포 모니터링** 및 알림 시스템 구축
- **A/B 테스트 기반 모델 롤아웃 전략** 설계 및 자동 롤백 기능 구현
- 서비스 아키텍처에 **모델 간 의존성 추적 기능** 추가

---

### 💡 핵심 요약

> **친구하자**의 실시간 발화/화행 분석 시스템에서 기술 부채를 최소화하려면:
>
> **버전 관리**: 데이터·모델·파이프라인을 모두 버전 단위로 관리
> **모니터링**: 실시간 데이터 드리프트 및 예측 이상 징후 자동 탐지
> **분리 설계**: 모델 간 강한 의존성 최소화
> **안전한 업데이트**: A/B 테스트 기반 롤아웃 + 자동 롤백 전략 필수
