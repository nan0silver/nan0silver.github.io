<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="ko-KR, en-US"><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="https://nan0silver.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://nan0silver.github.io/" rel="alternate" type="text/html" hreflang="ko-KR, en-US" /><updated>2025-10-24T13:30:42+00:00</updated><id>https://nan0silver.github.io/feed.xml</id><title type="html">NAHYUN BLOG</title><subtitle>Nahyunâ€™s Development Blog
Hi, Iâ€™m Nahyun Eun, a student from South Korea studying backend development with Java.  In this blog, I organize and share my learning journey in programming, with notes and insights on backend concepts and practical examples.
 Follow along as I dive into the world of coding!
</subtitle><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><entry><title type="html">[Algorithm] ì½”í…Œì—ì„œ ìì£¼ ì“°ì´ëŠ” Collection ëª¨ìŒ</title><link href="https://nan0silver.github.io/algorithm/2025-10-23-collections/" rel="alternate" type="text/html" title="[Algorithm] ì½”í…Œì—ì„œ ìì£¼ ì“°ì´ëŠ” Collection ëª¨ìŒ" /><published>2025-10-23T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/algorithm/collections</id><content type="html" xml:base="https://nan0silver.github.io/algorithm/2025-10-23-collections/"><![CDATA[<ol>
  <li><a href="#ï¸-1ï¸âƒ£-hashmapk-v--key-value-í˜•íƒœë¡œ-ë¹ ë¥´ê²Œ-ì°¾ê³ -ì„¸ëŠ”-ìš©ë„">HashMap</a></li>
  <li><a href="#-2ï¸âƒ£-hashset--ì¤‘ë³µ-ì—†ëŠ”-ë°ì´í„°-ì €ì¥">HashSet</a></li>
  <li><a href="#-3ï¸âƒ£-arraylist--ìˆœì„œ-ìˆëŠ”-ë¦¬ìŠ¤íŠ¸-ì¸ë±ìŠ¤-ì ‘ê·¼-ê°€ëŠ¥">ArrayList</a></li>
  <li><a href="#-4ï¸âƒ£-priorityqueue--ìš°ì„ ìˆœìœ„-í-í™">PriorityQueue</a></li>
  <li><a href="#-5ï¸âƒ£-stack--queue-deque--ì„ í˜•-êµ¬ì¡°">Stack / Queue</a></li>
  <li><a href="#-6ï¸âƒ£-collections--arrays-ìœ í‹¸ë¦¬í‹°-ë©”ì„œë“œ">Collections / Arrays</a></li>
  <li><a href="#-ì¶”ì²œ-ì—°ìŠµë¬¸ì œ-ìœ í˜•ë³„-í™œìš©-ì˜ˆì‹œ">ì¶”ì²œ ì—°ìŠµë¬¸ì œ ìœ í˜•ë³„ í™œìš© ì˜ˆì‹œ</a></li>
</ol>

<hr />

<h2 id="ï¸-1ï¸âƒ£-hashmapk-v--key-value-í˜•íƒœë¡œ-ë¹ ë¥´ê²Œ-ì°¾ê³ -ì„¸ëŠ”-ìš©ë„">ğŸ—‚ï¸ 1ï¸âƒ£ HashMap&lt;K, V&gt; â€” key-value í˜•íƒœë¡œ ë¹ ë¥´ê²Œ ì°¾ê³  ì„¸ëŠ” ìš©ë„</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œì´ ê°’ì´ ëª‡ ë²ˆ ë‚˜ì™”ëŠ”ê°€?â€</li>
  <li>â€œì´ keyê°€ ì´ë¯¸ ì¡´ì¬í•˜ë‚˜?â€</li>
  <li>â€œì¹´í…Œê³ ë¦¬ë³„ ê°œìˆ˜ ì„¸ê¸° (ìœ„ì¥ ë¬¸ì œ ë“±)â€</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">put(K key, V value)</code></td>
      <td>ê°’ ì‚½ì… (ë®ì–´ì”€)</td>
      <td><code class="language-plaintext highlighter-rouge">map.put("apple", 3);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">get(K key)</code></td>
      <td>keyë¡œ value ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">int v = map.get("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getOrDefault(K key, V defaultVal)</code></td>
      <td>key ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ë°˜í™˜</td>
      <td><code class="language-plaintext highlighter-rouge">map.getOrDefault("pear", 0);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">containsKey(K key)</code></td>
      <td>key ì¡´ì¬ ì—¬ë¶€</td>
      <td><code class="language-plaintext highlighter-rouge">if (map.containsKey("apple"))</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">remove(K key)</code></td>
      <td>key/value ìŒ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">map.remove("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">keySet()</code></td>
      <td>ëª¨ë“  key ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">for (String k : map.keySet())</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">values()</code></td>
      <td>ëª¨ë“  value ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">for (int v : map.values())</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">entrySet()</code></td>
      <td>key+value ë™ì‹œ ì ‘ê·¼</td>
      <td>`for (Map.Entry&lt;String, Integer&gt; e : map.entrySet()) {</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> System.out.println(e.getKey() + " â†’ " + e.getValue());
</code></pre></div></div>

<p>}<code class="language-plaintext highlighter-rouge">|
|</code>size()<code class="language-plaintext highlighter-rouge">| ì›ì†Œ ìˆ˜ |</code>map.size();<code class="language-plaintext highlighter-rouge">|
|</code>clear()<code class="language-plaintext highlighter-rouge">| ëª¨ë‘ ì‚­ì œ |</code>map.clear();` |</p>

<hr />

<h2 id="-2ï¸âƒ£-hashset--ì¤‘ë³µ-ì—†ëŠ”-ë°ì´í„°-ì €ì¥">ğŸ§© 2ï¸âƒ£ HashSet â€” ì¤‘ë³µ ì—†ëŠ” ë°ì´í„° ì €ì¥</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©-1">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œì´ë¯¸ ë‚˜ì˜¨ ì  ìˆëŠ” ê°’ì¸ê°€?â€</li>
  <li>â€œêµì§‘í•©, ì¤‘ë³µ ì œê±°â€</li>
  <li>â€œì „í™”ë²ˆí˜¸ë¶€ ì ‘ë‘ì‚¬, ì°¸ê°€ì ì¤‘ ì™„ì£¼ ëª»í•œ ì‚¬ëŒ ì°¾ê¸° ë“±â€</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ-1">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(E e)</code></td>
      <td>ì›ì†Œ ì¶”ê°€</td>
      <td><code class="language-plaintext highlighter-rouge">set.add("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">contains(E e)</code></td>
      <td>í¬í•¨ ì—¬ë¶€ í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">if (set.contains("apple"))</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">remove(E e)</code></td>
      <td>ì›ì†Œ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">set.remove("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">size()</code></td>
      <td>ì›ì†Œ ê°œìˆ˜</td>
      <td><code class="language-plaintext highlighter-rouge">set.size();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">clear()</code></td>
      <td>ëª¨ë‘ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">set.clear();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">isEmpty()</code></td>
      <td>ë¹„ì—ˆëŠ”ì§€ í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">if (set.isEmpty())</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">iterator()</code></td>
      <td>ìˆœíšŒìš© Iterator ìƒì„±</td>
      <td><code class="language-plaintext highlighter-rouge">for (String s : set) System.out.println(s);</code></td>
    </tr>
  </tbody>
</table>

<p>or
<code class="language-plaintext highlighter-rouge">Iterator&lt;String&gt; it = set.iterator();
while (it.hasNext()) {
      System.out.println(it.next());
}</code> |</p>

<blockquote>
  <p>ğŸ’¡ ì°¸ê³ : HashSetì€ ë‚´ë¶€ì ìœ¼ë¡œ HashMapì„ ì‚¬ìš©í•˜ë¯€ë¡œ add, contains ëª¨ë‘ O(1)ì…ë‹ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="-3ï¸âƒ£-arraylist--ìˆœì„œ-ìˆëŠ”-ë¦¬ìŠ¤íŠ¸-ì¸ë±ìŠ¤-ì ‘ê·¼-ê°€ëŠ¥">ğŸ“‹ 3ï¸âƒ£ ArrayList â€” ìˆœì„œ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ (ì¸ë±ìŠ¤ ì ‘ê·¼ ê°€ëŠ¥)</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©-2">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œìˆœì°¨ì  ì ‘ê·¼â€, â€œì •ë ¬â€, â€œì¡°í•©/ìˆœì—´ ì €ì¥â€</li>
  <li>BFS/DFSì—ì„œ ë°©ë¬¸ ìˆœì„œ ì €ì¥ ë“±</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ-2">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(E e)</code></td>
      <td>ëì— ì¶”ê°€</td>
      <td><code class="language-plaintext highlighter-rouge">list.add(5);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(int idx, E e)</code></td>
      <td>ì¸ë±ìŠ¤ì— ì‚½ì…</td>
      <td><code class="language-plaintext highlighter-rouge">list.add(1, 10);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">get(int idx)</code></td>
      <td>íŠ¹ì • ì¸ë±ìŠ¤ ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">list.get(0);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">set(int idx, E e)</code></td>
      <td>íŠ¹ì • ìœ„ì¹˜ ê°’ ìˆ˜ì •</td>
      <td><code class="language-plaintext highlighter-rouge">list.set(2, 99);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">remove(int idx)</code></td>
      <td>ì¸ë±ìŠ¤ë¡œ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">list.remove(1);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">contains(E e)</code></td>
      <td>í¬í•¨ ì—¬ë¶€</td>
      <td><code class="language-plaintext highlighter-rouge">if (list.contains(5))</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">size()</code></td>
      <td>í¬ê¸° í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">list.size();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">clear()</code></td>
      <td>ëª¨ë‘ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">list.clear();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sort(Comparator&lt;? super E&gt; c)</code></td>
      <td>ì •ë ¬</td>
      <td>`Arrays.sort(arr, new Comparator<String>() {</String></td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        @Override
        public int compare(String o1, String o2) {
            if (o1.length()==o2.length()) {
                return o1.compareTo(o2);
            } else {
                return o1.length()-o2.length();
            }}});` |
</code></pre></div></div>

<hr />

<h2 id="-4ï¸âƒ£-priorityqueue--ìš°ì„ ìˆœìœ„-í-í™">ğŸ§® 4ï¸âƒ£ PriorityQueue â€” ìš°ì„ ìˆœìœ„ í (í™)</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©-3">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œê°€ì¥ ì‘ì€/í° ê°’â€ì„ ë°˜ë³µì ìœ¼ë¡œ êº¼ë‚¼ ë•Œ (Dijkstra, HeapSort, ìŠ¤ì¼€ì¤„ë§ ë¬¸ì œ ë“±)</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ-3">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(E e)</code></td>
      <td>ì›ì†Œ ì¶”ê°€</td>
      <td><code class="language-plaintext highlighter-rouge">pq.add(10);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">peek()</code></td>
      <td>ìµœìƒë‹¨ ì›ì†Œ í™•ì¸(ì‚­ì œ ì•ˆ í•¨)</td>
      <td><code class="language-plaintext highlighter-rouge">int top = pq.peek();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">poll()</code></td>
      <td>ìµœìƒë‹¨ ì›ì†Œ êº¼ë‚´ê¸°</td>
      <td><code class="language-plaintext highlighter-rouge">int top = pq.poll();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">isEmpty()</code></td>
      <td>ë¹„ì—ˆëŠ”ì§€ í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">if (pq.isEmpty())</code></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ğŸ’¡ ë””í´íŠ¸ëŠ” ì˜¤ë¦„ì°¨ìˆœ(ìµœì†Œ í™) â†’ ì‘ì€ ìˆ«ìê°€ ë¨¼ì € ë‚˜ì˜´</p>

  <p>ë‚´ë¦¼ì°¨ìˆœì€ <code class="language-plaintext highlighter-rouge">new PriorityQueue&lt;&gt;(Collections.reverseOrder());</code></p>
</blockquote>

<hr />

<h2 id="-5ï¸âƒ£-stack--queue-deque--ì„ í˜•-êµ¬ì¡°">ğŸ§° 5ï¸âƒ£ Stack / Queue (Deque) â€” ì„ í˜• êµ¬ì¡°</h2>

<h3 id="-queue">ğŸ’¡ Queue</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>
</code></pre></div></div>

<h3 id="-stack-dequeë¡œ-ëŒ€ì²´-ê¶Œì¥">ğŸ’¡ Stack (Dequeë¡œ ëŒ€ì²´ ê¶Œì¥)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Deque</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stack</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
</code></pre></div></div>

<hr />

<h2 id="-6ï¸âƒ£-collections--arrays-ìœ í‹¸ë¦¬í‹°-ë©”ì„œë“œ">ğŸ’ 6ï¸âƒ£ Collections / Arrays ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ</h2>

<table>
  <thead>
    <tr>
      <th>í´ë˜ìŠ¤</th>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.sort(list)</code></td>
      <td>ë¦¬ìŠ¤íŠ¸ ì •ë ¬</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.reverse(list)</code></td>
      <td>ì—­ìˆœ ì •ë ¬</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.max(list)</code></td>
      <td>ìµœëŒ“ê°’</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.min(list)</code></td>
      <td>ìµœì†Ÿê°’</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Arrays.sort(arr)</code></td>
      <td>ë°°ì—´ ì •ë ¬</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Arrays.equals(arr1, arr2)</code></td>
      <td>ë°°ì—´ ë¹„êµ</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Arrays.toString(arr)</code></td>
      <td>ë°°ì—´ ì¶œë ¥ìš©</td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-ì¶”ì²œ-ì—°ìŠµë¬¸ì œ-ìœ í˜•ë³„-í™œìš©-ì˜ˆì‹œ">ğŸ“˜ ì¶”ì²œ ì—°ìŠµë¬¸ì œ ìœ í˜•ë³„ í™œìš© ì˜ˆì‹œ</h2>

<table>
  <thead>
    <tr>
      <th>ìœ í˜•</th>
      <th>í•µì‹¬ ìë£Œêµ¬ì¡°/ë©”ì„œë“œ</th>
      <th>ì˜ˆì‹œ ë¬¸ì œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Hash (ì¤‘ë³µ, ì™„ì£¼í•˜ì§€ ëª»í•œ ì„ ìˆ˜ ë“±)</td>
      <td><code class="language-plaintext highlighter-rouge">HashMap</code>, <code class="language-plaintext highlighter-rouge">HashSet</code></td>
      <td><code class="language-plaintext highlighter-rouge">map.getOrDefault</code>, <code class="language-plaintext highlighter-rouge">set.contains</code></td>
    </tr>
    <tr>
      <td>Stack/Queue</td>
      <td><code class="language-plaintext highlighter-rouge">Deque</code>, <code class="language-plaintext highlighter-rouge">LinkedList</code></td>
      <td>ê´„í˜¸ ê²€ì‚¬, ê¸°ëŠ¥ê°œë°œ</td>
    </tr>
    <tr>
      <td>ì •ë ¬</td>
      <td><code class="language-plaintext highlighter-rouge">Arrays.sort</code>, <code class="language-plaintext highlighter-rouge">Collections.sort</code></td>
      <td>H-index, Kë²ˆì§¸ ìˆ˜</td>
    </tr>
    <tr>
      <td>ì´ì¤‘ ë£¨í”„ íšŒí”¼</td>
      <td><code class="language-plaintext highlighter-rouge">HashMap</code> lookup</td>
      <td>ì „í™”ë²ˆí˜¸ ëª©ë¡</td>
    </tr>
    <tr>
      <td>ìš°ì„ ìˆœìœ„ ë¬¸ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">PriorityQueue</code></td>
      <td>ë” ë§µê²Œ, ë””ìŠ¤í¬ ì»¨íŠ¸ë¡¤ëŸ¬</td>
    </tr>
    <tr>
      <td>ê·¸ë˜í”„/BFS/DFS</td>
      <td><code class="language-plaintext highlighter-rouge">Queue</code>, <code class="language-plaintext highlighter-rouge">ArrayList</code></td>
      <td>ë¯¸ë¡œ íƒìƒ‰, ë„¤íŠ¸ì›Œí¬</td>
    </tr>
  </tbody>
</table>

<hr />]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="algorithm" /><summary type="html"><![CDATA[ì½”ë”©í…ŒìŠ¤íŠ¸ ëŒ€ë¹„ JAVA Collectionsì˜ ì‚¬ìš©ì²˜ ë° ë©”ì„œë“œë¥¼ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ #2</title><link href="https://nan0silver.github.io/projectdiary/2025-10-16-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ #2" /><published>2025-10-16T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-16-diary/"><![CDATA[<ul>
  <li><a href="#1-csrf-í† í°-íŒ¨í„´">1. CSRF í† í° íŒ¨í„´</a></li>
  <li><a href="#2-originreferer-ê²€ì¦">2. Origin/Referer ê²€ì¦</a></li>
  <li><a href="#3-jwtì˜-ì´ì¤‘-ê²€ì¦">3. JWTì˜ ì´ì¤‘ ê²€ì¦</a></li>
  <li><a href="#4-samsite--csrf-í† í°-ì¡°í•©">4. SamSite + CSRF í† í° ì¡°í•©</a></li>
</ul>

<h2 id="í¬ë¡œìŠ¤-ë„ë©”ì¸-í™˜ê²½ì—ì„œ-refresh-token-ì¿ í‚¤-ì†Œì‹¤-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-2">í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… 2</h2>

<blockquote>
  <p>ì €ë²ˆ í¸ì—ì„œ í•´ê²°ê¹Œì§€ëŠ” ë‹¤ë¤˜ì§€ë§Œ, ê·¸ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” CSRF ê³µê²©ì— ëŒ€í•œ ì•½í•œ ë°©ì–´ë¥¼ ë°©ì§€í•˜ëŠ” ë¡œì§ì— ëŒ€í•´ì„œëŠ” ì´ë²ˆ í¸ì—ì„œ ë‹¤ë£¨ê¸°ë¡œ í•œë‹¤. (ë„ˆë¬´ ê¸¸ì–´ì ¸ì„œ..)</p>
</blockquote>

<h2 id="csrf-ê³µê²©-ë°©ì–´">CSRF ê³µê²© ë°©ì–´</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">SamSite=None</code>ìœ¼ë¡œ í•˜ë©´ CSRF ê³µê²©ì„ ë°©ì–´í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì¶”ê°€ ì„¤ì •ì„ í•´ì¤˜ì•¼ í•œë‹¤.</li>
  <li>ë°©ì–´ ë°©ë²•ë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.</li>
</ul>

<h3 id="1-csrf-í† í°-íŒ¨í„´">1. CSRF í† í° íŒ¨í„´</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SecurityConfig.java</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">filterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">http</span>
            <span class="o">.</span><span class="na">csrf</span><span class="o">(</span><span class="n">csrf</span> <span class="o">-&gt;</span> <span class="n">csrf</span>
                <span class="o">.</span><span class="na">csrfTokenRepository</span><span class="o">(</span><span class="nc">CookieCsrfTokenRepository</span><span class="o">.</span><span class="na">withHttpOnlyFalse</span><span class="o">())</span>
                <span class="o">.</span><span class="na">csrfTokenRequestHandler</span><span class="o">(</span><span class="k">new</span> <span class="nc">SpaCsrfTokenRequestHandler</span><span class="o">())</span>
            <span class="o">)</span>
            <span class="c1">// ... ë‚˜ë¨¸ì§€ ì„¤ì •</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// í”„ë¡ íŠ¸ì—”ë“œ</span>
<span class="kd">const</span> <span class="nx">csrfToken</span> <span class="o">=</span> <span class="nx">getCookie</span><span class="p">(</span><span class="dl">"</span><span class="s2">XSRF-TOKEN</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/v1/users/delete</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">X-XSRF-TOKEN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">csrfToken</span><span class="p">,</span> <span class="c1">// CSRF í† í° í¬í•¨</span>
  <span class="p">},</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li>ì´ë ‡ê²Œ í•˜ë©´ ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ëŠ”
    <ul>
      <li>JavaScriptë¡œ ì¿ í‚¤ë¥¼ ì½ì„ ìˆ˜ ì—†ìŒ</li>
      <li>ë”°ë¼ì„œ í—¤ë”ì— í† í°ì„ í¬í•¨í•  ìˆ˜ ì—†ìŒ</li>
    </ul>
  </li>
</ul>

<h3 id="2-originreferer-ê²€ì¦">2. Origin/Referer ê²€ì¦</h3>

<ul>
  <li>ì„œë²„ì—ì„œ ìš”ì²­ì˜ <code class="language-plaintext highlighter-rouge">Origin</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">Referer</code> í—¤ë”ë¥¼ í™•ì¸í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë„ë©”ì¸ì—ì„œ ì˜¨ ìš”ì²­ì¸ì§€ ê²€ì¦</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// CorsConfig.java</span>
<span class="nd">@Bean</span>
<span class="nd">@Profile</span><span class="o">(</span><span class="s">"prod"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">CorsConfigurationSource</span> <span class="nf">prodCorsConfigurationSource</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">CorsConfiguration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CorsConfiguration</span><span class="o">();</span>

    <span class="c1">// âœ… í—ˆìš©ëœ ì¶œì²˜ë§Œ ëª…ì‹œ</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setAllowedOriginPatterns</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
        <span class="s">"https://chingoo-frontend.vercel.app"</span><span class="o">,</span>
        <span class="s">"https://www.chingoo-frontend.vercel.app"</span>
    <span class="o">));</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setAllowCredentials</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ í•˜ë©´</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DELETE https://your-backend.com/api/v1/users/delete
Origin: https://evil.com  â† ì´ ê°’ìœ¼ë¡œ ê²€ì¦!
Cookie: refreshToken=...
</code></pre></div></div>

<ul>
  <li>ë°±ì—”ë“œê°€ <code class="language-plaintext highlighter-rouge">Origin</code> í—¤ë” í™•ì¸:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">evail.com</code>ì€ í—ˆìš© ëª©ë¡ì— ì—†ìŒ</li>
      <li>CORS ì˜¤ë¥˜ ë°œìƒìœ¼ë¡œ ìš”ì²­ ì°¨ë‹¨</li>
    </ul>
  </li>
  <li>ì´ ë°©ë²•ì˜ ë‹¨ì ì´ ìˆë‹¤.
    <ul>
      <li>Origin í—¤ë”ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œëŠ” ìš°íšŒ ê°€ëŠ¥</li>
      <li>ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ ìš”ì²­(Postman, curl)ì—ì„œëŠ” ê²€ì¦ ì•ˆë¨</li>
    </ul>
  </li>
</ul>

<h3 id="3-jwtì˜-ì´ì¤‘-ê²€ì¦">3. JWTì˜ ì´ì¤‘ ê²€ì¦</h3>

<ul>
  <li>ê°€ì¥ í˜„ëŒ€ì ì¸ ë°©ë²•ì´ë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// JwtAuthenticationFilter.java</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doFilterInternal</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
                                <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span>
                                <span class="nc">FilterChain</span> <span class="n">filterChain</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// 1ï¸âƒ£ ì¿ í‚¤ì—ì„œ RefreshToken ì¶”ì¶œ</span>
    <span class="nc">String</span> <span class="n">refreshTokenFromCookie</span> <span class="o">=</span> <span class="n">extractTokenFromCookie</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="c1">// 2ï¸âƒ£ í—¤ë”ì—ì„œ AccessToken ì¶”ì¶œ</span>
    <span class="nc">String</span> <span class="n">accessTokenFromHeader</span> <span class="o">=</span> <span class="n">extractTokenFromHeader</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="c1">// 3ï¸âƒ£ ë‘˜ ë‹¤ ê²€ì¦</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isValidToken</span><span class="o">(</span><span class="n">refreshTokenFromCookie</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
        <span class="n">isValidToken</span><span class="o">(</span><span class="n">accessTokenFromHeader</span><span class="o">))</span> <span class="o">{</span>

        <span class="c1">// 4ï¸âƒ£ í† í°ì˜ userIdê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸</span>
        <span class="nc">Long</span> <span class="n">userIdFromRefresh</span> <span class="o">=</span> <span class="n">getUserIdFromToken</span><span class="o">(</span><span class="n">refreshTokenFromCookie</span><span class="o">);</span>
        <span class="nc">Long</span> <span class="n">userIdFromAccess</span> <span class="o">=</span> <span class="n">getUserIdFromToken</span><span class="o">(</span><span class="n">accessTokenFromHeader</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">userIdFromRefresh</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">userIdFromAccess</span><span class="o">))</span> <span class="o">{</span>
            <span class="c1">// âœ… ì¸ì¦ ì„±ê³µ</span>
            <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">createAuthentication</span><span class="o">(</span><span class="n">userIdFromAccess</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¿ í‚¤(Refresh Token)ì´ ìë™ìœ¼ë¡œ í¬í•¨ë¨</li>
  <li>í•˜ì§€ë§Œ í•´ë”(Access Token)ëŠ” JavaScriptë¡œ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•´ì•¼í•¨</li>
  <li>ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ëŠ” ì •ìƒ ì‚¬ì´íŠ¸ì˜ localStorageì— ì ‘ê·¼ ë¶ˆê°€ (Cross-Origin)</li>
  <li>ë”°ë¼ì„œ Access Tokenì„ ì–»ì„ ìˆ˜ ì—†ìŒ</li>
</ul>

<h3 id="4-samsite--csrf-í† í°-ì¡°í•©">4. SamSite + CSRF í† í° ì¡°í•©</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="nd">@Profile</span><span class="o">(</span><span class="s">"prod"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">prodFilterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">http</span>
            <span class="c1">// CSRF í† í° í™œì„±í™”</span>
            <span class="o">.</span><span class="na">csrf</span><span class="o">(</span><span class="n">csrf</span> <span class="o">-&gt;</span> <span class="n">csrf</span>
                <span class="o">.</span><span class="na">csrfTokenRepository</span><span class="o">(</span><span class="nc">CookieCsrfTokenRepository</span><span class="o">.</span><span class="na">withHttpOnlyFalse</span><span class="o">())</span>
            <span class="o">)</span>
            <span class="c1">// CORS ì„¤ì • (Origin ê²€ì¦)</span>
            <span class="o">.</span><span class="na">cors</span><span class="o">(</span><span class="n">cors</span> <span class="o">-&gt;</span> <span class="n">cors</span><span class="o">.</span><span class="na">configurationSource</span><span class="o">(</span><span class="n">corsConfigurationSource</span><span class="o">))</span>
            <span class="c1">// ...</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># application-prod.yml</span>
<span class="na">app</span><span class="pi">:</span>
  <span class="na">cookie</span><span class="pi">:</span>
    <span class="na">secure</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">same-site</span><span class="pi">:</span> <span class="s">None</span> <span class="c1"># í¬ë¡œìŠ¤ ë„ë©”ì¸ ì§€ì›</span>
    <span class="na">max-age</span><span class="pi">:</span> <span class="m">2592000</span>
</code></pre></div></div>

<ul>
  <li>ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ì¤‘ ë°©ì–´ì„ ì´ ë§Œë“¤ì–´ì§„ë‹¤.
    <ul>
      <li>Origin ê²€ì¦ (CORS)</li>
      <li>CSRF í† í° ê²€ì¦</li>
      <li>JWT ê²€ì¦</li>
    </ul>
  </li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ë°±ì—”ë“œ, í”„ë¡ íŠ¸ ë„ë©”ì¸ì´ ë‹¤ë¥¸ í¬ë¡œìŠ¤ ë„ë©”ì¸ì˜ Production í™˜ê²½ì—ì„œ Refresh Tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤!]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ</title><link href="https://nan0silver.github.io/projectdiary/2025-10-15-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ" /><published>2025-10-15T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-15-diary/"><![CDATA[<ul>
  <li><a href="#ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</a></li>
  <li><a href="#ì›ì¸-ë¶„ì„">ì›ì¸ ë¶„ì„</a></li>
  <li><a href="#í•´ê²°-ë°©ë²•">í•´ê²°ë°©ë²•</a></li>
  <li><a href="#ì°¸ê³ -ì‚¬í•­">ì°¸ê³ ì‚¬í•­</a></li>
</ul>

<h2 id="í¬ë¡œìŠ¤-ë„ë©”ì¸-í™˜ê²½ì—ì„œ-refresh-token-ì¿ í‚¤-ì†Œì‹¤-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…">í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>

<ul>
  <li>ê°œë°œ í™˜ê²½ì—ì„œëŠ” tokenê´€ë ¨ ë¬¸ì œê°€ ì „í˜€ ì—†ì—ˆë‹¤. ê·¸ëŸ°ë° ë°°í¬í•œ í›„ ë¡œê·¸ì¸ì´ ìƒˆë¡œìš´ íƒ­ì—ì„œ ìœ ì§€ë˜ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  í•˜ë‹¤ê°€ Refresh Tokenì´ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì‚¬ë¼ì§€ëŠ”ê±¸ ë°œê²¬í•˜ì˜€ë‹¤.
    <blockquote>
      <p>ì–´ë””ê°”ì–´.. ë‚´ refresh token ğŸ¥²</p>
    </blockquote>
  </li>
  <li>ë¡œê·¸ì¸ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ” ë¬¸ì œëŠ” ì™œì¸ì§€ ì•Œì•˜ê¸° ë•Œë¬¸ì— ê¸ˆë°© í•´ê²°í•˜ì˜€ì§€ë§Œ, refresh tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œê°€ ë” ë‚˜ë¥¼ í˜ë“¤ê²Œ ë§Œë“¤ì—ˆë‹¤..</li>
  <li>ë”°ë¼ì„œ ì™œ ê·¸ëŸ° ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ì§€ ì¢€ ë” ì•Œì•„ë³´ê³ ì í–ˆë‹¤.</li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>Local í™˜ê²½: Refresh Token ì¿ í‚¤ê°€ ì •ìƒì ìœ¼ë¡œ ìœ ì§€ë¨ âœ…</li>
  <li>Production í™˜ê²½ : ë¡œê·¸ì¸ì€ ì„±ê³µí•˜ì§€ë§Œ, ìƒˆë¡œê³ ì¹¨í•˜ë©´ Refresh Token ì¿ í‚¤ê°€ ì‚¬ë¼ì§ ğŸ‘» (Refresh Tokenì€ HttpOnly Cookieì— ì €ì¥í•¨)</li>
  <li>
    <p>ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ í™•ì¸í•œ ì¿ í‚¤ ë§Œë£Œ ì‹œê°„: 30ì¼ âœ…</p>

    <blockquote>
      <p>ì²˜ìŒì—” ë§Œë£Œ ì‹œê°„ì´ ì˜ëª» ì„¤ì •ë˜ì–´ìˆëŠ”ì¤„ ì•Œì•˜ë‹¤.</p>
    </blockquote>
  </li>
  <li>
    <p>í™˜ê²½ ì •ë³´</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Local í™˜ê²½:
- Frontend: http://localhost:3000
- Backend:  http://localhost:8080
- ë™ì¼ í˜¸ìŠ¤íŠ¸(localhost), ë‹¤ë¥¸ í¬íŠ¸ â†’ Same-Site

Production í™˜ê²½:
- Frontend: https://chingoo-frontend.vercel.app
- Backend:  https://your-backend-domain.com
- ë‹¤ë¥¸ ë„ë©”ì¸ â†’ Cross-Site
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="ì›ì¸-ë¶„ì„">ì›ì¸ ë¶„ì„</h2>

<h3 id="1-ì˜ëª»ëœ-ì¿ í‚¤-ì„¤ì •">1. ì˜ëª»ëœ ì¿ í‚¤ ì„¤ì •</h3>

<p>application-prod.ymlì˜ ë¬¸ì œ:</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">app:
  cookie:
    secure: false     # âŒ HTTPS í™˜ê²½ì¸ë° false
    sam-site: Lax     # âŒ í¬ë¡œìŠ¤ ë„ë©”ì¸ì¸ë° Lax
    max-age: 2592000  # âœ… 30ì¼ (ì •ìƒ)
</span></code></pre></div></div>

<h3 id="2-samsite-ì¿ í‚¤-ì •ì±…-ì´í•´í•˜ê¸°">2. SamSite ì¿ í‚¤ ì •ì±… ì´í•´í•˜ê¸°</h3>

<h4 id="samsite-ì†ì„±ì´ë€">SamSite ì†ì„±ì´ë€?</h4>

<ul>
  <li>
    <p>CSRF(Cross-Site Request Forgery) ê³µê²©ì„ ë°©ì–´í•˜ê¸° ìœ„í•´ ë„ì…ëœ ì¿ í‚¤ ì •ì±…ìœ¼ë¡œ, ì–¸ì œ ì¿ í‚¤ë¥¼ ì „ì†¡í• ì§€ë¥¼ ì œì–´</p>

    <blockquote>
      <p>CSRFê³µê²© ì´ë€?</p>

      <blockquote>
        <p>ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜ì§€ì™€ëŠ” ìƒê´€ì—†ì´ ê³µê²©ìê°€ ì˜ë„í•œ í–‰ìœ„(ìˆ˜ì •, ì‚­ì œ, ë“±ë¡ ë“±)ë¥¼ íŠ¹ì • ì›¹ì‚¬ì´íŠ¸ì— ìš”ì²­í•˜ê²Œ í•˜ëŠ” ê³µê²©
ê³µê²©ìê°€ ì‚¬ìš©ìì˜ ì„¸ì…˜ì„ ê°€ë¡œì±„ëŠ” ë°©ì‹ìœ¼ë¡œ ì¼ì–´ë‚œë‹¤.</p>
      </blockquote>
    </blockquote>
  </li>
  <li>
    <p>SamSite 3ê°€ì§€ ê°’</p>
    <ol>
      <li>Strict
        <ul>
          <li>ë™ì¼ ì‚¬ì´íŠ¸ì—ì„œë§Œ ì¿ í‚¤ ì „ê³µ</li>
          <li>ëª¨ë“  í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ì—ì„œ ì°¨ë‹¨</li>
          <li>ìµœê³  ìˆ˜ì¤€ ë³´ì•ˆì´ í•„ìš”í•œ ê²½ìš°ì— ì‚¬ìš© (ë§¤ìš° ì—„ê²©í•´ì„œ ì˜ ì•ˆì”€)</li>
        </ul>
      </li>
      <li>Lax (ê¸°ë³¸ê°’)
        <ul>
          <li>TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ + GET ìš”ì²­ë§Œ í—ˆìš©</li>
          <li>POST, PUT, DELETE ë“±ì€ ì°¨ë‹¨</li>
          <li>ì¼ë°˜ì ì¸ Sam-Site í™˜ê²½ (í”„ë¡ íŠ¸ì—”ë“œì™€ ë²¡ì—”ë“œê°€ ê°™ì€ ë„ë©”ì¸)</li>
        </ul>
      </li>
      <li>None
        <ul>
          <li>ëª¨ë“  í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ì—ì„œ ì¿ í‚¤ì „ì†¡</li>
          <li>ë‹¨, <code class="language-plaintext highlighter-rouge">Secure=true</code> í•„ìˆ˜ (HTTPS)</li>
          <li>í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ (í”„ë¡ íŠ¸ì—”íŠ¸ì™€ ë°±ì—”ë“œ ë„ë©”ì¸ ë‹¤ë¦„)</li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h4 id="ë¸Œë¼ìš°ì„œì˜-samsitelax-ë™ì‘-ë¶„ì„">ë¸Œë¼ìš°ì„œì˜ SamSite=Lax ë™ì‘ ë¶„ì„</h4>

<h4 id="ì‹œë‚˜ë¦¬ì˜¤-1-ë¡œê·¸ì¸-ì‹œ-ìµœì´ˆ-ìš”ì²­">ì‹œë‚˜ë¦¬ì˜¤ 1: ë¡œê·¸ì¸ ì‹œ (ìµœì´ˆ ìš”ì²­)</h4>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST https://your-backend.com/api/v1/auth/login
Origin: https://your-frontend.com
Content-Type: application/json

{"email": "user@example.com", "password": "..."}
</span></code></pre></div></div>

<p>ë°±ì—”ë“œ ì‘ë‹µ:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Set-Cookie: refreshToken=eyJhbGc...;
            Path=/;
            Max-Age=2592000;
            HttpOnly;
            Secure;
            SameSite=Lax  â† ì—¬ê¸°ê°€ ë¬¸ì œ! âŒ
Access-Control-Allow-Origin: https://chingoo-frontend.vercel.app
Access-Control-Allow-Credentials: true
</code></pre></div></div>

<ul>
  <li>ì¿ í‚¤ëŠ” ì„¤ì •ë¨ (ë¸Œë¼ìš°ì €ê°€ Set-Cookie í—¤ë”ë¥¼ ë°›ì•„ì„œ ì €ì¥)</li>
  <li>ê°œë°œì ë„êµ¬ì—ì„œ ì¿ í‚¤ í™•ì¸ ê°€ëŠ¥</li>
  <li>Expires/Max-Ageë„ 30ì¼ë¡œ ì •ìƒ</li>
</ul>

<h4 id="ì‹œë‚˜ë¦¬ì˜¤-2-ìƒˆë¡œê³ ì¹¨-ì‹œ-ë‘ë²ˆì§¸-ìš”ì²­">ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒˆë¡œê³ ì¹¨ ì‹œ (ë‘ë²ˆì§¸ ìš”ì²­)</h4>

<ul>
  <li>ì‚¬ìš©ìê°€ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” í˜ì´ì§€ ì´ë™ ì‹œ, í”„ë¡ íŠ¸ì—”ë“œê°€ ìë™ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” API í˜¸ì¶œ:</li>
</ul>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">// í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ (ìë™ ì‹¤í–‰)
useEffect(() =&gt; {
  axios.get('https://your-backend.com/api/v1/users/me', {
    withCredentials: true  // ì¿ í‚¤ ì „ì†¡ ìš”ì²­
  });
}, []);
</span></code></pre></div></div>

<p>ë¸Œë¼ìš°ì €ì˜ ìš”ì²­:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://your-backend.com/api/v1/users/me
Origin: https://your-frontend.com
Cookie: (ì—†ìŒ!) &lt;- SamSite=Laxê°€ ì¿ í‚¤ ì „ì†¡ì„ ì°¨ë‹¨!
</code></pre></div></div>

<ul>
  <li>TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ì´ ì•„ë‹ˆê³  JavaScript ìš”ì²­ì´ê¸° ë•Œë¬¸ì— ì¿ í‚¤ ì „ì†¡ì´ ì•ˆëŒ
    <blockquote>
      <p>TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>

      <blockquote>
        <ol>
          <li>ì£¼ì†Œì°½ì— URLì„ ì§ì ‘ ì…ë ¥</li>
          <li><code class="language-plaintext highlighter-rouge">&lt;a href = "..."&gt;</code> ë§í¬ í´ë¦­</li>
          <li><code class="language-plaintext highlighter-rouge">window.location.href</code> ë³€ê²½
            <blockquote>
              <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   // âŒ ì´ëŸ° JavaScript ìš”ì²­ì€ TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ì´ ì•„ë‹˜
   axios.get('https://api.example.com/user');

   // âœ… ì´ëŸ° ìš”ì²­ë§Œ TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ìœ¼ë¡œ ì¸ì •
   window.location.href = 'https://api.example.com/user';
   &lt;a href="https://api.example.com/user"&gt;í´ë¦­&lt;/a&gt;
</code></pre></div>              </div>
            </blockquote>
          </li>
        </ol>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h4 id="ì‹œë‚˜ë¦¬ì˜¤-3-post-ìš”ì²­">ì‹œë‚˜ë¦¬ì˜¤ 3: POST ìš”ì²­</h4>

<ul>
  <li>ì‚¬ìš©ìê°€ í¼ì„ ì œì¶œí•˜ëŠ” ë“± POST ìš”ì²­ì„ ë³´ë‚¼ ë•Œ:</li>
</ul>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST https://your-backend.com/api/v1/some-action
Origin: https://your-frontend.com
Cookie: (ì—†ìŒ!) &lt;- SamSite=Laxê°€ ì¿ í‚¤ ì „ì†¡ì„ ì°¨ë‹¨
</span></code></pre></div></div>

<p>ê²°ê³¼:</p>

<ul>
  <li>Refresh Token ì¿ í‚¤ê°€ ì „ì†¡ë˜ì§€ ì•ŠìŒ</li>
  <li>ë°±ì—”ë“œì—ì„œ ì¸ì¦ ì‹¤íŒ¨ (401 Unauthorized)</li>
  <li>ì‚¬ìš©ìëŠ” ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì•¼í•¨</li>
</ul>

<h2 id="í•´ê²°">í•´ê²°</h2>

<ul>
  <li>application-prod.yml ìˆ˜ì •</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app:
  cookie:
    secure: true       # HTTPS í•„ìˆ˜
    same-site: None    # í¬ë¡œìŠ¤ ë„ë©”ì¸ í—ˆìš©
    max-age: 2592000   # 30ì¼
</code></pre></div></div>

<ul>
  <li>ì´ë¡œ ì¸í•œ CSRF ê³µê²©ì— ëŒ€í•œ ë°©ì–´ëŠ” ë‹¤ìŒ í¸ì—ì„œ ë‹¤ë£¨ê¸°ë¡œ í•œë‹¤.</li>
</ul>

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite">MDN: SamSite cookies</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ë°±ì—”ë“œ, í”„ë¡ íŠ¸ ë„ë©”ì¸ì´ ë‹¤ë¥¸ í¬ë¡œìŠ¤ ë„ë©”ì¸ì˜ Production í™˜ê²½ì—ì„œ Refresh Tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤! (í•´ê²°ì€ ë‹¤ìŒí¸)]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Redis ë°ì´í„° ì´ˆê¸°í™” íŠ¸ëŸ¬ë¸” ìŠˆíŒ…</title><link href="https://nan0silver.github.io/projectdiary/2025-10-14-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Redis ë°ì´í„° ì´ˆê¸°í™” íŠ¸ëŸ¬ë¸” ìŠˆíŒ…" /><published>2025-10-14T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-14-diary/"><![CDATA[<ul>
  <li><a href="#ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</a></li>
  <li><a href="#ì›ì¸">ì›ì¸</a></li>
  <li><a href="#í•´ê²°-ë°©ë²•">í•´ê²°ë°©ë²•</a></li>
  <li><a href="#ì°¸ê³ -ì‚¬í•­">ì°¸ê³ ì‚¬í•­</a></li>
</ul>

<h2 id="redis-ë°ì´í„°-ì´ˆê¸°í™”-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…">Redis ë°ì´í„° ì´ˆê¸°í™” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>

<ul>
  <li>
    <p>ë‚˜ëŠ” ë¡œì»¬ í™˜ê²½ì—ì„œ Docker Composeë¡œ Redis, MySQLë£° ì»¨í…Œì´ë„ˆí™”í•´ì„œ ì‹¤í–‰í•˜ê³  ìˆë‹¤.</p>

    <blockquote>
      <p>Redis 7 Alpine ì´ë¯¸ì§€ ê¸°ë°˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</p>
    </blockquote>
  </li>
  <li>Redis(ì¸ë©”ëª¨ë¦¬ ìºì‹œ)ëŠ” ì‹¤ì‹œê°„ ë§¤ì¹­ ëŒ€ê¸°ì—´ ê´€ë¦¬ì— ì‚¬ìš©ë˜ê³ ,</li>
  <li>
    <p>MySQLì€ ë§¤ì¹­ ê²°ê³¼ ë° ì‚¬ìš©ì ì •ë³´ ì €ì¥ì— ì‚¬ìš©ëœë‹¤.</p>

    <blockquote>
      <p>ë§¤ì¹­ ëŒ€ê¸°ì—´ì—ì„œ Redisë¥¼ ì‚¬ìš©í•œ í”Œë¡œìš°ì™€ ì´ìœ ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒ ê²Œì‹œê¸€ì—ì„œ ë‹¤ë£¨ê² ë‹¤.</p>
    </blockquote>
  </li>
  <li>Spring Bootë¡œ ë¡œì»¬ ê°œë°œì„ í•˜ë©° ë§¤ì¹­ - í†µí™” - í†µí™” í‰ê°€ í”„ë¡œì„¸ìŠ¤ êµ¬ì¶•ì— ì‹œê°„ì„ ë§ì´ ì¼ë‹¤.</li>
  <li>Redis, WebSockeì„ ì´ìš©í•œ ê°œë°œì´ ì²˜ìŒì´ê¸°ë„ í•˜ê³ , ê³µë¶€í•˜ë©´ì„œ ê°œë°œí–ˆê¸° ë•Œë¬¸ì— ì‹œí–‰ì°©ì˜¤ë¥¼ ë§ì´ ê±°ì³¤ë‹¤.</li>
  <li>ì´ ê³¼ì •ì—ì„œ ê³„ì† DBë¥¼ ì´ˆê¸°í™” í•˜ê³ .. ë¡œì§ì„ ì—ê³ .. í•˜ëŠ” ì¼ë“¤ì´ ë§ì•˜ëŠ”ë°</li>
  <li>
    <p>ì—¬ëŸ¬ë²ˆ ë°˜ë³µì ìœ¼ë¡œ Redisë¥¼ ì´ˆê¸°í™” í• ë•ŒëŠ” ì™¸ì›Œì„œ í–ˆì§€ë§Œ í”„ë¡ íŠ¸ì™€ ì—°ë™í•˜ë©° ì˜¤ëœë§Œì— ë§¤ì¹­ ê´€ë ¨ ì½”ë“œë¥¼ ëœ¯ì–´ë³´ë‹¤ ë¬¸ì œê°€ ìƒê²¨ Redisë¥¼ ì´ˆê¸°í™” í•˜ë ¤ë‹ˆ ìƒê°ì´ í•˜ë‚˜ë„ ì•ˆë‚˜ëŠ” ê²ƒì´ë‹¤!!</p>
  </li>
  <li>ê·¸ë˜ì„œ ê·¸ëƒ¥ ì •ë¦¬í•´ë‘ê¸°ë¡œ í–ˆë‹¤.</li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë§¤ì¹­ ëŒ€ê¸°ì—´ì— ì‚¬ìš©ìê°€ ê³„ì† ë‚¨ì•„ìˆëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.</li>
  <li>
    <p>MySQLì€ ì´ˆê¸°í™” í•œ ìƒí™©, userê°€ í•œëª…ë„ ì—†ëŠ”ë°ë„ userIDë§Œ redisì— ê³„ì† ì €ì¥ë˜ì–´ìˆëŠ” ìƒí™©</p>

    <ul>
      <li>MySQLì€ spring boot ì¬ì‹¤í–‰ë§Œìœ¼ë¡œë„ ì´ˆê¸°í™”ê°€ ì‰½ê²Œ ë˜ëŠ”ë° redisëŠ” ì–´ë–»ê²Œ í–ˆë”ë¼.. ë¬¸ì œ ë°œìƒ</li>
    </ul>
  </li>
  <li><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-10-14-image.png?raw=true" alt="ê³„ì† ë‚¨ì•„ìˆëŠ” ë§¤ì¹­ ëŒ€ê¸°ì—´ì˜ ìœ ë ¹ë“¤" />
    <blockquote>
      <p>ê³„ì† ë‚¨ì•„ìˆëŠ” ë§¤ì¹­ ëŒ€ê¸°ì—´ì˜ ìœ ë ¹ë“¤</p>
    </blockquote>
  </li>
</ul>

<h2 id="ì›ì¸">ì›ì¸</h2>

<ul>
  <li>ìœ„ì—ë„ ë§í–ˆì§€ë§Œ Docker Composeë¡œ MySQL ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì´ˆê¸°í™”ë¨</li>
  <li>í•˜ì§€ë§Œ RedisëŠ” ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì´ë©´ì„œë„ <code class="language-plaintext highlighter-rouge">redis_data</code>ë³¼ë¥¨ì•  ë°ì´í„°ë¥¼ ì˜êµ¬ ì €ì¥</li>
  <li>ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•´ë„ ë³¼ë¥¨ì— ì €ì¥ëœ ë°ì´í„°ëŠ” ìœ ì§€ë¨..</li>
  <li>ê²°ê³¼ì ìœ¼ë¡œ DBì—ëŠ” ì—†ëŠ” ì‚¬ìš©ìê°€ Redisì—ë§Œ ë‚¨ì•„ìˆëŠ” ë¶ˆì¼ì¹˜ ìƒíƒœ ë°œìƒ</li>
</ul>

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<h3 id="ë°©ë²•-1--redis-clië¡œ-ë°ì´í„°-ì‚­ì œ">ë°©ë²• 1 : Redis CLIë¡œ ë°ì´í„° ì‚­ì œ</h3>

<blockquote>
  <p>ë‚˜ëŠ” ì´ê±¸ë¡œ í•´ê²°</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Redis ì»¨í…Œì´ë„ˆì— ì ‘ì†
docker exec -it &lt;ë‚´ redis ì´ë¦„&gt; redis-cli

# ëª¨ë“  ë°ì´í„° ì‚­ì œ
127.0.0.1:6379&gt; FLUSHALL

# ì‚­ì œ í™•ì¸
127.0.0.1:6379&gt; KEYS *

# ì¢…ë£Œ
127.0.0.1:6379&gt; exit
</code></pre></div></div>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-10-14-image-1.png?raw=true" alt="ìº¡ì³ ì‚¬ì§„" /></p>

<p>-&gt; ê¸ˆë°© í•´ê²°!</p>

<h3 id="ë°©ë²•-2--ëª…ë ¹ì–´-í•œì¤„ë¡œ-ì‹¤í–‰">ë°©ë²• 2 : ëª…ë ¹ì–´ í•œì¤„ë¡œ ì‹¤í–‰</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec -it chingoo-redis redis-cli FLUSHALL
</code></pre></div></div>

<h3 id="ë°©ë²•-3--docker-ë³¼ë¥¨ê¹Œì§€-ì™„ì „-ì‚­ì œ">ë°©ë²• 3 : Docker ë³¼ë¥¨ê¹Œì§€ ì™„ì „ ì‚­ì œ</h3>

<ul>
  <li>ë” í™•ì‹¤í•œ ì´ˆê¸°í™” ë°©ë²•</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># docker ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd docker

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ë³¼ë¥¨ ì‚­ì œ
docker-compose down -v

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose up -d
</code></pre></div></div>

<ul>
  <li>ë³¼ë¥¨ê¹Œì§€ ì‚­ì œë˜ë¯€ë¡œ Redis ë°ì´í„°ê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë¨</li>
  <li>â€¼ <code class="language-plaintext highlighter-rouge">-v</code>ì˜µì…˜ì€ MySQL ë°ì´í„°ë„ ì‚­ì œí•˜ë¯€ë¡œ ì£¼ì˜ê°€ í•„ìš”!</li>
</ul>

<h2 id="í•´ê²°">í•´ê²°</h2>

<p>ì´ë ‡ê²Œ í•˜ë©´
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-10-14-image-2.png?raw=true" alt="alt text" /></p>

<blockquote>
  <p>ë§¤ì¹­ ëŒ€ê¸°ì—´ì´ ê¹¨ë—í•´ì§„ ëª¨ìŠµ
ì´ë ‡ê²Œ ìœ ë ¹ë“¤ì´ ì‚¬ë¼ì§„ë‹¤.</p>
</blockquote>

<h2 id="ì°¸ê³ -ì‚¬í•­">ì°¸ê³  ì‚¬í•­</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">FLUSHALL</code>: ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ì˜ ëª¨ë“  í‚¤ ì‚­ì œ</li>
  <li><code class="language-plaintext highlighter-rouge">FLUSHDB</code>: í˜„ì¬ ì„ íƒëœ ë°ì´í„°ë² ì´ìŠ¤ì˜ í‚¤ë§Œ ì‚­ì œ</li>
  <li>RedisëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ 0~15ë²ˆê¹Œì§€ 16ê°œë¥¼ ì œê³µ</li>
  <li>ìš´ì˜í™˜ê²½ì—ì„œëŠ” ì ˆëŒ€ <code class="language-plaintext highlighter-rouge">FLUSHALL</code>ì„ ì‹¤í–‰í•˜ë©´ ì•ˆë¨!</li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ê°€ë” ë°œìƒí–ˆë˜ Redis ë°ì´í„° ì´ˆê¸°í™” ë°©ë²•ê³¼ ê´€ë ¨í•´ ì •ë¦¬]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] WebRTCë€ ë¬´ì—‡ì¼ê¹Œ?</title><link href="https://nan0silver.github.io/projectdiary/2025-09-30-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] WebRTCë€ ë¬´ì—‡ì¼ê¹Œ?" /><published>2025-09-30T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-09-30-diary/"><![CDATA[<ul>
  <li><a href="#-1-webrtcì˜-ì •ì˜">1. WebRTCì˜ ì •ì˜</a></li>
  <li><a href="#-2-webrtcì˜-ì£¼ìš”-êµ¬ì„±-ìš”ì†Œ">2. WebRTCì˜ ì£¼ìš” êµ¬ì„± ìš”ì†Œ</a></li>
  <li><a href="#ï¸-3-ë™ì‘-íë¦„-signaling-í¬í•¨">3. ë™ì‘ íë¦„ (Signaling í¬í•¨)</a></li>
  <li><a href="#-4-ì™œ-agoraë¥¼-ì‚¬ìš©í•˜ëŠ”ê°€">4. ì™œ Agoraë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€</a></li>
  <li><a href="#-5-ë³´ì•ˆ-ì¸¡ë©´">5. ë³´ì•ˆ ì¸¡ë©´</a></li>
  <li><a href="#-6-ì˜¤ëŠ˜ì˜-ì •ë¦¬">6. ì˜¤ëŠ˜ì˜ ì •ë¦¬</a></li>
</ul>

<hr />

<h2 id="-1-webrtcì˜-ì •ì˜">ğŸ§© 1. WebRTCì˜ ì •ì˜</h2>

<p><strong>WebRTC (Web Real-Time Communication)</strong>ëŠ”
ì›¹ ë¸Œë¼ìš°ì €ë‚˜ ëª¨ë°”ì¼ ì•±ë¼ë¦¬ <strong>ì‹¤ì‹œê°„ ìŒì„±, ì˜ìƒ, ë°ì´í„°</strong>ë¥¼ ì§ì ‘ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ê¸°ìˆ ì´ë‹¤.
ì¦‰, ì¤‘ê°„ ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  <strong>í´ë¼ì´ì–¸íŠ¸ ê°„ P2P í†µì‹ </strong>ì„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤.</p>

<p>ë¸Œë¼ìš°ì €ë¼ë¦¬ â€œì „í™”ê¸°ì²˜ëŸ¼â€ ì—°ê²°ëœë‹¤ê³  ìƒê°í•˜ë©´ ì‰½ë‹¤.
ë³„ë„ í”ŒëŸ¬ê·¸ì¸ì´ë‚˜ ì„¤ì¹˜ ê³¼ì • ì—†ì´ JavaScript APIë¡œ ë°”ë¡œ í†µí™” ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>

<hr />

<h2 id="-2-webrtcì˜-ì£¼ìš”-êµ¬ì„±-ìš”ì†Œ">ğŸŒ 2. WebRTCì˜ ì£¼ìš” êµ¬ì„± ìš”ì†Œ</h2>

<table>
  <thead>
    <tr>
      <th>êµ¬ì„± ìš”ì†Œ</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>MediaStream (getUserMedia)</strong></td>
      <td>ì‚¬ìš©ìì˜ ì¹´ë©”ë¼, ë§ˆì´í¬ ë°ì´í„°ë¥¼ ìº¡ì²˜í•˜ëŠ” API</td>
    </tr>
    <tr>
      <td><strong>RTCPeerConnection</strong></td>
      <td>ì‹¤ì œ P2P ì—°ê²°ì„ ë‹´ë‹¹. ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ì„¤ì •, ì½”ë± í˜‘ìƒ, ì•”í˜¸í™” ë“±ì„ ìˆ˜í–‰</td>
    </tr>
    <tr>
      <td><strong>RTCDataChannel</strong></td>
      <td>íŒŒì¼ ì „ì†¡, ì±„íŒ… ë“± ì‹¤ì‹œê°„ ë°ì´í„° êµí™˜ìš© ì±„ë„</td>
    </tr>
    <tr>
      <td><strong>ICE (Interactive Connectivity Establishment)</strong></td>
      <td>NAT(ê³µìœ ê¸° ë“±) í™˜ê²½ì—ì„œë„ í†µì‹ ì´ ê°€ëŠ¥í•˜ë„ë¡ IP í›„ë³´ íƒìƒ‰ ë° ì—°ê²° ì‹œë„</td>
    </tr>
    <tr>
      <td><strong>STUN / TURN ì„œë²„</strong></td>
      <td>STUN: ê³µìš© IP í™•ì¸ìš© / TURN: ì§ì ‘ ì—°ê²°ì´ ì•ˆë  ë•Œ ì¤‘ê³„ ì„œë²„ ì—­í• </td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="ï¸-3-ë™ì‘-íë¦„-signaling-í¬í•¨">ğŸ›°ï¸ 3. ë™ì‘ íë¦„ (Signaling í¬í•¨)</h2>

<ol>
  <li>
    <p><strong>Signaling ë‹¨ê³„</strong></p>

    <ul>
      <li>ë‘ í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²° ì •ë³´ë¥¼ êµí™˜ (SDP, ICE candidates ë“±)</li>
      <li>ì´ ë‹¨ê³„ëŠ” WebRTC ì™¸ë¶€ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•˜ë©°, ë³´í†µ WebSocket, Socket.io, REST API ë“±ì„ ì‚¬ìš©</li>
    </ul>
  </li>
  <li>
    <p><strong>P2P ì—°ê²°</strong></p>

    <ul>
      <li>ì„œë¡œì˜ ì—°ê²° ì •ë³´ë¥¼ ë°›ì€ ë’¤ <code class="language-plaintext highlighter-rouge">RTCPeerConnection</code>ìœ¼ë¡œ ì§ì ‘ ì—°ê²° ì‹œë„</li>
      <li>STUN ì„œë²„ë¡œ ì™¸ë¶€ IP íƒìƒ‰, í•„ìš” ì‹œ TURN ì„œë²„ë¥¼ í†µí•œ ì¤‘ê³„</li>
    </ul>
  </li>
  <li>
    <p><strong>ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ ì „ì†¡</strong></p>

    <ul>
      <li>ì—°ê²°ì´ ì™„ë£Œë˜ë©´ ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤/ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ êµí™˜ë¨</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="ï¸-4-ì™œ-agoraë¥¼-ì‚¬ìš©í•˜ëŠ”ê°€">âš™ï¸ 4. ì™œ Agoraë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€</h2>

<p>WebRTC ìì²´ëŠ” â€œê¸°ìˆ  í‘œì¤€â€ì¼ ë¿, ì‹¤ì„œë¹„ìŠ¤ì—ëŠ” <strong>ë³´ì™„ì´ í•„ìš”</strong>í•˜ë‹¤.
ì˜ˆë¥¼ ë“¤ì–´,</p>

<ul>
  <li>TURN ì„œë²„ íŠ¸ë˜í”½ ë¹„ìš©ê³¼ ê´€ë¦¬ ë¶€ë‹´</li>
  <li>ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ ëŠê¹€</li>
  <li>ë‹¤ìê°„ í†µí™” (SFU/Mesh ë°©ì‹) êµ¬í˜„ ë³µì¡ì„±</li>
</ul>

<p>ì´ ë•Œë¬¸ì— Agora, Twilio, Daily ê°™ì€ <strong>WebRTC ê¸°ë°˜ í´ë¼ìš°ë“œ SDK</strong>ë¥¼ ì´ìš©í•˜ë©´
ë³µì¡í•œ signaling, TURN ìš´ì˜, QoS íŠœë‹ì„ ëŒ€ì‹  ì²˜ë¦¬í•´ì¤€ë‹¤.</p>

<p>ğŸ‘‰ <strong>ì¹œêµ¬í•˜ì ì„œë¹„ìŠ¤</strong>ì—ì„œë„ Agoraë¥¼ ì´ìš©í•´</p>

<ul>
  <li>ë¹ ë¥¸ 1:1 ë§¤ì¹­ í†µí™”</li>
  <li>ì•ˆì •ì ì¸ í†µí™” í’ˆì§ˆ</li>
  <li>í†µí™” ì¢…ë£Œ í›„ ê°ì •ë¶„ì„ AI ì—°ê²°</li>
</ul>

<p>ê¹Œì§€ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>

<blockquote>
  <p>ì—¬ëŸ¬ SDKë¥¼ ë¹„êµí•œ í›„, ê°€ê²© ì„±ëŠ¥ ì„œë¹„ìŠ¤ ë¶€ë¶„ì—ì„œ Agoraë¥¼ ì„ íƒí–ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="-5-ë³´ì•ˆ-ì¸¡ë©´">ğŸ” 5. ë³´ì•ˆ ì¸¡ë©´</h2>

<ul>
  <li>ëª¨ë“  WebRTC í†µì‹ ì€ <strong>DTLS (Datagram Transport Layer Security)</strong> ë¡œ ì•”í˜¸í™”</li>
  <li>ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ì€ <strong>SRTP (Secure RTP)</strong> ë¡œ ì•”í˜¸í™”ë˜ì–´ ì•ˆì „í•˜ê²Œ ì „ì†¡</li>
  <li>HTTPS í™˜ê²½ì—ì„œë§Œ ë™ì‘ (ë¸Œë¼ìš°ì € ì •ì±…ìƒ ë³´ì•ˆ ì±„ë„ í•„ìˆ˜)</li>
</ul>

<hr />

<h2 id="-6-ì˜¤ëŠ˜ì˜-ì •ë¦¬">ğŸ’¡ 6. ì˜¤ëŠ˜ì˜ ì •ë¦¬</h2>

<table>
  <thead>
    <tr>
      <th>í‚¤ì›Œë“œ</th>
      <th>ìš”ì•½</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>WebRTC</strong></td>
      <td>ë¸Œë¼ìš°ì € ê°„ ì‹¤ì‹œê°„ í†µì‹  ê¸°ìˆ </td>
    </tr>
    <tr>
      <td><strong>Signaling</strong></td>
      <td>SDP/ICE êµí™˜ì„ ìœ„í•œ ì™¸ë¶€ ê³¼ì •</td>
    </tr>
    <tr>
      <td><strong>STUN/TURN</strong></td>
      <td>NAT í™˜ê²½ì—ì„œë„ ì—°ê²°ì„ ë•ëŠ” ì„œë²„</td>
    </tr>
    <tr>
      <td><strong>Agora</strong></td>
      <td>WebRTC ê¸°ë°˜ ì‹¤ì‹œê°„ í†µí™” SDK</td>
    </tr>
    <tr>
      <td><strong>ë³´ì•ˆ</strong></td>
      <td>DTLS + SRTP ê¸°ë°˜ ì•”í˜¸í™”</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="ï¸-7-ê°œì¸-ë©”ëª¨">âœï¸ 7. ê°œì¸ ë©”ëª¨</h2>

<blockquote>
  <p>Agora SDKë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë©° ëŠë‚€ ì </p>
</blockquote>

<ul>
  <li>ë¸Œë¼ìš°ì € ë‹¨ì—ì„œ PeerConnectionì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ì•ˆì •ì ì´ë‹¤.</li>
  <li>íŠ¹íˆ ë„¤íŠ¸ì›Œí¬ í’ˆì§ˆì´ ë‚®ì€ í™˜ê²½ì—ì„œ TURN ê´€ë¦¬ê°€ ìë™í™”ë˜ì–´ ìˆë‹¤ëŠ” ì ì´ í° ì¥ì .</li>
  <li>ì´í›„ ìì²´ STUN/TURN êµ¬ì¶•ì„ í†µí•´ ë¹„ìš© ì ˆê°ì„ ê²€í† í•  ì˜ˆì •.</li>
</ul>

<hr />]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì¹œêµ¬í•˜ì í”„ë¡œì íŠ¸ ê°œë°œ ì¤‘ Agora WebRTC í†µí™” êµ¬í˜„ ì „ ì´í•´í•˜ê¸°!]]></summary></entry><entry><title type="html">[JAVA] Java ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´ ì‹œ, ìì£¼ ì“°ì´ëŠ” Steam API í•¨ìˆ˜ë“¤</title><link href="https://nan0silver.github.io/java/2025-09-12-stream/" rel="alternate" type="text/html" title="[JAVA] Java ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´ ì‹œ, ìì£¼ ì“°ì´ëŠ” Steam API í•¨ìˆ˜ë“¤" /><published>2025-09-12T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/java/stream</id><content type="html" xml:base="https://nan0silver.github.io/java/2025-09-12-stream/"><![CDATA[<ul>
  <li><a href="#1-ë°°ì—´--ìŠ¤íŠ¸ë¦¼">1. ë°°ì—´ â†’ ìŠ¤íŠ¸ë¦¼</a></li>
  <li><a href="#2-í˜•-ë³€í™˜-mapping">2. í˜• ë³€í™˜ (Mapping)</a></li>
  <li><a href="#3-ì§‘ê³„-ì—°ì‚°-aggregation">3. ì§‘ê³„ ì—°ì‚° (Aggregation)</a></li>
  <li><a href="#4-ì •ë ¬--ìˆ˜ì§‘">4. ì •ë ¬ / ìˆ˜ì§‘</a></li>
  <li><a href="#5-foreach--joining">5. forEach / joining</a></li>
</ul>

<hr />

<h1 id="ìì£¼-ì“°ì´ëŠ”-stream-api-í•¨ìˆ˜ë“¤">ìì£¼ ì“°ì´ëŠ” Stream API í•¨ìˆ˜ë“¤</h1>

<h3 id="1-ë°°ì—´--ìŠ¤íŠ¸ë¦¼">1. <strong>ë°°ì—´ â†’ ìŠ¤íŠ¸ë¦¼</strong></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Arrays.stream(arr)</code> : <code class="language-plaintext highlighter-rouge">int[]</code>, <code class="language-plaintext highlighter-rouge">double[]</code>, <code class="language-plaintext highlighter-rouge">long[]</code> ê°™ì€ <strong>primitive ë°°ì—´</strong>ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜</li>
  <li><code class="language-plaintext highlighter-rouge">Stream.of(array)</code> : <code class="language-plaintext highlighter-rouge">String[]</code> ê°™ì€ <strong>ê°ì²´ ë°°ì—´</strong>ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜</li>
</ul>

<p>ì˜ˆ:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">};</span>
<span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

<span class="nc">String</span><span class="o">[]</span> <span class="n">strArr</span> <span class="o">=</span> <span class="o">{</span><span class="s">"1"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"3"</span><span class="o">};</span>
<span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">strArr</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</code></pre></div></div>

<hr />

<h3 id="2-í˜•-ë³€í™˜-mapping">2. <strong>í˜• ë³€í™˜ (Mapping)</strong></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mapToInt(Integer::parseInt)</code> : ë¬¸ìì—´ ìŠ¤íŠ¸ë¦¼ â†’ ì •ìˆ˜ ìŠ¤íŠ¸ë¦¼</li>
  <li><code class="language-plaintext highlighter-rouge">map(String::length)</code> : ë¬¸ìì—´ ìŠ¤íŠ¸ë¦¼ â†’ ë¬¸ìì—´ ê¸¸ì´ ìŠ¤íŠ¸ë¦¼</li>
</ul>

<p>ì˜ˆ:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="s">"1"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"3"</span><span class="o">};</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">intArr</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">).</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">).</span><span class="na">toArray</span><span class="o">();</span>
</code></pre></div></div>

<hr />

<h3 id="3-ì§‘ê³„-ì—°ì‚°-aggregation">3. <strong>ì§‘ê³„ ì—°ì‚° (Aggregation)</strong></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.min().getAsInt()</code> / <code class="language-plaintext highlighter-rouge">.max().getAsInt()</code> : ìµœì†Ÿê°’ / ìµœëŒ“ê°’</li>
  <li><code class="language-plaintext highlighter-rouge">.sum()</code> : í•©ê³„</li>
  <li><code class="language-plaintext highlighter-rouge">.average().getAsDouble()</code> : í‰ê· </li>
</ul>

<p>ì˜ˆ:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">};</span>
<span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">).</span><span class="na">min</span><span class="o">().</span><span class="na">getAsInt</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">).</span><span class="na">max</span><span class="o">().</span><span class="na">getAsInt</span><span class="o">();</span>
</code></pre></div></div>

<hr />

<h3 id="4-ì •ë ¬--ìˆ˜ì§‘">4. <strong>ì •ë ¬ / ìˆ˜ì§‘</strong></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.sorted()</code> : ì •ë ¬</li>
  <li><code class="language-plaintext highlighter-rouge">.toArray()</code> : ë°°ì—´ë¡œ ë‹¤ì‹œ ë³€í™˜</li>
  <li><code class="language-plaintext highlighter-rouge">.collect(Collectors.toList())</code> : ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜</li>
</ul>

<p>ì˜ˆ:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">};</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">)</span>
        <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">)</span>
        <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</code></pre></div></div>

<hr />

<h3 id="5-foreach--joining">5. <strong>forEach / joining</strong></h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.forEach(System.out::println)</code> : ìš”ì†Œ ì¶œë ¥</li>
  <li><code class="language-plaintext highlighter-rouge">.collect(Collectors.joining(" "))</code> : ë¬¸ìì—´ í•©ì¹˜ê¸°</li>
</ul>

<p>ì˜ˆ:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="s">"a"</span><span class="o">,</span> <span class="s">"b"</span><span class="o">,</span> <span class="s">"c"</span><span class="o">};</span>
<span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">)</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">", "</span><span class="o">));</span>  <span class="c1">// "a, b, c"</span>
</code></pre></div></div>

<hr />

<h2 id="-ì´-ë¬¸ì œë¥¼-streamìœ¼ë¡œ-í’€ë©´-ì´ë ‡ê²Œë„-ê°€ëŠ¥">ğŸ¯ ì´ ë¬¸ì œë¥¼ Streamìœ¼ë¡œ í’€ë©´ ì´ë ‡ê²Œë„ ê°€ëŠ¥</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">String</span> <span class="nf">solution</span><span class="o">(</span><span class="nc">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">IntSummaryStatistics</span> <span class="n">stats</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">))</span>
            <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">)</span>
            <span class="o">.</span><span class="na">summaryStatistics</span><span class="o">();</span>  <span class="c1">// count, min, max, sum, average í•œë²ˆì—</span>

    <span class="k">return</span> <span class="n">stats</span><span class="o">.</span><span class="na">getMin</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">stats</span><span class="o">.</span><span class="na">getMax</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ğŸ‘‰ <code class="language-plaintext highlighter-rouge">IntSummaryStatistics</code>ë¥¼ ì“°ë©´ <strong>ìµœì†Œê°’/ìµœëŒ€ê°’/í•©ê³„/í‰ê· </strong>ì„ ë‹¤ êµ¬í•  ìˆ˜ ìˆì–´ì„œ ê¹”ë”!</p>

<hr />

<p>ğŸ’¡ ì •ë¦¬
ë¹„ìŠ·í•œ ë¬¸ì œì—ì„œ ë¹ ë¥´ê²Œ í’€ê³  ì‹¶ìœ¼ë©´ ìµœì†Œí•œ ì•„ë˜ 3ê°œëŠ” ê¼­ ìµí˜€ë‘ì:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">mapToInt(Integer::parseInt)</code></li>
  <li><code class="language-plaintext highlighter-rouge">min() / max() / sum() / average()</code></li>
  <li><code class="language-plaintext highlighter-rouge">summaryStatistics()</code></li>
</ol>

<hr />]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="java" /><summary type="html"><![CDATA[ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œí’€ì´ ì‹œ, ì½”ë“œë¥¼ ì˜ˆì˜ê³  ë¹ ë¥´ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” Steam APIë¥¼ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] ë§¤ì¹­ ëŒ€ê¸°ì—´ ë§Œë“¤ë©´ì„œ ì •ë¦¬í•œ Redis ëª…ë ¹ì–´ ì¹˜íŠ¸ì‹œíŠ¸ (SET/ZSETí¸)</title><link href="https://nan0silver.github.io/projectdiary/2025-09-03-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] ë§¤ì¹­ ëŒ€ê¸°ì—´ ë§Œë“¤ë©´ì„œ ì •ë¦¬í•œ Redis ëª…ë ¹ì–´ ì¹˜íŠ¸ì‹œíŠ¸ (SET/ZSETí¸)" /><published>2025-09-03T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-09-03-diary/"><![CDATA[<blockquote>
  <p>ì¹´í…Œê³ ë¦¬ë³„ 2ì¸ ë§¤ì¹­ì„ êµ¬í˜„í•˜ë©° ì‹¤ì œë¡œ ì“´(ë˜ëŠ” ê³ ë¯¼í–ˆë˜) ëª…ë ¹ì–´ë“¤ì„ ì§§ê²Œ ì •ë¦¬.
ì˜ˆì‹œ í‚¤ëŠ” <code class="language-plaintext highlighter-rouge">{cat:123}</code> í•´ì‹œíƒœê·¸ë¡œ Redis Cluster ìŠ¬ë¡¯ì„ ê³ ì •í•˜ëŠ” íŒ¨í„´ì„ ì‚¬ìš©.</p>
</blockquote>

<hr />

<h2 id="zset-sorted-set--ìˆœë²ˆëŒ€ê¸°ì‹œê°„ìš°ì„ ìˆœìœ„ê°€-í•„ìš”í• -ë•Œ">ZSET (Sorted Set) â€” ìˆœë²ˆ/ëŒ€ê¸°ì‹œê°„/ìš°ì„ ìˆœìœ„ê°€ í•„ìš”í•  ë•Œ</h2>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZADD key score member [score member ...]</code>
ë©¤ë²„ ì¶”ê°€/ê°±ì‹ . <strong>score</strong>ê°€ ì‘ì„ìˆ˜ë¡ ì•ìª½.</p>

    <pre><code class="language-redis">ZADD wait:z:{cat:123} 1725430000123 101
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZRANGE key start stop [WITHSCORES | REV | BYSCORE ...]</code>
<strong>ì •ë ¬ ìˆœì„œëŒ€ë¡œ ì¡°íšŒ</strong>. ì‚­ì œëŠ” ì•„ë‹˜!</p>

    <pre><code class="language-redis">ZRANGE wait:z:{cat:123} 0 1              # ê°€ì¥ ì˜¤ë˜ ê¸°ë‹¤ë¦° 2ëª…
ZRANGE wait:z:{cat:123} 0 9 WITHSCORES    # ìƒìœ„ 10ëª… + score
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZRANK key member</code>
ë©¤ë²„ì˜ <strong>ìˆœìœ„(0-base)</strong>.</p>

    <pre><code class="language-redis">ZRANK wait:z:{cat:123} 101               # 0ì´ë©´ 1ë²ˆì§¸
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZSCORE key member</code>
ë©¤ë²„ì˜ score(ëŒ€ê¸° ì‹œì‘ ì‹œê° ë“±).</p>

    <pre><code class="language-redis">ZSCORE wait:z:{cat:123} 101
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZCARD key</code>
ë©¤ë²„ ìˆ˜.</p>

    <pre><code class="language-redis">ZCARD wait:z:{cat:123}
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZREM key member [member ...]</code>
ë©¤ë²„ ì‚­ì œ.</p>

    <pre><code class="language-redis">ZREM wait:z:{cat:123} 101 205
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZRANDMEMBER key [count] [WITHSCORES]</code> <em>(6.2+)</em>
<strong>ë¬´ì‘ìœ„ ì¡°íšŒ</strong>(ì‚­ì œ ì•„ë‹˜).</p>

    <pre><code class="language-redis">ZRANDMEMBER wait:z:{cat:123} 2
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ZPOPMIN key [count]</code> / <code class="language-plaintext highlighter-rouge">ZPOPMAX</code>
<strong>êº¼ë‚´ë©° ì‚­ì œ</strong>(ì›ì). ëŒ€ê¸°ìˆœ ë§¤ì¹­ì— ìœ ìš©.</p>

    <pre><code class="language-redis">ZPOPMIN wait:z:{cat:123} 2
</code></pre>
  </li>
</ul>

<hr />

<h2 id="set-ì§‘í•©--ì¤‘ë³µ-ì—†ëŠ”-ëœë¤-í’€">SET (ì§‘í•©) â€” ì¤‘ë³µ ì—†ëŠ” ëœë¤ í’€</h2>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">SADD key member [member ...]</code> / <code class="language-plaintext highlighter-rouge">SREM key member [...]</code>
ì¶”ê°€/ì‚­ì œ (ì¤‘ë³µ ë¶ˆê°€).</p>

    <pre><code class="language-redis">SADD matching:queue:{cat:123} 101
SREM matching:queue:{cat:123} 101
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">SPOP key [count]</code>
<strong>ë¬´ì‘ìœ„ ì¶”ì¶œ+ì‚­ì œ</strong>(ì›ì). ëœë¤ ë§¤ì¹­ì— ê°„ë‹¨Â·ë¹ ë¦„.</p>

    <pre><code class="language-redis">SPOP matching:queue:{cat:123} 2
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">SCARD key</code>
ë©¤ë²„ ìˆ˜.</p>

    <pre><code class="language-redis">SCARD matching:queue:{cat:123}
</code></pre>
  </li>
</ul>

<hr />

<h2 id="ttlí‚¤-ìœ í‹¸-ëŒ€ê¸°-ìƒíƒœ-ìë™-ì²­ì†Œìš©">TTL/í‚¤ ìœ í‹¸ (ëŒ€ê¸° ìƒíƒœ ìë™ ì²­ì†Œìš©)</h2>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">SET key value EX &lt;sec&gt; NX</code>
<strong>ì„ ì  + TTL</strong>(ì¤‘ë³µ ì…ì¥ ë°©ì§€).</p>

    <pre><code class="language-redis">SET user:index:42 "cat=123|queue=q_..." EX 600 NX
</code></pre>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">EXPIRE key &lt;sec&gt;</code> / <code class="language-plaintext highlighter-rouge">TTL key</code>
í‚¤ ë§Œë£Œ/ì¡°íšŒ.
<strong>ì£¼ì˜:</strong> TTLì€ <strong>í‚¤ ì „ì²´</strong>ì— ë¶™ìŒ(ë©¤ë²„ ë‹¨ìœ„ X).</p>
  </li>
</ul>

<blockquote>
  <p>ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤: <strong>ëŒ€ê¸°ì—´ ì»¬ë ‰ì…˜(SET/ZSET)ì—” TTL ê¸ˆì§€</strong>, ê°œë³„ ì‚¬ìš©ì ìƒíƒœ í‚¤ì—ë§Œ TTL.</p>
</blockquote>

<hr />

<h2 id="ë§¤ì¹­ì—ì„œ-ìì£¼-ì“°ëŠ”-ë ˆì‹œí”¼">ë§¤ì¹­ì—ì„œ ìì£¼ ì“°ëŠ” <strong>ë ˆì‹œí”¼</strong></h2>

<h3 id="1-ëŒ€ê¸°ìˆœê³µì •ì„±-ë§¤ì¹­">1) ëŒ€ê¸°ìˆœ(ê³µì •ì„±) ë§¤ì¹­</h3>

<ul>
  <li>
    <p>ë°©ë²• A(2ë‹¨ê³„): <code class="language-plaintext highlighter-rouge">ZRANGE</code>ë¡œ ìƒìœ„ N ì¡°íšŒ â†’ <strong><code class="language-plaintext highlighter-rouge">ZREM</code>ë¡œ ì œê±°</strong></p>

    <pre><code class="language-redis">ZRANGE wait:z:{cat:123} 0 1         # í›„ë³´ ì¡°íšŒ
ZREM   wait:z:{cat:123} 101 205     # í™•ì • í›„ ì œê±°
</code></pre>
  </li>
  <li>
    <p>ë°©ë²• B(ì›ì): <code class="language-plaintext highlighter-rouge">ZPOPMIN wait:z:{cat:123} 2</code>
(ì¡°íšŒ+ì‚­ì œê°€ í•œ ë²ˆì—)</p>
  </li>
</ul>

<h3 id="2-ëœë¤-ë§¤ì¹­">2) ëœë¤ ë§¤ì¹­</h3>

<ul>
  <li>
    <p>ZSETë§Œ ì“¸ ë•Œ(ì›ìí™”ëŠ” Lua ì¶”ì²œ):</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">ZRANDMEMBER</code>ë¡œ ì¡°íšŒ â†’ <strong>ê°™ì€ ë¡œì§ ì•ˆì—ì„œ <code class="language-plaintext highlighter-rouge">ZREM</code></strong></li>
    </ul>
  </li>
  <li>
    <p>SETì„ í•¨ê»˜ ì“¸ ë•Œ:</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">SPOP matching:queue:{cat:123} 2</code> (ì›ì ëœë¤ ì¶”ì¶œ)</li>
    </ul>
  </li>
</ul>

<h3 id="3-í•˜ì´ë¸Œë¦¬ë“œëœë¤-80--ëŒ€ê¸°ìˆœ-20">3) í•˜ì´ë¸Œë¦¬ë“œ(ëœë¤ 80% + ëŒ€ê¸°ìˆœ 20%)</h3>

<ul>
  <li>
    <p>í•˜ë‚˜ì˜ <strong>Lua/Functions</strong>ì—ì„œ ë¶„ê¸°:</p>

    <ul>
      <li>ëœë¤: <code class="language-plaintext highlighter-rouge">ZRANDMEMBER</code> â†’ <code class="language-plaintext highlighter-rouge">ZREM</code></li>
      <li>ëŒ€ê¸°ìˆœ: <code class="language-plaintext highlighter-rouge">ZRANGE</code> â†’ <code class="language-plaintext highlighter-rouge">ZREM</code> (ë˜ëŠ” <code class="language-plaintext highlighter-rouge">ZPOPMIN</code>)</li>
    </ul>
  </li>
</ul>

<h3 id="4-ì›ìì„±-ë³´ì¥ë™ì‹œì„±-ì•ˆì „">4) ì›ìì„± ë³´ì¥(ë™ì‹œì„± ì•ˆì „)</h3>

<ul>
  <li>
    <p><strong>ì¡°íšŒ(ì„ ì •)ì™€ ì‚­ì œë¥¼ í•œ ë©ì–´ë¦¬ë¡œ</strong>: Lua/Functionsë¡œ ê°ì‹¸ê¸°</p>

    <ul>
      <li>â€œì´ë¯¸ ë‹¤ë¥¸ ì›Œì»¤ê°€ ë¨¼ì € ê°€ì ¸ê°„â€ ì¼€ì´ìŠ¤ë¥¼ **<code class="language-plaintext highlighter-rouge">ZREM</code> ë°˜í™˜ê°’(0/1)**ë¡œ íŒë‹¨í•´ í•„í„°ë§.</li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="í”í•œ-ì‹¤ìˆ˜--ì£¼ì˜">í”í•œ ì‹¤ìˆ˜ &amp; ì£¼ì˜</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ZRANGE</code>/<code class="language-plaintext highlighter-rouge">ZRANDMEMBER</code> <strong>ë§Œ</strong> í˜¸ì¶œí•˜ê³  <code class="language-plaintext highlighter-rouge">ZREM</code>ì„ ë¹¼ë¨¹ìŒ â†’ íì— ê·¸ëŒ€ë¡œ ë‚¨ì•„ <strong>ì¤‘ë³µ ë§¤ì¹­</strong> ë°œìƒ.</li>
  <li><strong>ì»¬ë ‰ì…˜ í‚¤ì— TTL</strong>ì„ ê±¸ì–´ ì „ì²´ ëŒ€ê¸°ì—´ì´ ì‚¬ë¼ì§.
TTLì€ <strong>ê°œë³„ ì‚¬ìš©ì í‚¤</strong>(ì˜ˆ: <code class="language-plaintext highlighter-rouge">user:queued:{cat:123}:42</code>)ì—ë§Œ.</li>
  <li>Redis Cluster ì‚¬ìš© ì‹œ, <strong>ìŠ¤í¬ë¦½íŠ¸ KEYSëŠ” ê°™ì€ í•´ì‹œíƒœê·¸</strong>(<code class="language-plaintext highlighter-rouge">{cat:123}</code>)ë¡œ ë¬¶ê¸°. ì „ì—­ í‚¤ëŠ” Luaì—ì„œ ë‹¤ë£¨ì§€ ë§ê³  ìë°”ì—ì„œë§Œ.</li>
</ul>

<hr />

<h2 id="ì‹œê°„-ë³µì¡ë„">ì‹œê°„ ë³µì¡ë„</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ZADD/ZREM/ZRANK</code> â‰ˆ <strong>O(log N)</strong></li>
  <li><code class="language-plaintext highlighter-rouge">ZRANGE</code> â‰ˆ <strong>O(k)</strong> (ë°˜í™˜ ìˆ˜)</li>
  <li><code class="language-plaintext highlighter-rouge">ZPOPMIN/MAX</code> â‰ˆ <strong>O(k log N)</strong></li>
  <li><code class="language-plaintext highlighter-rouge">SADD/SREM/SPOP</code> â‰ˆ <strong>í‰ê·  O(1)</strong></li>
</ul>

<hr />

<h2 id="ë¯¸ë‹ˆ-ì˜ˆì‹œ-ëŒ€ê¸°ì—´-ì…ì¥--ë§¤ì¹­">ë¯¸ë‹ˆ ì˜ˆì‹œ: ëŒ€ê¸°ì—´ ì…ì¥ &amp; ë§¤ì¹­</h2>

<pre><code class="language-redis"># ì…ì¥
ZADD wait:z:{cat:123} 1725430000456 101          # ëŒ€ê¸° ì‹œì‘ ì‹œê°(ë°€ë¦¬ì´ˆ)
SET  user:queued:{cat:123}:101 q_101_123 EX 600   # ê°œë³„ TTL

# ëŒ€ê¸°ìˆœ ë§¤ì¹­ 2ëª… (ì›ì)
ZPOPMIN wait:z:{cat:123} 2                        # -&gt; [101,score],[205,score]

# ëœë¤ ë§¤ì¹­ 2ëª… (Luaë¡œ ì›ìí™” ê¶Œì¥)
-- ì¡°íšŒ
ZRANDMEMBER wait:z:{cat:123} 2
-- ê°™ì€ ë¡œì§ ì•ˆì—ì„œ ì œê±°
ZREM wait:z:{cat:123} 101 205
</code></pre>

<hr />

<h2 id="í•œ-ì¤„-ì •ë¦¬">í•œ ì¤„ ì •ë¦¬</h2>

<ul>
  <li><strong>ZSET = ìˆœë²ˆ/ëŒ€ê¸°ì‹œê°„/ê³µì •ì„±</strong>, <strong>SET = ë‹¨ìˆœ ëœë¤ í’€</strong></li>
  <li><code class="language-plaintext highlighter-rouge">ZRANGE/ZRANDMEMBER</code>(ì¡°íšŒ) ë’¤ì—” <strong>ë°˜ë“œì‹œ <code class="language-plaintext highlighter-rouge">ZREM</code>(ì‚­ì œ)</strong></li>
  <li>ê²½ìŸ í™˜ê²½ì—ì„  <strong>Luaë¡œ â€œì¡°íšŒâ†’ì‚­ì œâ€ë¥¼ ì›ìí™”</strong></li>
  <li><strong>TTLì€ ê°œë³„ ìƒíƒœ í‚¤ì—ë§Œ</strong>, ëŒ€ê¸°ì—´ ì»¬ë ‰ì…˜ì—” ê¸ˆì§€</li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì¹œêµ¬í•˜ì í”„ë¡œì íŠ¸ ê°œë°œ ì¤‘ ëœë¤ ë§¤ì¹­ ëŒ€ê¸°ì—´ì„ ë§Œë“¤ë©´ì„œ ì •ë¦¬í•œ Redis ëª…ë ¹ì–´ ëª¨ìŒì§‘ì…ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ @Transactional(REQUIRES_NEW)ë¥¼ ì„ íƒí•˜ê¸°ê¹Œì§€</title><link href="https://nan0silver.github.io/projectdiary/2025-08-29-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ @Transactional(REQUIRES_NEW)ë¥¼ ì„ íƒí•˜ê¸°ê¹Œì§€" /><published>2025-08-29T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-08-29-diary/"><![CDATA[<blockquote>
  <p>â€œì¹´í…Œê³ ë¦¬ë³„ 2ì¸ ëœë¤ ë§¤ì¹­â€ì„ ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ëŒë¦¬ëŠ”ë°, í•œ ì¹´í…Œê³ ë¦¬ì—ì„œ ì˜ˆì™¸ê°€ ë‚˜ë©´ <strong>ì „ì²´ ë£¨í”„ê°€ ë¡¤ë°±</strong>ë  ìˆ˜ ìˆë‹¤ëŠ” ì–˜ê¸°ë¥¼ ë“£ê³  ì‹œì‘ëœ ê³ ë¯¼.
ê·¸ ê²°ê³¼ <code class="language-plaintext highlighter-rouge">@Transactional(propagation = REQUIRES_NEW)</code>ë¥¼ ì±„íƒí–ˆê³ , ë‹¤ì‹œ <strong>self-invocation</strong> ë¬¸ì œë¥¼ ë§Œë‚˜ ë¦¬íŒ©í„°ë§ê¹Œì§€ ê°”ë˜ ê³¼ì •ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="ë°°ê²½-ë§¤ì¹­-ìŠ¤ì¼€ì¤„ëŸ¬ì˜-ìš”êµ¬ì‚¬í•­">ë°°ê²½: ë§¤ì¹­ ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ìš”êµ¬ì‚¬í•­</h2>

<ul>
  <li>ì—¬ëŸ¬ <strong>ì¹´í…Œê³ ë¦¬</strong>ë¥¼ ìˆœíšŒí•˜ë©° ë§¤ì¹­ì„ ìˆ˜í–‰í•œë‹¤.</li>
  <li>ì–´ë–¤ ì¹´í…Œê³ ë¦¬ì—ì„œ ì‹¤íŒ¨í•´ë„ <strong>ë‚˜ë¨¸ì§€ëŠ” ì •ìƒ ì»¤ë°‹</strong>ë˜ì–´ì•¼ í•œë‹¤(ë¶€ë¶„ ì„±ê³µ).</li>
  <li>DBì— ë§¤ì¹­ ì„¸ì…˜ì„ ë§Œë“¤ê³ , Redis ëŒ€ê¸°ì—´ì„ ì •ë¦¬í•˜ê³ , ì•Œë¦¼ì„ ë³´ë‚¸ë‹¤.</li>
</ul>

<p>ì²˜ìŒì—” ìŠ¤ì¼€ì¤„ëŸ¬ ì „ì²´ë¥¼ <code class="language-plaintext highlighter-rouge">@Transactional</code>ë¡œ ê°ì‹¸ëŠ” ê±¸ ê³ ë¯¼í–ˆì§€ë§Œ, ê·¸ëŸ¬ë©´ <strong>ì¹´í…Œê³ ë¦¬ í•˜ë‚˜ì˜ ì‹¤íŒ¨ê°€ ì „ì²´ ë¡¤ë°±</strong>ìœ¼ë¡œ ë²ˆì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ íŠ¸ëœì­ì…˜ ê²½ê³„ë¥¼ <strong>ì¹´í…Œê³ ë¦¬ ë‹¨ìœ„ë¡œ ìª¼ê°œì•¼</strong> í–ˆë‹¤.</p>

<hr />

<h2 id="ì˜µì…˜-ê²€í† -ì™œ-requires_newì¸ê°€">ì˜µì…˜ ê²€í† : ì™œ <code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code>ì¸ê°€</h2>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">REQUIRED</code></strong>: ë°”ê¹¥ íŠ¸ëœì­ì…˜ì´ ìˆìœ¼ë©´ <strong>ê°™ì´ ë¬¶ì¸ë‹¤</strong> â†’ ë¶€ë¶„ ì‹¤íŒ¨ê°€ ì „ì²´ ë¡¤ë°±ìœ¼ë¡œ í™•ì¥ë  ìœ„í—˜.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">NESTED</code></strong>: ì„¸ì´ë¸Œí¬ì¸íŠ¸ ê¸°ë°˜. <strong>ë°”ê¹¥ì´ ë¡¤ë°±ë˜ë©´ ë‚´ë¶€ë„ í•¨ê»˜ ë¡¤ë°±</strong> â†’ ë¶€ë¶„ ì„±ê³µ ë³´ì¥ X.</li>
  <li><strong>ë¹„íŠ¸ëœì­ì…˜</strong>(<code class="language-plaintext highlighter-rouge">NOT_SUPPORTED</code> ë“±): DB ì›ìì„± ë³´ì¥ X.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code></strong>: <strong>í•­ìƒ ìƒˆ íŠ¸ëœì­ì…˜ ì‹œì‘</strong>, ì™¸ë¶€ íŠ¸ëœì­ì…˜ì€ <strong>ì¼ì‹œ ì¤‘ë‹¨</strong> â†’ <strong>ì¹´í…Œê³ ë¦¬ë³„ ë…ë¦½ ì»¤ë°‹</strong>ì„ ì •í™•íˆ ì¶©ì¡±.</li>
</ul>

<p>ê²°ë¡ : ë‚´ ìš”êµ¬(ì¹´í…Œê³ ë¦¬ë³„ ì™„ê²°Â·ë¶€ë¶„ ì„±ê³µ)ë¥¼ ê°€ì¥ ì˜ ë§Œì¡±ì‹œí‚¤ëŠ” ê±´ <strong><code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code></strong>.</p>

<hr />

<h2 id="ì²«-ë²ˆì§¸-ë²½-self-invocation-ê²½ê³ ">ì²« ë²ˆì§¸ ë²½: â€œself-invocationâ€ ê²½ê³ </h2>

<p>ìŠ¤ì¼€ì¤„ëŸ¬ ì½”ë“œ ì´ˆì•ˆ:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Scheduled</span><span class="o">(</span><span class="n">fixedDelay</span> <span class="o">=</span> <span class="o">...)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processMatching</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Category</span> <span class="n">category</span> <span class="o">:</span> <span class="n">activeCategories</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">processMatchingForCategory</span><span class="o">(</span><span class="n">category</span><span class="o">);</span> <span class="c1">// ë‚´ë¶€ ë©”ì„œë“œ í˜¸ì¶œ</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Transactional</span><span class="o">(</span><span class="n">propagation</span> <span class="o">=</span> <span class="nc">Propagation</span><span class="o">.</span><span class="na">REQUIRES_NEW</span><span class="o">)</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">processMatchingForCategory</span><span class="o">(</span><span class="nc">Category</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</code></pre></div></div>

<p>ê²½ê³  ë©”ì‹œì§€:</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">@Transactional self-invocation ... does not lead to an actual transaction at runtime</code></p>
</blockquote>

<h3 id="ì™œ-ì´ëŸ°ê°€">ì™œ ì´ëŸ°ê°€?</h3>

<p>Springì˜ <code class="language-plaintext highlighter-rouge">@Transactional</code>ì€ <strong>í”„ë¡ì‹œ ê¸°ë°˜ AOP</strong>ë‹¤.
<strong>ê°™ì€ ê°ì²´ ë‚´ë¶€ì—ì„œ ìê¸° ë©”ì„œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´</strong> í”„ë¡ì‹œë¥¼ <strong>ìš°íšŒ</strong>í•˜ë¯€ë¡œ <strong>íŠ¸ëœì­ì…˜ì´ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤</strong>. ì ‘ê·¼ ì œì–´ì(privateâ†’protected) ë³€ê²½ìœ¼ë¡œëŠ” í•´ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤. ë³¸ì§ˆì€ <strong>í”„ë¡ì‹œë¥¼ íƒ€ëŠëƒ</strong>ì´ë‹¤.</p>

<hr />

<h2 id="í•´ê²°-íŠ¸ëœì­ì…˜-ê²½ê³„ë¥¼-ë‹¤ë¥¸-ë¹ˆì˜-public-ë©”ì„œë“œë¡œ-ë¶„ë¦¬">í•´ê²°: íŠ¸ëœì­ì…˜ ê²½ê³„ë¥¼ â€œë‹¤ë¥¸ ë¹ˆì˜ public ë©”ì„œë“œâ€ë¡œ ë¶„ë¦¬</h2>

<h3 id="ë¦¬íŒ©í„°ë§-ì „í›„">ë¦¬íŒ©í„°ë§ ì „/í›„</h3>

<p><strong>Before</strong>: ìŠ¤ì¼€ì¤„ëŸ¬ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ <code class="language-plaintext highlighter-rouge">processMatchingForCategory</code> í˜¸ì¶œ â†’ í”„ë¡ì‹œ ë¯¸ì ìš©</p>

<p><strong>After</strong>: <strong>ë³„ë„ì˜ ì„œë¹„ìŠ¤ ë¹ˆ</strong>ìœ¼ë¡œ ë¶„ë¦¬ + <code class="language-plaintext highlighter-rouge">public</code> ë©”ì„œë“œì— <code class="language-plaintext highlighter-rouge">@Transactional(REQUIRES_NEW)</code>
ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” â€œê·¸ ë¹ˆì„ ì£¼ì… ë°›ì•„ í˜¸ì¶œâ€ â†’ <strong>í”„ë¡ì‹œë¥¼ ê²½ìœ </strong>í•˜ë¯€ë¡œ íŠ¸ëœì­ì…˜ ì •ìƒ ì ìš©</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// A. ì¹´í…Œê³ ë¦¬ ë‹¨ìœ„ ì›Œì»¤ (ìƒˆ íŠ¸ëœì­ì…˜ ê²½ê³„)</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CategoryMatchWorker</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RedisMatchingQueueService</span> <span class="n">redisMatchingQueueService</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CallRepository</span> <span class="n">callRepository</span><span class="o">;</span>
    <span class="c1">// ... í•„ìš”í•œ ì˜ì¡´ì„±</span>

    <span class="nd">@Transactional</span><span class="o">(</span><span class="n">propagation</span> <span class="o">=</span> <span class="nc">Propagation</span><span class="o">.</span><span class="na">REQUIRES_NEW</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processCategory</span><span class="o">(</span><span class="nc">Category</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ì¹´í…Œê³ ë¦¬ í•˜ë‚˜ì— ëŒ€í•œ ëª¨ë“  DB ì‘ì—… (ì˜ˆì™¸ â†’ ì´ íŠ¸ëœì­ì…˜ë§Œ ë¡¤ë°±)</span>
        <span class="c1">// 1) ëŒ€ê¸° ì¸ì› í™•ì¸ â†’ 2) í•˜ì´ë¸Œë¦¬ë“œ ë§¤ì¹­ â†’ 3) ì‚¬ìš©ì ì¡°íšŒ ê²€ì¦</span>
        <span class="c1">// 4) Call ìƒì„±/ì €ì¥ â†’ 5) í ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ 6) ì•Œë¦¼ ì˜ˆì•½(afterCommit)</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// B. ìŠ¤ì¼€ì¤„ëŸ¬ (ë¹„íŠ¸ëœì­ì…˜; ì‹¤íŒ¨í•´ë„ ë£¨í”„ ê³„ì†)</span>
<span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MatchingSchedulerService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CategoryMatchWorker</span> <span class="n">categoryMatchWorker</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CategoryRepository</span> <span class="n">categoryRepository</span><span class="o">;</span>

    <span class="nd">@Scheduled</span><span class="o">(</span><span class="n">fixedDelay</span> <span class="o">=</span> <span class="o">...)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processMatching</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">var</span> <span class="n">categories</span> <span class="o">=</span> <span class="n">categoryRepository</span><span class="o">.</span><span class="na">findByIsActiveTrueOrderByName</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Category</span> <span class="n">category</span> <span class="o">:</span> <span class="n">categories</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">categoryMatchWorker</span><span class="o">.</span><span class="na">processCategory</span><span class="o">(</span><span class="n">category</span><span class="o">);</span> <span class="c1">// í”„ë¡ì‹œ ê²½ìœ  OK</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">log</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"ì¹´í…Œê³ ë¦¬ {} ì²˜ë¦¬ ì‹¤íŒ¨ - ë‹¤ìŒìœ¼ë¡œ ì§„í–‰"</span><span class="o">,</span> <span class="n">category</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">e</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>ëŒ€ì•ˆìœ¼ë¡œ <strong><code class="language-plaintext highlighter-rouge">TransactionTemplate</code></strong>(í”„ë¡œê·¸ë˜ë§¤í‹± íŠ¸ëœì­ì…˜)ë„ ìˆë‹¤. ì¹´í…Œê³ ë¦¬ë§ˆë‹¤ <code class="language-plaintext highlighter-rouge">PROPAGATION_REQUIRES_NEW</code>ë¡œ ì‹¤í–‰ ë¸”ë¡ì„ ê°ì‹¸ëŠ” ë°©ì‹. í”„ë¡ì‹œ ìš°íšŒ ì´ìŠˆê°€ ì—†ë‹¤.</p>
</blockquote>

<hr />

<h2 id="redisì™€ì˜-ê²½ê³„-í•œ-íŠ¸ëœì­ì…˜ì´-ì•„ë‹ˆë‹¤">Redisì™€ì˜ ê²½ê³„: â€œí•œ íŠ¸ëœì­ì…˜ì´ ì•„ë‹ˆë‹¤â€</h2>

<ul>
  <li>DBì™€ RedisëŠ” <strong>ë™ì¼ íŠ¸ëœì­ì…˜ ê²½ê³„ê°€ ì•„ë‹˜</strong>(2PC ì•ˆ ì“°ëŠ” í•œ).</li>
  <li>
    <p>ì•ˆì „í•œ ìˆœì„œ:</p>

    <ol>
      <li><strong>DB ì»¤ë°‹ ì„±ê³µ í›„</strong>(íŠ¸ëœì­ì…˜ ê²½ê³„ ë°–) Redis/PubSub/WebSocket ë“± <strong>ì‚¬ì´ë“œ ì´í™íŠ¸ ìˆ˜í–‰</strong></li>
      <li>Springì—ì„  <code class="language-plaintext highlighter-rouge">TransactionSynchronizationManager.registerSynchronization(... afterCommit)</code> í›…ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥</li>
    </ol>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">TransactionSynchronizationManager</span><span class="o">.</span><span class="na">registerSynchronization</span><span class="o">(</span><span class="k">new</span> <span class="nc">TransactionSynchronization</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterCommit</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// DB ì»¤ë°‹ì´ í™•ì •ëœ ë’¤ì—ë§Œ ì•Œë¦¼/ì´ë²¤íŠ¸ ë°œí–‰</span>
        <span class="n">webSocketEventService</span><span class="o">.</span><span class="na">notifyMatchingSuccess</span><span class="o">(...);</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div>

<hr />

<h2 id="ë‚´ê°€-ì–»ì€-ì²´í¬ë¦¬ìŠ¤íŠ¸">ë‚´ê°€ ì–»ì€ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>

<ol>
  <li><strong>ë¶€ë¶„ ì„±ê³µ</strong>ì´ ëª©í‘œë©´ íŠ¸ëœì­ì…˜ì„ **ì²˜ë¦¬ ë‹¨ìœ„(ì—¬ê¸°ì„  ì¹´í…Œê³ ë¦¬)**ë¡œ ìª¼ê° ë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code>ëŠ” ì™¸ë¶€ì™€ <strong>ë¶„ë¦¬ëœ ì»¤ë°‹/ë¡¤ë°±</strong>ì„ ë³´ì¥í•œë‹¤.</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">@Transactional</code>ì€ <strong>í”„ë¡ì‹œ ê¸°ë°˜</strong> â†’ <strong>ìê¸° ìì‹  í˜¸ì¶œì€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤</strong>.</p>

    <ul>
      <li>íŠ¸ëœì­ì…˜ ë©”ì„œë“œëŠ” <strong>public</strong> + <strong>ë‹¤ë¥¸ ë¹ˆ</strong>ìœ¼ë¡œ ë¶„ë¦¬í•´ í˜¸ì¶œ.</li>
      <li>ë˜ëŠ” <strong>TransactionTemplate</strong>ë¡œ ëª…ì‹œ ì œì–´.</li>
    </ul>
  </li>
  <li><strong>ë¡¤ë°± ê·œì¹™</strong>ì„ ì˜ë„ëŒ€ë¡œ: ì²´í¬ ì˜ˆì™¸ê¹Œì§€ ë¡¤ë°±ì´ë©´ <code class="language-plaintext highlighter-rouge">rollbackFor = Exception.class</code>.</li>
  <li><strong>Redis/ë©”ì‹œì§•</strong>ì€ DB íŠ¸ëœì­ì…˜ê³¼ ë³„ê°œ â†’ <strong>afterCommit</strong>ì— ë°°ì¹˜.</li>
  <li>ë©±ë“±ì„±Â·ì¬ì‹œë„Â·ì²˜ë¦¬ìƒíƒœ í”Œë˜ê·¸ë¥¼ ì¤€ë¹„(ì¼ë¶€ ì„±ê³µ/ì¼ë¶€ ì‹¤íŒ¨ê°€ ì •ìƒì¸ ì•„í‚¤í…ì²˜).</li>
</ol>

<hr />

<h2 id="ìµœì¢…-ê²°ë¡ ">ìµœì¢… ê²°ë¡ </h2>

<ul>
  <li>ìŠ¤ì¼€ì¤„ëŸ¬ ë£¨í”„ ì „ì²´ë¥¼ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¬¶ëŠ” ëŒ€ì‹ , **ì¹´í…Œê³ ë¦¬ë³„ë¡œ <code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code>**ë¥¼ ì ìš©í•´ <strong>ë¶€ë¶„ ì„±ê³µ</strong>ê³¼ <strong>ê²©ë¦¬</strong>ë¥¼ í™•ë³´í•œë‹¤.</li>
  <li>ì´ë•Œ <code class="language-plaintext highlighter-rouge">@Transactional</code>ì´ ì‹¤ì œë¡œ ë™ì‘í•˜ë ¤ë©´ <strong>í”„ë¡ì‹œë¥¼ íƒ€ì•¼ í•˜ë¯€ë¡œ</strong>, íŠ¸ëœì­ì…˜ ë©”ì„œë“œëŠ” <strong>ë‹¤ë¥¸ ë¹ˆì˜ public ë©”ì„œë“œ</strong>ë¡œ ë¶„ë¦¬í•œë‹¤.</li>
  <li>DB ì»¤ë°‹ ì´í›„ì—ë§Œ ì™¸ë¶€ ë¶€ì‘ìš©(ì•Œë¦¼/Redis)ì„ ë°œìƒì‹œí‚¤ëŠ” íë¦„ìœ¼ë¡œ <strong>ì •í•©ì„±</strong>ì„ ì§€í‚¨ë‹¤.</li>
</ul>

<p>ì´ ê³¼ì •ì„ ê±°ì¹˜ë©´ì„œ â€œì™œ <code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code>ì¸ê°€?â€ì— ë”í•´ â€œ<strong>ì–´ë””ì—, ì–´ë–»ê²Œ ë¶™ì—¬ì•¼ ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ”ê°€</strong>â€ë¥¼ ì²´ë“í–ˆë‹¤. ìŠ¤í”„ë§ì˜ íŠ¸ëœì­ì…˜ì€ <strong>ì–´ë…¸í…Œì´ì…˜ í•œ ì¤„</strong>ì´ ì•„ë‹ˆë¼, <strong>ê²½ê³„ ì„¤ê³„ + í˜¸ì¶œ êµ¬ì¡°</strong>ê¹Œì§€ í¬í•¨í•œ ë¬¸ì œì˜€ë‹¤.</p>

<blockquote>
  <p>Redis.. ì–´ë µë‹¤..</p>
</blockquote>

<h2 id="ì°¸ê³ ">ì°¸ê³ </h2>

<ul>
  <li><a href="https://redis.io/docs/latest/develop/programmability/">Redis programmability</a></li>
  <li><a href="https://redis.io/blog/you-dont-need-transaction-rollbacks-in-redis/?utm_source=chatgpt.com">You Donâ€™t Need Transaction Rollbacks in Redis</a></li>
  <li><a href="https://devoong2.tistory.com/entry/Spring-Transactional-REQUIRESNEW-%EC%98%B5%EC%85%98%EC%97%90%EC%84%9C%EC%9D%98-%EC%98%88%EC%99%B8-%EB%B0%8F-Rollback">Transactional REQUIRES_NEW ì˜µì…˜ì—ì„œ ì˜ˆì™¸ ë° Rollback</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì¹œêµ¬í•˜ì í”„ë¡œì íŠ¸ ê°œë°œ ì¤‘ ëœë¤ ë§¤ì¹­ ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ êµ¬í˜„í•˜ë‹¤ê°€ ìƒê¸´ ê³ ë¯¼ì„ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[JAVA] QueueëŠ” ì™œ ì•ˆë˜ê³  QueueëŠ” ì™œ ë ê¹Œ?</title><link href="https://nan0silver.github.io/java/2025-08-25-queue-int/" rel="alternate" type="text/html" title="[JAVA] QueueëŠ” ì™œ ì•ˆë˜ê³  QueueëŠ” ì™œ ë ê¹Œ?" /><published>2025-08-25T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/java/queue-int</id><content type="html" xml:base="https://nan0silver.github.io/java/2025-08-25-queue-int/"><![CDATA[<ul>
  <li><a href="#-recordë€-java-14">recordë€?</a></li>
  <li><a href="#1ï¸âƒ£-recordì˜-íŠ¹ì§•">recordì˜ íŠ¹ì§•</a></li>
  <li><a href="#2ï¸âƒ£-ê¸°ì¡´-í´ë˜ìŠ¤-vs-record-ë¹„êµ">ê¸°ì¡´ í´ë˜ìŠ¤ vs record ë¹„êµ</a></li>
  <li><a href="#3ï¸âƒ£-recordì˜-ë‚´ë¶€-ë™ì‘">record ë‚´ë¶€ ë™ì‘</a></li>
  <li><a href="#4ï¸âƒ£-recordì˜-ì£¼ìš”-ê¸°ëŠ¥">record ì£¼ìš” ê¸°ëŠ¥</a></li>
  <li><a href="#5ï¸âƒ£-recordë¥¼-ì–¸ì œ-ì‚¬ìš©í• ê¹Œ">record ì‚¬ìš© ë°©ë²•</a></li>
  <li><a href="#6ï¸âƒ£-ì •ë¦¬">ì •ë¦¬</a></li>
</ul>

<hr />

<h1 id="ì™œ-queueintëŠ”-ì•ˆ-ë˜ê³ -queueintegerëŠ”-ë ê¹Œ">ì™œ <code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code>ëŠ” ì•ˆ ë˜ê³  <code class="language-plaintext highlighter-rouge">Queue&lt;Integer&gt;</code>ëŠ” ë ê¹Œ?</h1>

<p>Java ì œë„¤ë¦­ì„ ì“°ë‹¤ ë³´ë©´ í•œ ë²ˆì”© ë©ˆì¹«í•˜ê²Œ ë˜ëŠ” ì§ˆë¬¸ì…ë‹ˆë‹¤. â€œì™œ <code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code>ëŠ” ì•ˆ ë˜ëŠ”ë° <code class="language-plaintext highlighter-rouge">Queue&lt;Integer&gt;</code>ëŠ” ë˜ì§€?â€ ì´ ê¸€ì€ ê·¸ ì´ìœ ë¥¼ **íƒ€ì… ì†Œê±°(type erasure)**ì™€ <strong>ì°¸ì¡° íƒ€ì…ë§Œ í—ˆìš©í•˜ëŠ” ì œë„¤ë¦­ ê·œì¹™</strong>ì—ì„œ ì°¨ê·¼ì°¨ê·¼ í’€ì–´ ì„¤ëª…í•©ë‹ˆë‹¤. ì‹¤ì „ ì„±ëŠ¥ íŒê³¼ BFS ê°™ì€ ì•Œê³ ë¦¬ì¦˜ ì½”ë“œ íŒ¨í„´ë„ í•¨ê»˜ ë‹´ì•˜ìŠµë‹ˆë‹¤.</p>

<hr />

<h2 id="ì •ë¦¬">ì •ë¦¬</h2>

<ul>
  <li><strong>ì œë„¤ë¦­ íƒ€ì… ì¸ì(T)ëŠ” ì°¸ì¡° íƒ€ì…ë§Œ ê°€ëŠ¥</strong>í•©ë‹ˆë‹¤. (<code class="language-plaintext highlighter-rouge">T extends Object</code>ê°€ ì•”ë¬µì  ì „ì œ)</li>
  <li><strong>íƒ€ì… ì†Œê±°</strong>ë¡œ ì¸í•´ ëŸ°íƒ€ì„ì—ëŠ” ì œë„¤ë¦­ ì •ë³´ê°€ ì§€ì›Œì§€ê³ , ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ê°€ ì‚¬ì‹¤ìƒ <code class="language-plaintext highlighter-rouge">Object</code> ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">int</code> ê°™ì€ <strong>ì›ì‹œ íƒ€ì…(primitive)</strong> ì€ <code class="language-plaintext highlighter-rouge">Object</code>ê°€ ì•„ë‹ˆë¯€ë¡œ <strong>ì œë„¤ë¦­ ì¸ìë¡œ ì“¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</strong> â‡’ <code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code> ê¸ˆì§€</li>
  <li><strong>ë°°ì—´ì€ ì°¸ì¡° íƒ€ì…</strong>ì´ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">Queue&lt;int[]&gt;</code>ëŠ” ê°€ëŠ¥í•©ë‹ˆë‹¤. (ë°°ì—´ ìì²´ëŠ” ê°ì²´)</li>
  <li>ì•Œê³ ë¦¬ì¦˜ íì—ëŠ” <strong><code class="language-plaintext highlighter-rouge">int[]</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">record/class</code>ë¡œ ìƒíƒœë¥¼ ë¬¶ì–´</strong> ë„£ìœ¼ë©´ <strong>ë°•ì‹± ì—†ì´</strong> ë¹ ë¥´ê³  ë©”ëª¨ë¦¬ ì¹œí™”ì ì…ë‹ˆë‹¤.</li>
</ul>

<hr />

<h2 id="1-ì œë„¤ë¦­ì€-ì™œ-ì“°ë‚˜">1) ì œë„¤ë¦­ì€ ì™œ ì“°ë‚˜?</h2>

<p>ì»´íŒŒì¼ íƒ€ì„ì— íƒ€ì…ì„ ì²´í¬í•´ <strong>íƒ€ì… ì•ˆì „ì„±</strong>ì„ ë†’ì´ê³ , ìºìŠ¤íŠ¸ë¥¼ ì—†ì•  <strong>ê°€ë…ì„±</strong>ê³¼ <strong>ìœ ì§€ë³´ìˆ˜ì„±</strong>ì„ ì˜¬ë¦¬ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.
<a href="https://nan0silver.github.io/java/2025-01-29-generic/">ì œë„¤ë¦­ì— ëŒ€í•´ ì •ë¦¬í•œ ë¸”ë¡œê·¸ ê¸€ ì°¸ê³ </a></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì œë„¤ë¦­ ì—†ìŒ: ìºìŠ¤íŠ¸ í•„ìš”</span>
<span class="nc">List</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"hi"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">x</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

<span class="c1">// ì œë„¤ë¦­ ì‚¬ìš©: ì»´íŒŒì¼ íƒ€ì„ì— ì²´í¬, ìºìŠ¤íŠ¸ ì œê±°</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="n">list2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"hi"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">y</span> <span class="o">=</span> <span class="n">list2</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</code></pre></div></div>

<hr />

<h2 id="2-íƒ€ì…-ì†Œê±°type-erasureë€">2) íƒ€ì… ì†Œê±°(type erasure)ë€?</h2>

<p>ìë°”ì˜ ì œë„¤ë¦­ì€ <strong>ëŸ°íƒ€ì„ì— ì‚¬ë¼ì§‘ë‹ˆë‹¤.</strong> ì»´íŒŒì¼ëŸ¬ê°€ ì œë„¤ë¦­ ì½”ë“œë¥¼ ê²€ì‚¬Â·ë³´ì •í•œ ë’¤, <strong>ì‹¤í–‰ ì‹œì ì—ëŠ” íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ ì§€ìš´(Objectë¡œ ëŒ€ì²´í•œ)</strong> í˜•íƒœë¡œ ë™ì‘í•©ë‹ˆë‹¤.</p>

<p>ê°œë…ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì›ë³¸</span>
<span class="kd">class</span> <span class="nc">Box</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">put</span><span class="o">(</span><span class="no">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
  <span class="no">T</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// (ê°œë…ì ) ì»´íŒŒì¼ í›„ - Tê°€ ì§€ì›Œì§€ê³  Object ì¤‘ì‹¬ìœ¼ë¡œ</span>
<span class="kd">class</span> <span class="nc">Box</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">put</span><span class="o">(</span><span class="nc">Object</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
  <span class="nc">Object</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì»´íŒŒì¼ëŸ¬ê°€ <strong>ìºìŠ¤íŠ¸ ì‚½ì…</strong>ê³¼ <strong>ì˜¤í† ë°•ì‹±/ì–¸ë°•ì‹±</strong>ìœ¼ë¡œ íƒ€ì… ì•ˆì „ì„ ë³´ì •í•´ ì¤ë‹ˆë‹¤(í•„ìš” ì‹œ ë¸Œë¦¬ì§€ ë©”ì„œë“œë„ ìƒì„±).</p>

<hr />

<h2 id="3-tëŠ”-ì™œ-ì°¸ì¡°-íƒ€ì…ë§Œ-ë -ìˆ˜-ìˆë‚˜">3) TëŠ” ì™œ â€˜ì°¸ì¡° íƒ€ì…â€™ë§Œ ë  ìˆ˜ ìˆë‚˜?</h2>

<p>ìë°” ì–¸ì–´ ê·œì¹™ìƒ **ëª¨ë“  íƒ€ì… ë§¤ê°œë³€ìˆ˜ëŠ” ì•”ë¬µì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">T extends Object</code>**ë¡œ ì·¨ê¸‰ë©ë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Integer</code>, <code class="language-plaintext highlighter-rouge">String</code>, <code class="language-plaintext highlighter-rouge">MyClass</code> ê°™ì€ <strong>ì°¸ì¡° íƒ€ì…(reference type)</strong> ì€ <code class="language-plaintext highlighter-rouge">Object</code>ì˜ í•˜ìœ„ íƒ€ì…ì´ë¯€ë¡œ OK.</li>
  <li><code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">double</code>, <code class="language-plaintext highlighter-rouge">boolean</code> ê°™ì€ <strong>ì›ì‹œ íƒ€ì…(primitive)</strong> ì€ <code class="language-plaintext highlighter-rouge">Object</code>ê°€ ì•„ë‹ˆë¯€ë¡œ <strong>ì œë„¤ë¦­ íƒ€ì… ì¸ìë¡œ ê¸ˆì§€</strong>ë©ë‹ˆë‹¤.</li>
</ul>

<p>ì¦‰, <code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code>ëŠ” <strong>ì–¸ì–´ ì°¨ì›ì—ì„œ ì„±ë¦½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong></p>

<blockquote>
  <p>í¬ì¸íŠ¸: <strong>íƒ€ì… ì†Œê±° í›„ì˜ ì„¸ê³„ëŠ” <code class="language-plaintext highlighter-rouge">Object</code> ì¤‘ì‹¬</strong>ì´ë¼, ê·¸ ì„¸ê³„ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆëŠ” íƒ€ì…(=ì°¸ì¡° íƒ€ì…)ë§Œ ì œë„¤ë¦­ ì¸ìê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="4-ê·¸ë ‡ë‹¤ë©´-queueintegerëŠ”-ì™œ-ë˜ë‚˜">4) ê·¸ë ‡ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">Queue&lt;Integer&gt;</code>ëŠ” ì™œ ë˜ë‚˜?</h2>

<p><code class="language-plaintext highlighter-rouge">Integer</code>ëŠ” <code class="language-plaintext highlighter-rouge">int</code>ì˜ <strong>ë˜í¼ í´ë˜ìŠ¤</strong>(ì°¸ì¡° íƒ€ì…)ì…ë‹ˆë‹¤. ì œë„¤ë¦­ ì¸ìë¡œ ì“¸ ìˆ˜ ìˆê³ , <code class="language-plaintext highlighter-rouge">q.offer(1)</code>ì²˜ëŸ¼ ì“°ë©´ <strong>ì˜¤í† ë°•ì‹±</strong>ì´ ìë™ìœ¼ë¡œ ì¼ì–´ë‚˜ <code class="language-plaintext highlighter-rouge">int -&gt; Integer</code>ê°€ ë©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
<span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>      <span class="c1">// intê°€ Integerë¡œ ì˜¤í† ë°•ì‹±</span>
<span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span> <span class="c1">// Integerê°€ intë¡œ ì–¸ë°•ì‹±</span>
</code></pre></div></div>

<p>ë‹¨, ì´ ê³¼ì •ì€ <strong>ê°ì²´ í• ë‹¹/GC ë¹„ìš©</strong>ì´ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ëŸ‰ ì—°ì‚°ì—ì„œëŠ” ì²´ê°ë  ìˆ˜ ìˆì–´ìš”.</p>

<hr />

<h2 id="5-queueintëŠ”-ì™œ-ê°€ëŠ¥í•œê°€">5) <code class="language-plaintext highlighter-rouge">Queue&lt;int[]&gt;</code>ëŠ” ì™œ ê°€ëŠ¥í•œê°€?</h2>

<p>ë°°ì—´ì€ <strong>í•­ìƒ ì°¸ì¡° íƒ€ì…</strong>ì…ë‹ˆë‹¤. ì›ì†Œê°€ ì›ì‹œ íƒ€ì…ì´ë“  ë§ë“ , <strong>ë°°ì—´ ìì²´ëŠ” í™ ê°ì²´</strong>ë‹ˆê¹Œ ì œë„¤ë¦­ ì¸ìë¡œ ì‚¬ìš© ê°€ëŠ¥í•´ìš”.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
<span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">});</span> <span class="c1">// ë°°ì—´ ì°¸ì¡°ë¥¼ ë„£ìŒ</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
</code></pre></div></div>

<hr />

<h2 id="6-ì„±ëŠ¥ë©”ëª¨ë¦¬-ê´€ì -ì˜¤í† ë°•ì‹±ì„-í”¼í•˜ì">6) ì„±ëŠ¥Â·ë©”ëª¨ë¦¬ ê´€ì : ì˜¤í† ë°•ì‹±ì„ í”¼í•˜ì</h2>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Queue&lt;Integer&gt;</code>ëŠ” <strong>ì›ì†Œë§ˆë‹¤ <code class="language-plaintext highlighter-rouge">Integer</code> ê°ì²´</strong>ê°€ ìƒê¸¸ ìˆ˜ ìˆì–´</p>

    <ul>
      <li>ì˜¤í† ë°•ì‹±/ì–¸ë°•ì‹± ë¹„ìš©</li>
      <li>ê°ì²´ í—¤ë” + í¬ì¸í„° ì˜¤ë²„í—¤ë“œ</li>
      <li>GC ë¶€ë‹´
ì´ ë°œìƒí•©ë‹ˆë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>ì•Œê³ ë¦¬ì¦˜(íŠ¹íˆ BFS/DFS, ë‹¤ìµìŠ¤íŠ¸ë¼ ë“±)ì—ì„œëŠ” <strong>ë°•ì‹±ì„ í”¼í•˜ëŠ” ê²Œ ìœ ë¦¬</strong>í•©ë‹ˆë‹¤.</p>
  </li>
</ul>

<h3 id="ê¶Œì¥-1-intë¡œ-ìƒíƒœ-ë¬¶ê¸°-ê°€ë³ê³ -ë¹ ë¦„">ê¶Œì¥ 1) <code class="language-plaintext highlighter-rouge">int[]</code>ë¡œ ìƒíƒœ ë¬¶ê¸° (ê°€ë³ê³  ë¹ ë¦„)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// {r, c, breakUsed, dist}</span>
<span class="nc">ArrayDeque</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
<span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">});</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">cur</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
</code></pre></div></div>

<h3 id="ê¶Œì¥-2-recordë¡œ-ê°€ë…ì„±--java-16">ê¶Œì¥ 2) <code class="language-plaintext highlighter-rouge">record</code>ë¡œ ê°€ë…ì„± â†‘ (Java 16+)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">record</span> <span class="nf">State</span><span class="o">(</span><span class="kt">int</span> <span class="n">r</span><span class="o">,</span> <span class="kt">int</span> <span class="n">c</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">d</span><span class="o">)</span> <span class="o">{}</span>
<span class="nc">ArrayDeque</span><span class="o">&lt;</span><span class="nc">State</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
<span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="nc">State</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">));</span>
<span class="nc">State</span> <span class="n">s</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
</code></pre></div></div>

<blockquote>
  <p>íŒ: í êµ¬í˜„ì²´ëŠ” **<code class="language-plaintext highlighter-rouge">ArrayDeque</code>**ê°€ ì¼ë°˜ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">LinkedList</code>ë³´ë‹¤ ë¹ ë¥´ê³  ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì…ë‹ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="7-ì‹¤ì „-faq">7) ì‹¤ì „ FAQ</h2>

<p><strong>Q1. â€œëŸ°íƒ€ì„ì— ì§„ì§œ <code class="language-plaintext highlighter-rouge">Queue&lt;Object&gt;</code>ë¡œ ë™ì‘í•˜ë‚˜ìš”?â€</strong>
ê°œë…ì ìœ¼ë¡œëŠ” <strong>ê·¸ì™€ ìœ ì‚¬</strong>í•©ë‹ˆë‹¤(íƒ€ì… ì†Œê±°). ì‹¤ì œë¡œëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìºìŠ¤íŠ¸/ë¸Œë¦¬ì§€ ë©”ì„œë“œ ë“±ìœ¼ë¡œ íƒ€ì… ì•ˆì „ì„ ë§ì¶° ì¤ë‹ˆë‹¤. í•µì‹¬ì€ <strong>ëŸ°íƒ€ì„ì— íƒ€ì… ì¸ì ì •ë³´ê°€ ì—†ê³  <code class="language-plaintext highlighter-rouge">Object</code> ì¤‘ì‹¬ìœ¼ë¡œ í˜¸ì¶œ</strong>ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>

<p><strong>Q2. ê·¸ë ‡ë‹¤ë©´ ì™œ ì»´íŒŒì¼ëŸ¬ê°€ <code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code>ë„ ìë™ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Queue&lt;Integer&gt;</code>ë¡œ ë°”ê¿”ì£¼ì§€ ì•Šë‚˜ìš”?</strong>
ì–¸ì–´ ê·œì¹™ìƒ <strong>ì œë„¤ë¦­ ì¸ìëŠ” ì°¸ì¡° íƒ€ì…ë§Œ</strong> í—ˆìš©í•©ë‹ˆë‹¤. íƒ€ì… ì¸ì ìì²´ë¥¼ ë°”ê¾¸ëŠ” ë¬µì‹œì  ë³€í™˜ì€ <strong>ì„¤ê³„ìƒ ëª¨í˜¸ì„±ê³¼ í•¨ì •</strong>(ì˜ˆ: <code class="language-plaintext highlighter-rouge">T</code>ê°€ ì›ì‹œë¡œ ì„ ì–¸ëëŠ”ë° ì‹¤ì œë¡  ì°¸ì¡°ë¡œ ë‹¤ë¤„ì§)ì„ ë‚³ê¸°ì— ê¸ˆì§€ë©ë‹ˆë‹¤. ëª…ì‹œì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Integer</code>ë¥¼ ì¨ ì£¼ì„¸ìš”.</p>

<p><strong>Q3. ì›ì‹œ íƒ€ì… ì»¬ë ‰ì…˜ì´ ê¼­ í•„ìš”í•©ë‹ˆë‹¤. ë°©ë²•ì´ ì—†ë‚˜ìš”?</strong>
í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì œê³µí•˜ì§€ ì•Šì§€ë§Œ, <strong>ì „ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬</strong>ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li>fastutil (<code class="language-plaintext highlighter-rouge">IntArrayList</code>, <code class="language-plaintext highlighter-rouge">IntOpenHashSet</code>, â€¦)</li>
  <li>HPPC (High Performance Primitive Collections)</li>
  <li>Eclipse Collections (primitive collections)
ëŒ€ëŸ‰ ë°ì´í„°Â·ê³ ì„±ëŠ¥ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ìœ ìš©í•©ë‹ˆë‹¤.</li>
</ul>

<hr />

<h2 id="8-bfs-ì˜ˆì‹œ-ë°•ì‹±-ì—†ì´-ê¹”ë”í•˜ê²Œ">8) BFS ì˜ˆì‹œ: ë°•ì‹± ì—†ì´ ê¹”ë”í•˜ê²Œ</h2>

<p>ì•„ë˜ëŠ” â€œë²½ì„ í•œ ë²ˆë§Œ ë¶€ìˆ  ìˆ˜ ìˆëŠ”â€ BFS íŒ¨í„´ì…ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">int[]</code>ë¡œ ìƒíƒœë¥¼ ë¬¶ì–´ <strong>ë°•ì‹±ì„ íšŒí”¼</strong>í•©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">dr</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">};</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">dc</span> <span class="o">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">};</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="nc">StringTokenizer</span> <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="kt">int</span> <span class="no">N</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
        <span class="kt">int</span> <span class="no">M</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>

        <span class="kt">int</span><span class="o">[][]</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="no">N</span><span class="o">][</span><span class="no">M</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="no">M</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="n">map</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span><span class="o">)</span> <span class="o">-</span> <span class="sc">'0'</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kt">boolean</span><span class="o">[][][]</span> <span class="n">visited</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="no">N</span><span class="o">][</span><span class="no">M</span><span class="o">][</span><span class="mi">2</span><span class="o">];</span>
        <span class="nc">ArrayDeque</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
        <span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">});</span> <span class="c1">// r, c, breakUsed, dist</span>
        <span class="n">visited</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

        <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(!</span><span class="n">q</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">cur</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">c</span> <span class="o">=</span> <span class="n">cur</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span> <span class="n">b</span> <span class="o">=</span> <span class="n">cur</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="n">d</span> <span class="o">=</span> <span class="n">cur</span><span class="o">[</span><span class="mi">3</span><span class="o">];</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">r</span> <span class="o">==</span> <span class="no">N</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">==</span> <span class="no">M</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">d</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span> <span class="o">}</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">nr</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">dr</span><span class="o">[</span><span class="n">k</span><span class="o">],</span> <span class="n">nc</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">dc</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">nr</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">nr</span> <span class="o">&gt;=</span> <span class="no">N</span> <span class="o">||</span> <span class="n">nc</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">nc</span> <span class="o">&gt;=</span> <span class="no">M</span><span class="o">)</span> <span class="k">continue</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">map</span><span class="o">[</span><span class="n">nr</span><span class="o">][</span><span class="n">nc</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="n">visited</span><span class="o">[</span><span class="n">nr</span><span class="o">][</span><span class="n">nc</span><span class="o">][</span><span class="n">b</span><span class="o">])</span> <span class="o">{</span> <span class="n">visited</span><span class="o">[</span><span class="n">nr</span><span class="o">][</span><span class="n">nc</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">nr</span><span class="o">,</span> <span class="n">nc</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="o">});</span> <span class="o">}</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">visited</span><span class="o">[</span><span class="n">nr</span><span class="o">][</span><span class="n">nc</span><span class="o">][</span><span class="mi">1</span><span class="o">])</span> <span class="o">{</span>
                    <span class="n">visited</span><span class="o">[</span><span class="n">nr</span><span class="o">][</span><span class="n">nc</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="n">q</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">nr</span><span class="o">,</span> <span class="n">nc</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="o">});</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ans</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="9-í•œëˆˆì—-ìš”ì•½-ì²´í¬ë¦¬ìŠ¤íŠ¸">9) í•œëˆˆì— ìš”ì•½ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ì œë„¤ë¦­ ì¸ì = <strong>ì°¸ì¡° íƒ€ì…ë§Œ</strong> (ì•”ë¬µì  <code class="language-plaintext highlighter-rouge">T extends Object</code>)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ëŸ°íƒ€ì„ = <strong>íƒ€ì… ì†Œê±°</strong> (ì œë„¤ë¦­ ì •ë³´ ì—†ìŒ, <code class="language-plaintext highlighter-rouge">Object</code> ì¤‘ì‹¬)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code> âŒ, <code class="language-plaintext highlighter-rouge">Queue&lt;Integer&gt;</code> â­•</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><code class="language-plaintext highlighter-rouge">Queue&lt;int[]&gt;</code> â­• (ë°°ì—´ì€ ì°¸ì¡° íƒ€ì…)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ì„±ëŠ¥ ì¤‘ìš”: <strong>ë°•ì‹± í”¼í•˜ê¸°</strong> (ê°€ëŠ¥í•˜ë©´ <code class="language-plaintext highlighter-rouge">int[]</code>/<code class="language-plaintext highlighter-rouge">record</code> ì‚¬ìš©)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />í êµ¬í˜„ì²´ëŠ” ë³´í†µ <strong><code class="language-plaintext highlighter-rouge">ArrayDeque</code></strong> ì¶”ì²œ</li>
</ul>

<hr />

<h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h2>

<p><code class="language-plaintext highlighter-rouge">Queue&lt;int&gt;</code>ê°€ ê¸ˆì§€ë˜ëŠ” ì´ìœ ëŠ” ë‹¨ìˆœíˆ â€œë¬¸ë²•ì´ ê·¸ë ‡ë‹¤â€ê°€ ì•„ë‹ˆë¼, <strong>íƒ€ì… ì†Œê±°ë¼ëŠ” ì‹¤í–‰ ëª¨ë¸</strong>ê³¼ <strong>ì°¸ì¡° íƒ€ì…ë§Œ í—ˆìš©í•˜ëŠ” ì œë„¤ë¦­ ì„¤ê³„</strong>ê°€ ë§ë¬¼ë¦° ê²°ê³¼ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ë¶€í„°ëŠ” ì•Œê³ ë¦¬ì¦˜ì—ì„œ <strong>ë°•ì‹± ì—†ëŠ” ìƒíƒœ í‘œí˜„</strong>ìœ¼ë¡œ ê¹”ë”í•˜ê³  ë¹ ë¥¸ ì½”ë“œë¥¼ ì¨ ë³´ì„¸ìš”!</p>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="java" /><summary type="html"><![CDATA["ì™œ QueueëŠ” ì•ˆ ë˜ëŠ”ë° QueueëŠ” ë˜ì§€?"ì— ëŒ€í•œ ì´ìœ ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] ë§¤ì¹­ ëŒ€ê¸°ì—´ ì„¤ê³„ ê¸°ë¡ : ì™œ DB + Redis í•˜ì´ë¸Œë¦¬ë“œë¡œ ê°”ë‚˜</title><link href="https://nan0silver.github.io/projectdiary/2025-08-25-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] ë§¤ì¹­ ëŒ€ê¸°ì—´ ì„¤ê³„ ê¸°ë¡ : ì™œ DB + Redis í•˜ì´ë¸Œë¦¬ë“œë¡œ ê°”ë‚˜" /><published>2025-08-25T00:00:00+00:00</published><updated>2025-10-24T13:29:52+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-08-25-diary/"><![CDATA[<ul>
  <li><a href="#ë¬¸ì œ-ë°°ê²½">ë¬¸ì œ ë°°ê²½</a></li>
  <li><a href="#tldr">TL;DR</a></li>
  <li><a href="#1-ë‚´ê°€-ì™œ-ì´ëŸ°-ê³ ë¯¼ì„-í•˜ê²Œ-ëë‚˜-ë§¥ë½">1. ë‚´ê°€ ì™œ ì´ëŸ° ê³ ë¯¼ì„ í•˜ê²Œ ëë‚˜</a></li>
  <li><a href="#2-í˜„ì¬-êµ¬í˜„ì˜-ë¬¸ì œ-ì •ë¦¬-redis-ë‹¨ë…ì¼-ë•Œ">2. í˜„ì¬ êµ¬í˜„ì˜ ë¬¸ì œ ì •ë¦¬ (Redis ë‹¨ë…ì¼ ë•Œ)</a></li>
  <li><a href="#3-í•˜ì´ë¸Œë¦¬ë“œ-ì„¤ê³„-ì›ì¹™">3. í•˜ì´ë¸Œë¦¬ë“œ ì„¤ê³„ ì›ì¹™</a></li>
  <li><a href="#4-ê°œì„ ëœ-ë°ì´í„°-íë¦„">4. ê°œì„ ëœ ë°ì´í„° íë¦„</a></li>
  <li><a href="#5-redis-ìë£Œêµ¬ì¡°-ì„ íƒê³¼-ì´ìœ ">5. Redis ìë£Œêµ¬ì¡° ì„ íƒê³¼ ì´ìœ </a></li>
  <li><a href="#6-ì›ìì -ë§¤ì¹­-lua-ìŠ¤í¬ë¦½íŠ¸-ì˜ˆì‹œê°œë…">6. ì›ìì  ë§¤ì¹­: Lua ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ(ê°œë…)</a></li>
  <li><a href="#7-ë³µêµ¬-ë©”ì»¤ë‹ˆì¦˜ì„œë²„-ì¬ê¸°ë™ì¥ì• -ëŒ€ë¹„">7. ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜(ì„œë²„ ì¬ê¸°ë™/ì¥ì•  ëŒ€ë¹„)</a></li>
  <li><a href="#8-ìŠ¤í‚¤ë§ˆì¸ë±ìŠ¤-ì„¤ê³„">8. ìŠ¤í‚¤ë§ˆ/ì¸ë±ìŠ¤ ì„¤ê³„</a></li>
  <li><a href="#9-ì‹œìŠ¤í…œ-êµ¬ì„±ê°œë…-ì•„í‚¤í…ì²˜">9. ì‹œìŠ¤í…œ êµ¬ì„±(ê°œë… ì•„í‚¤í…ì²˜)</a></li>
  <li><a href="#10-ì‹¤ë¬´ì—ì„œì˜-ì„ íƒì§€-ë¹„êµ">10. ì‹¤ë¬´ì—ì„œì˜ ì„ íƒì§€ ë¹„êµ</a></li>
  <li><a href="#11-í…ŒìŠ¤íŠ¸ìš´ì˜-ì‹œë‚˜ë¦¬ì˜¤">11. í…ŒìŠ¤íŠ¸/ìš´ì˜ ì‹œë‚˜ë¦¬ì˜¤</a></li>
  <li><a href="#12-ë‚´ê°€-ë°°ìš´-ì --ì„ íƒì˜-ê·¼ê±°">12. ë‚´ê°€ ë°°ìš´ ì  &amp; ì„ íƒì˜ ê·¼ê±°</a></li>
  <li><a href="#13-next-steps-ë¡œë“œë§µ">13. Next Steps (ë¡œë“œë§µ)</a></li>
  <li><a href="#ë¶€ë¡-a-ì½”ë“œ-ìŠ¤ë‹ˆí«ê°œë…">ë¶€ë¡ A. ì½”ë“œ ìŠ¤ë‹ˆí«(ê°œë…)</a></li>
</ul>

<blockquote>
  <p>â€œëŒ€ê¸°ì—´=ì‹¤ì‹œê°„ì„±, ê¸°ë¡/ë¶„ì„/ë³µêµ¬=ì˜ì†ì„±.â€
ì´ ë‘ ìš•ì‹¬ì„ ë™ì‹œì— ë§Œì¡±ì‹œí‚¤ë ¤ë‹¤ ë³´ë‹ˆ í•˜ì´ë¸Œë¦¬ë“œ(DB+Redis)ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë‹µì´ ë˜ì—ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="ë¬¸ì œ-ë°°ê²½">ë¬¸ì œ ë°°ê²½</h2>

<ul>
  <li>ì¹œêµ¬í•˜ì êµ¬í˜„ ì¤‘ í•µì‹¬ì¸ í†µí™” ë§¤ì¹­ ë¶€ë¶„ì„ êµ¬í˜„í•˜ëŠ” ì¤‘ì´ì˜€ë‹¤.</li>
  <li>ì´ˆë°˜ ì„¤ê³„ì—ì„œëŠ” Redisë§Œ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•˜ê¸°ë¡œ í•˜ì—¬ í•˜ê³ ìˆì—ˆëŠ”ë°, ì´ë ‡ê²Œ í•˜ë©´ ëŒ€ê¸°ì—´ ê¸°ë¡ì´ ë˜ì§€ì•Šì•„ ë‚˜ì¤‘ì— ì‹œìŠ¤í…œ ë¶„ì„ ë° ë³µêµ¬ì— ì–´ë ¤ì›€ì´ ìˆì–´ë³´ì˜€ë‹¤.</li>
  <li>ë”°ë¼ì„œ DBì™€ í•¨ê»˜ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì´ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë°©ì‹ì¸ì§€, ì–´ë–¤ ë¶€ë¶„ì— ì¥ë‹¨ì ì´ ìˆê³  ê³ ë ¤í•´ì•¼í•˜ëŠ” ë¶€ë¶„ì€ ì–´ë–¤ ê²ƒì¸ì§€ ê¶ê¸ˆí–ˆë‹¤.</li>
  <li>ë˜í•œ ê´€ë ¨ë˜ì„œ ë” ì‹¬í™”ëœ ê¸°ìˆ ì€ ì–´ë–¤ ê²ƒì´ ìˆëŠ”ì§€ ì•Œì•„ë³´ê³ ì‹¶ì—ˆë‹¤.</li>
</ul>

<hr />

<h2 id="tldr">TL;DR</h2>

<ul>
  <li><strong>ë¬¸ì œì˜ì‹</strong>: Redisë§Œ ì“°ë©´ ë¹ ë¥´ì§€ë§Œ íœ˜ë°œì„±Â·ìš´ì˜/ë¶„ì„/ë³µêµ¬ê°€ ì•½í•˜ë‹¤. DBë§Œ ì“°ë©´ ì˜ì†ì ì´ì§€ë§Œ ì§€ì—°Â·ê²½í•©ì— ì·¨ì•½í•˜ë‹¤.</li>
  <li><strong>ê²°ë¡ </strong>: <strong>DB(ì‚¬ì‹¤ì˜ ì›ì²œ, ì´ë ¥/ë¶„ì„/ë³µêµ¬) + Redis(ì‹¤ì‹œê°„ ëŒ€ê¸°ì—´/ë§¤ì¹­)</strong> ë¥¼ ë¶„ë¦¬í•œ í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°.</li>
  <li><strong>ì‹¤ë¬´ íŒ</strong>: ì•„ì›ƒë°•ìŠ¤ íŒ¨í„´ìœ¼ë¡œ <strong>ì´ì¤‘ ì“°ê¸° ì¼ê´€ì„±</strong>, Redis <strong>ZSET</strong>+<strong>Lua</strong>ë¡œ <strong>ì›ìì  ë§¤ì¹­</strong>, <strong>ë©±ë“±í‚¤/TTL/ì²­ì†Œì¡/AOF+ë³µì œ</strong>ë¡œ ìš´ì˜ ë‚´êµ¬ì„± í™•ë³´.</li>
  <li><strong>ëŒ€ì•ˆ</strong>: ê·œëª¨Â·ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ Redis Streams, RabbitMQ, Kafka, SQS, Postgres SKIP LOCKEDë„ ì„ íƒì§€.</li>
</ul>

<hr />

<h2 id="1-ë‚´ê°€-ì™œ-ì´ëŸ°-ê³ ë¯¼ì„-í•˜ê²Œ-ëë‚˜-ë§¥ë½">1) ë‚´ê°€ ì™œ ì´ëŸ° ê³ ë¯¼ì„ í•˜ê²Œ ëë‚˜ (ë§¥ë½)</h2>

<p>ì¹œêµ¬í•˜ìëŠ” <strong>1ë¶„ ë‚´ ë§¤ì¹­</strong> ê°™ì€ <strong>ì €ì§€ì—° ì‹¤ì‹œê°„ì„±</strong>ì´ í•µì‹¬ì´ë‹¤. ê·¸ë˜ì„œ ì²˜ìŒì—” <strong>Redis ë‹¨ë…</strong>ì´ ëŒë ¸ë‹¤.
í•˜ì§€ë§Œ ê³§ë°”ë¡œ ë‹¤ìŒ í˜„ì‹¤ì— ë¶€ë”ªí˜”ë‹¤.</p>

<ul>
  <li><strong>íœ˜ë°œì„± vs ì˜ì†ì„±</strong>: RedisëŠ” ë¹ ë¥´ì§€ë§Œ(ë©”ëª¨ë¦¬) ì¥ì• /ì¬ì‹œì‘ ì‹œ <strong>ë°ì´í„° ìœ ì‹¤</strong> ë¦¬ìŠ¤í¬.</li>
  <li><strong>ìš´ì˜/ë””ë²„ê¹…</strong>: ë§¤ì¹­ ì‹¤íŒ¨/íƒ€ì„ì•„ì›ƒ/ì·¨ì†Œ ì´ìŠˆë¥¼ <strong>ì¬í˜„</strong>í•˜ê³  <strong>ì›ì¸ ì¶”ì </strong>í•˜ë ¤ë©´ <strong>ì´ë ¥ í…Œì´ë¸”</strong>ì´ ê¼­ í•„ìš”.</li>
  <li><strong>í†µê³„/ì œí’ˆê°œì„ </strong>: ì¹´í…Œê³ ë¦¬ë³„ ëŒ€ê¸°ì‹œê°„Â·ë§¤ì¹­ë¥ Â·ì‹œê°„ëŒ€ ë¶€í•˜ ê°™ì€ <strong>ì§€í‘œ</strong>ëŠ” DBê°€ í¸í•˜ë‹¤.</li>
  <li><strong>ë³µêµ¬ ì‹œë‚˜ë¦¬ì˜¤</strong>: ì„œë²„/Redis ì¬ê¸°ë™ ì‹œ <strong>â€œëˆ„ê°€ ì¤„ì— ì„œ ìˆì—ˆë‚˜?â€</strong> ë¥¼ ë³µì›í•˜ë ¤ë©´ DBì— ê·¼ê±°ê°€ ìˆì–´ì•¼ í•œë‹¤.</li>
</ul>

<p>ê²°êµ­ â€œ<strong>ì‹¤ì‹œê°„ ì²˜ë¦¬=Redis</strong>â€, â€œ<strong>ì´ë ¥/ë¶„ì„/ë³µêµ¬=DB</strong>â€ë¡œ ì—­í• ì„ ë‚˜ëˆ„ëŠ” í•˜ì´ë¸Œë¦¬ë“œê°€ í•©ë¦¬ì ì´ë¼ëŠ” ê²°ë¡ ì— ë„ë‹¬í–ˆë‹¤.</p>

<hr />

<h2 id="2-í˜„ì¬-êµ¬í˜„ì˜-ë¬¸ì œ-ì •ë¦¬-redis-ë‹¨ë…ì¼-ë•Œ">2) í˜„ì¬ êµ¬í˜„ì˜ ë¬¸ì œ ì •ë¦¬ (Redis ë‹¨ë…ì¼ ë•Œ)</h2>

<ol>
  <li><strong>ë°ì´í„° ì˜ì†ì„±</strong>: ì„œë²„/Redis ì¬ì‹œì‘ ì‹œ ëŒ€ê¸°ì—´ ìœ ì‹¤ ê°€ëŠ¥</li>
  <li><strong>í†µê³„/ë¶„ì„ ì·¨ì•½</strong>: ë§¤ì¹­ íˆìŠ¤í† ë¦¬/íŒ¨í„´ ë¶„ì„ì´ ì–´ë ¤ì›€</li>
  <li><strong>ë””ë²„ê¹… ê³¤ë€</strong>: ì‹¤íŒ¨ ì¬í˜„Â·CS ëŒ€ì‘ ê·¼ê±° ë¶€ì¡±</li>
  <li><strong>ë³µêµ¬ ì–´ë ¤ì›€</strong>: ì¥ì•  ì‹œ ëŒ€ê¸°ì—´/ìƒíƒœ ì¬êµ¬ì„±ì´ í˜ë“¦</li>
</ol>

<hr />

<h2 id="3-í•˜ì´ë¸Œë¦¬ë“œ-ì„¤ê³„-ì›ì¹™">3) í•˜ì´ë¸Œë¦¬ë“œ ì„¤ê³„ ì›ì¹™</h2>

<h3 id="1-ë‹¨ì¼-ì¶œì²˜single-source-of-truth-sot-ëª…í™•í™”">(1) ë‹¨ì¼ ì¶œì²˜(Single Source of Truth, SOT) ëª…í™•í™”</h3>

<ul>
  <li><strong>ëŒ€ê¸°ì—´ì˜ SOT = Redis</strong> (ì‹¤ì‹œê°„ ê¸°ì¤€)</li>
  <li><strong>ì´ë ¥/ìƒíƒœì˜ SOT = DB</strong> (ì‚¬ì‹¤ ê¸°ì¤€)</li>
</ul>

<h3 id="2-ì¼ê´€ì„±-ê²½ê³„-ì •ì˜">(2) ì¼ê´€ì„± ê²½ê³„ ì •ì˜</h3>

<ul>
  <li>ë‘ ì €ì¥ì†Œì— <strong>ì–¸ì œ/ì–´ë–¤ ìˆœì„œë¡œ</strong> ì“¸ì§€ ê³ ì •.</li>
  <li>ê¶Œì¥: <strong>DB íŠ¸ëœì­ì…˜</strong>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">matching_queue(WAITING)</code> + <strong>ì•„ì›ƒë°•ìŠ¤ ì´ë²¤íŠ¸</strong>ë¥¼ í•¨ê»˜ ê¸°ë¡ â†’ ì›Œì»¤ê°€ <strong>Redisì— enqueue</strong> (ì¬ì‹œë„ ê°€ëŠ¥)</li>
</ul>

<h3 id="3-ë©±ë“±ì„±ì¤‘ë³µ-ë°©ì§€">(3) ë©±ë“±ì„±/ì¤‘ë³µ ë°©ì§€</h3>

<ul>
  <li>ì‚¬ìš©ì ì¤‘ë³µ ë“±ë¡ ë°©ì§€: <code class="language-plaintext highlighter-rouge">SET user:{id}:queued 1 NX EX 600</code></li>
  <li>ë§¤ì¹­ ê²°ê³¼ ë©±ë“± ì—…ë°ì´íŠ¸: <code class="language-plaintext highlighter-rouge">match_id</code> <strong>UNIQUE</strong> ì œì•½ ë“±</li>
</ul>

<hr />

<h2 id="4-ê°œì„ ëœ-ë°ì´í„°-íë¦„">4) ê°œì„ ëœ ë°ì´í„° íë¦„</h2>

<ol>
  <li>
    <p><strong>ì°¸ê°€(Enqueue)</strong>:</p>

    <ul>
      <li>DB íŠ¸ëœì­ì…˜: <code class="language-plaintext highlighter-rouge">matching_queue(WAITING)</code> + <code class="language-plaintext highlighter-rouge">outbox(enqueue_event)</code></li>
      <li>Outbox Consumerê°€ Redis <strong>ZSET</strong>ì— ë“±ë¡</li>
    </ul>
  </li>
  <li>
    <p><strong>ë§¤ì¹­(Match)</strong>:</p>

    <ul>
      <li>Redisì—ì„œ <strong>ì›ìì ìœ¼ë¡œ ë‘ ëª…ì„ Pop</strong> (Lua ìŠ¤í¬ë¦½íŠ¸)</li>
      <li>DBì— <code class="language-plaintext highlighter-rouge">MATCHING â†’ MATCHED</code> ìƒíƒœ ì „ì´(ë©±ë“±)</li>
    </ul>
  </li>
  <li>
    <p><strong>í†µê³„/ë¦¬í¬íŠ¸</strong>:</p>

    <ul>
      <li>DB ì´ë ¥ ê¸°ë°˜ ë¶„ì„/ëŒ€ì‹œë³´ë“œ</li>
    </ul>
  </li>
  <li>
    <p><strong>ì‹¤ì‹œê°„ ì¡°íšŒ</strong>:</p>
    <ul>
      <li>Redis ëŒ€ê¸°ì—´ ê¸¸ì´, í‰ê·  ëŒ€ê¸°ì‹œê°„(ìƒ˜í”Œë§) ì¦‰ì‹œ ì‘ë‹µ</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="5-redis-ìë£Œêµ¬ì¡°-ì„ íƒê³¼-ì´ìœ ">5) Redis ìë£Œêµ¬ì¡° ì„ íƒê³¼ ì´ìœ </h2>

<ul>
  <li>
    <p><strong>ZSET(ì •ë ¬ì§‘í•©)</strong> ê¶Œì¥</p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">score = ëŒ€ê¸° ì‹œì‘ ì‹œê° or ìš°ì„ ìˆœìœ„</code></li>
      <li><strong>ê³µì •ì„±(FCFS)/ìš°ì„ ìˆœìœ„</strong>/íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ ì‰½ë‹¤.</li>
      <li>êº¼ë‚¼ ë•Œ <strong>ì›ìì„±</strong>ì„ ìœ„í•´ Lua ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©.</li>
    </ul>
  </li>
  <li>
    <p><strong>ë§ë¶™ì„</strong></p>

    <ul>
      <li><strong>SET NX</strong>ë¡œ ì¤‘ë³µ ë“±ë¡ ë°©ì§€</li>
      <li><strong>HASH</strong>(<code class="language-plaintext highlighter-rouge">queue:{queueId}</code>)ë¡œ ì‚¬ìš©ìÂ·ì¹´í…Œê³ ë¦¬Â·TTL ë©”íƒ€ ì €ì¥</li>
      <li><strong>TTL + ì •ë¦¬ì¡</strong>ìœ¼ë¡œ ê³ ì•„ í•­ëª© ì²­ì†Œ</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>ë‹¨ìˆœ ë¦¬ìŠ¤íŠ¸(LLEN/LPOP)ëŠ” ì‰½ì§€ë§Œ ê³µì •ì„±Â·íƒ€ì„ì•„ì›ƒÂ·ì¤‘ë³µ ì œì–´ë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ í’€ê¸° ì–´ë µë‹¤.
<strong>Streams</strong>ëŠ” ì»¨ìŠˆë¨¸ ê·¸ë£¹/ACKë¡œ ë‚´êµ¬ì„±ì´ ì¢‹ì§€ë§Œ ë§¤ì¹­ â€œìŒì§“ê¸°â€ì—” ë³„ë„ ì„¤ê³„ê°€ í•„ìš”.</p>
</blockquote>

<hr />

<h2 id="6-ì›ìì -ë§¤ì¹­-lua-ìŠ¤í¬ë¦½íŠ¸-ì˜ˆì‹œê°œë…">6) ì›ìì  ë§¤ì¹­: Lua ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ(ê°œë…)</h2>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- KEYS[1]=zset key, ARGV[1]=score(ë³µì›ìš©)</span>
<span class="kd">local</span> <span class="n">k</span> <span class="o">=</span> <span class="n">KEYS</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="kd">local</span> <span class="n">a</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'ZRANGE'</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">if</span> <span class="o">#</span><span class="n">a</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">return</span> <span class="p">{}</span> <span class="k">end</span>
<span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'ZREM'</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="kd">local</span> <span class="n">b</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'ZRANGE'</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">if</span> <span class="o">#</span><span class="n">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">then</span>
  <span class="c1">-- ì§ì´ ì—†ìœ¼ë©´ ë˜ëŒë¦¬ê¸°</span>
  <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'ZADD'</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">ARGV</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
  <span class="k">return</span> <span class="p">{}</span>
<span class="k">end</span>
<span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">'ZREM'</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="c1">-- í•„ìš” ì‹œ ë½/ë§ˆí‚¹/TTL ë“± ì¶”ê°€</span>
<span class="k">return</span> <span class="p">{</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
</code></pre></div></div>

<blockquote>
  <p>ì‹¤ì „ì—ì„œëŠ” <strong>ë˜ëŒë¦¬ê¸°/ë½/íƒ€ì„ì•„ì›ƒ/ì¹´í…Œê³ ë¦¬ í•„í„°</strong>ê¹Œì§€ ë„£ì–´ì•¼ í•œë‹¤.</p>
</blockquote>

<hr />

<h2 id="7-ë³µêµ¬-ë©”ì»¤ë‹ˆì¦˜ì„œë²„-ì¬ê¸°ë™ì¥ì• -ëŒ€ë¹„">7) ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜(ì„œë²„ ì¬ê¸°ë™/ì¥ì•  ëŒ€ë¹„)</h2>

<ul>
  <li>RedisëŠ” <strong>AOF(append-only)</strong> + <strong>ì˜ì† ë³¼ë¥¨</strong> + <strong>ë³µì œ/ì„¼í‹°ë„¬</strong>ë¡œ ë‚´êµ¬ì„± ê°•í™”</li>
  <li>ê·¸ë˜ë„ ì•ˆì „ë§ìœ¼ë¡œ <strong>â€œìµœê·¼ WAITINGë§Œ DBâ†’Redis ì¬ì ì¬â€</strong> ìˆ˜í–‰</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì„œë²„ ê¸°ë™ ì‹œ ì•ˆì „ ë³µêµ¬(ê°œë…)</span>
<span class="nd">@PostConstruct</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">recoverQueuesFromDatabase</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">active</span> <span class="o">=</span> <span class="n">matchingQueueRepository</span><span class="o">.</span><span class="na">findByQueueStatusAndCreatedAtAfter</span><span class="o">(</span>
        <span class="nc">QueueStatus</span><span class="o">.</span><span class="na">WAITING</span><span class="o">,</span>
        <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">minusMinutes</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
    <span class="o">);</span>
    <span class="n">active</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">queue</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="c1">// Redis ì¬ì ì¬ ë¡œì§(ZSET + ë©”íƒ€ HSET ë“±)</span>
    <span class="o">});</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>ìš´ì˜ì—ì„  <strong>ApplicationRunner + ë¶„ì‚°ë½</strong>ìœ¼ë¡œ <strong>ì¤‘ë³µ ë³µêµ¬ ë°©ì§€</strong>ë¥¼ ê¶Œì¥.</p>
</blockquote>

<hr />

<h2 id="8-ìŠ¤í‚¤ë§ˆì¸ë±ìŠ¤-ì„¤ê³„">8) ìŠ¤í‚¤ë§ˆ/ì¸ë±ìŠ¤ ì„¤ê³„</h2>

<p><strong>matching_queue</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">id, user_id, category, status(WAITING/MATCHING/MATCHED/EXPIRED/CANCELLED), created_at, updated_at</code></li>
  <li>ì¸ë±ìŠ¤: <code class="language-plaintext highlighter-rouge">(status, created_at)</code>, <code class="language-plaintext highlighter-rouge">(user_id, status)</code></li>
</ul>

<p><strong>match_events</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">match_id(UNIQUE), user_a, user_b, started_at, ended_at, result, reason</code></li>
  <li>ë©±ë“±í‚¤: <code class="language-plaintext highlighter-rouge">match_id UNIQUE</code></li>
</ul>

<p><strong>outbox</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">event_id, type, payload, created_at, processed_at NULLABLE</code></li>
  <li>ì›Œì»¤ê°€ <code class="language-plaintext highlighter-rouge">processed_at IS NULL</code>ë§Œ ì½ê³  ì„±ê³µ ì‹œ ì±„ì›€(ì¬ì‹œë„ ê°€ëŠ¥)</li>
</ul>

<hr />

<h2 id="9-ì‹œìŠ¤í…œ-êµ¬ì„±ê°œë…-ì•„í‚¤í…ì²˜">9) ì‹œìŠ¤í…œ êµ¬ì„±(ê°œë… ì•„í‚¤í…ì²˜)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[API] â”€â”€(Tx)â”€â”€&gt; [DB] â”€â”€(Outbox)â”€â”€&gt; [Outbox Consumer] â”€â”€&gt; [Redis ZSET]
  â”‚                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(ì¡°íšŒ/ì´ë ¥)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Matching Worker] &lt;â”€â”€&gt; [Redis ZSET + Lua + TTL]
      â”‚                            â”‚
      â””â”€â”€â”€â”€(ë©±ë“± ì—…ë°ì´íŠ¸)â”€â”€â”€â”€â”€â”€&gt; [DB: ìƒíƒœ/ì´ë ¥]
</code></pre></div></div>

<p>ìš´ì˜ í•„ìˆ˜ ì²´í¬:</p>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Redis <strong>AOF + ë³µì œ/ì„¼í‹°ë„¬</strong></li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>ì•„ì›ƒë°•ìŠ¤/ì¬ì‹œë„</strong>ë¡œ DBâ†”Redis <strong>ì¼ê´€ì„± ë³´ì¥</strong></li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>SET NX/TTL/ì²­ì†Œì¡/ë¶„ì‚°ë½</strong></li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>ëŒ€ê¸°ì—´ ê¸¸ì´/í‰ê·  ëŒ€ê¸°ì‹œê°„/íƒ€ì„ì•„ì›ƒë¥ /ë§¤ì¹­ ì„±ê³µë¥ </strong> ë©”íŠ¸ë¦­</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>enqueue/match/cancel/timeout</strong> ì´ë²¤íŠ¸ ë¡œê¹…</li>
</ul>

<hr />

<h2 id="10-ì‹¤ë¬´ì—ì„œì˜-ì„ íƒì§€-ë¹„êµ">10) ì‹¤ë¬´ì—ì„œì˜ ì„ íƒì§€ ë¹„êµ</h2>

<table>
  <thead>
    <tr>
      <th>ì‹œë‚˜ë¦¬ì˜¤</th>
      <th>ê¶Œì¥ ìŠ¤íƒ</th>
      <th>í•µì‹¬ í¬ì¸íŠ¸</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ì €ì§€ì—° ì‹¤ì‹œê°„ ë§¤ì¹­ (MVP~ì¤‘ê·œëª¨)</strong></td>
      <td><strong>Redis (ZSET/Streams) + DB</strong></td>
      <td>ì†ë„Â·ë³µì¡ë„ ë°¸ëŸ°ìŠ¤ ì¢‹ìŒ</td>
    </tr>
    <tr>
      <td><strong>ë‚´êµ¬ì„± ë†’ì€ í/ì¬ì²˜ë¦¬/ë‹¤ì¤‘ì†Œë¹„ì</strong></td>
      <td><strong>Redis Streams</strong> or <strong>RabbitMQ</strong> + DB</td>
      <td>ACK/ë¦¬íŠ¸ë¼ì´/ê°€ì‹œì„± íƒ€ì„ì•„ì›ƒ ì‰¬ì›€</td>
    </tr>
    <tr>
      <td><strong>ëŒ€ê·œëª¨ ë¶„ì‚°/ë¦¬í”Œë ˆì´</strong></td>
      <td><strong>Kafka</strong> (+ Redis ìºì‹œ)</td>
      <td>íŒŒí‹°ì…”ë‹Â·ì¬ì²˜ë¦¬ ê°•ì , ë§¤ì¹­ ë¡œì§ì€ ì•±ì—ì„œ</td>
    </tr>
    <tr>
      <td><strong>ì•„ì£¼ ë‹¨ìˆœ/ì €QPS</strong></td>
      <td><strong>Postgres</strong> (<code class="language-plaintext highlighter-rouge">FOR UPDATE SKIP LOCKED</code>)</td>
      <td>ìš´ì˜ ë‹¨ìˆœ, ì§€ì—°Â·ê²½í•©ì€ ê°ìˆ˜</td>
    </tr>
    <tr>
      <td><strong>ê´€ë¦¬í˜• ê°„ë‹¨ í</strong></td>
      <td><strong>SQS</strong></td>
      <td>ì‰¬ì›€+ë‚´êµ¬ì„±, ì´ˆì €ì§€ì—° ë§¤ì¹­ì€ ë³´ì™„ í•„ìš”</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ì¹œêµ¬í•˜ìì˜ <strong>â€œ1ë¶„ ë‚´ ë§¤ì¹­Â·ê³µì •ì„±Â·ìš´ì˜ ìš©ì´ì„±â€</strong> ê¸°ì¤€ì—ì„  í˜„ì¬ <strong>Redis ZSET + DB</strong>ê°€ ê°€ì¥ ì í•©. ì¶”í›„ íŠ¸ë˜í”½ ê¸‰ì¦ ì‹œ <strong>Streams/Kafka</strong>ë¡œ í™•ì¥ ê°€ëŠ¥.</p>
</blockquote>

<hr />

<h2 id="11-í…ŒìŠ¤íŠ¸ìš´ì˜-ì‹œë‚˜ë¦¬ì˜¤">11) í…ŒìŠ¤íŠ¸/ìš´ì˜ ì‹œë‚˜ë¦¬ì˜¤</h2>

<ul>
  <li><strong>ë¶€í•˜ í…ŒìŠ¤íŠ¸</strong>: ì¹´í…Œê³ ë¦¬ë³„ ë™ì‹œ 1k~5k ë“±ë¡, í‰ê· /95p ëŒ€ê¸°ì‹œê°„, ë§¤ì¹­ ì„±ê³µë¥  ì¸¡ì •</li>
  <li><strong>ê²½í•© í…ŒìŠ¤íŠ¸</strong>: ë™ì‹œ ë§¤ì¹­ ì›Œì»¤ 2~10ê°œ, ì¤‘ë³µ ë§¤ì¹­/ìœ ì‹¤ ì—¬ë¶€</li>
  <li><strong>ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤</strong>: Redis ì¬ì‹œì‘, ë„¤íŠ¸ì›Œí¬ ë¶„ë¦¬, DB ì“°ê¸° ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë™ì‘</li>
  <li><strong>ë³µêµ¬ ë¦¬í—ˆì„¤</strong>: DBâ†’Redis ì¬ì ì¬ ë¡œì§ì˜ <strong>ë©±ë“±ì„±/ì¤‘ë³µ ë°©ì§€</strong> ê²€ì¦</li>
</ul>

<hr />

<h2 id="12-ë‚´ê°€-ë°°ìš´-ì --ì„ íƒì˜-ê·¼ê±°">12) ë‚´ê°€ ë°°ìš´ ì  &amp; ì„ íƒì˜ ê·¼ê±°</h2>

<ul>
  <li>ì‹¤ì‹œê°„ì„±ë§Œ ë³´ë©´ Redis ë‹¨ë…ì´ ë§¤ë ¥ì ì´ì§€ë§Œ, <strong>ìš´ì˜Â·ë¶„ì„Â·ë³µêµ¬</strong>ê¹Œì§€ ìƒê°í•˜ë©´ <strong>DB í•˜ì´ë¸Œë¦¬ë“œ</strong>ê°€ í•„ìˆ˜.</li>
  <li><strong>ë‹¨ì¼ ì¶œì²˜</strong>ë¥¼ ë‚˜ëˆ„ê³ (<strong>ëŒ€ê¸°ì—´=Redis, ì´ë ¥=DB</strong>), <strong>ì´ì¤‘ ì“°ê¸° ì¼ê´€ì„±</strong>(ì•„ì›ƒë°•ìŠ¤/ì¬ì‹œë„)ì„ í™•ë³´í•˜ë©´ MVP ì´í›„ì—ë„ <strong>í™•ì¥ ê°€ëŠ¥í•œ ê¸¸</strong>ì´ ì—´ë¦°ë‹¤.</li>
  <li>Redisì—ì„  <strong>ZSET + Lua</strong>ê°€ <strong>ê³µì •ì„±/íƒ€ì„ì•„ì›ƒ/ì›ìì„±</strong>ì„ í•œ ë²ˆì— ì¡ëŠ” ì‹¤ì „ í•´ë²•ì´ì—ˆë‹¤.</li>
</ul>

<hr />

<h2 id="13-next-steps-ë¡œë“œë§µ">13) Next Steps (ë¡œë“œë§µ)</h2>

<ol>
  <li><strong>ì•„ì›ƒë°•ìŠ¤ ì»¨ìŠˆë¨¸</strong> ë„ì… ë° ì¬ì‹œë„/ë°±ì˜¤í”„</li>
  <li><strong>Lua ìŠ¤í¬ë¦½íŠ¸</strong>ì— ë½/íƒ€ì„ì•„ì›ƒ/ë³µì› ë¡œì§ ë³´ê°•</li>
  <li><strong>AOF+ë³µì œ/ì„¼í‹°ë„¬</strong> ìš´ì˜í™”</li>
  <li><strong>ë©”íŠ¸ë¦­/ì•ŒëŒ</strong>: ëŒ€ê¸°ì—´ ê¸¸ì´Â·ëŒ€ê¸°ì‹œê°„Â·íƒ€ì„ì•„ì›ƒë¥ Â·ì—ëŸ¬ìœ¨</li>
  <li>íŠ¸ë˜í”½ ì¦ê°€ ì‹œ <strong>Streams</strong> ë„ì… ê²€í† (ì»¨ìŠˆë¨¸ ê·¸ë£¹ ê¸°ë°˜), ë” ì»¤ì§€ë©´ <strong>Kafka</strong> ë³‘í–‰</li>
</ol>

<hr />

<h3 id="ë¶€ë¡-a-ì½”ë“œ-ìŠ¤ë‹ˆí«ê°œë…">ë¶€ë¡ A. ì½”ë“œ ìŠ¤ë‹ˆí«(ê°œë…)</h3>

<p><strong>DB â†’ Outbox íŠ¸ëœì­ì…˜</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">enqueue</span><span class="o">(</span><span class="nc">Long</span> <span class="n">userId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">MatchingQueue</span> <span class="n">q</span> <span class="o">=</span> <span class="n">matchingQueueRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span>
        <span class="nc">MatchingQueue</span><span class="o">.</span><span class="na">waiting</span><span class="o">(</span><span class="n">userId</span><span class="o">,</span> <span class="n">category</span><span class="o">)</span>
    <span class="o">);</span>
    <span class="n">outboxRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="nc">OutboxEvent</span><span class="o">.</span><span class="na">enqueue</span><span class="o">(</span><span class="n">q</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">category</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Outbox Consumer â†’ Redis</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="nc">OutboxEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"mq:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getCategory</span><span class="o">();</span>
    <span class="c1">// ì¤‘ë³µ ë°©ì§€</span>
    <span class="nc">Boolean</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="na">setIfAbsent</span><span class="o">(</span><span class="s">"user:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">+</span> <span class="s">":queued"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="nc">Duration</span><span class="o">.</span><span class="na">ofMinutes</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>
    <span class="k">if</span> <span class="o">(</span><span class="nc">Boolean</span><span class="o">.</span><span class="na">TRUE</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">ok</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">redis</span><span class="o">.</span><span class="na">zAdd</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getEnqueuedAt</span><span class="o">().</span><span class="na">toEpochSecond</span><span class="o">(</span><span class="nc">ZoneOffset</span><span class="o">.</span><span class="na">UTC</span><span class="o">),</span> <span class="n">e</span><span class="o">.</span><span class="na">getQueueId</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="n">outboxRepository</span><span class="o">.</span><span class="na">markProcessed</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h2>

<p>ì´ë²ˆ ì„¤ê³„ëŠ” â€œ<strong>í˜„ì¬ ìš”êµ¬(ì €ì§€ì—°)</strong>â€ì™€ â€œ<strong>ë¯¸ë˜ ìš”êµ¬(ìš´ì˜/ë¶„ì„/ë³µêµ¬/í™•ì¥)</strong>â€ë¥¼ ë™ì‹œì— ì¶©ì¡±ì‹œí‚¤ê¸° ìœ„í•œ <strong>ê· í˜•ì </strong>ì„ ì°¾ëŠ” ê³¼ì •ì´ì—ˆë‹¤.
<strong>DB+Redis í•˜ì´ë¸Œë¦¬ë“œ</strong>ëŠ” ê·¸ ê· í˜•ì  ìœ„ì—ì„œ <strong>ì‹¤ë¬´ì ìœ¼ë¡œ ê²€ì¦ëœ ê¸¸</strong>ì´ë©°, MVPì—ì„œ ì‹œì‘í•´ <strong>Streams/Kafka</strong>ë¡œ í™•ì¥ ê°€ëŠ¥í•œ <strong>ì§„í™” ê²½ë¡œ</strong>ë¥¼ ê°–ëŠ”ë‹¤.
ì¹œêµ¬í•˜ìì˜ ì„±ê²©(ì‹¤ì‹œê°„ ë§¤ì¹­ + ì¥ê¸° ìš´ì˜/ë¶„ì„ í•„ìš”)ì— <strong>ì •í•©í•œ ì„ íƒ</strong>ì´ë¼ê³  ìƒê°í•œë‹¤.</p>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì¹œêµ¬í•˜ì í”„ë¡œì íŠ¸ ê°œë°œ ì¤‘ ë§¤ì¹­ ëŒ€ê¸°ì—´ì„ êµ¬í˜„í•˜ë‹¤ê°€ ìƒê¸´ ê³ ë¯¼ì„ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry></feed>