<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="ko-KR, en-US"><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="https://nan0silver.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://nan0silver.github.io/" rel="alternate" type="text/html" hreflang="ko-KR, en-US" /><updated>2026-01-20T07:37:12+00:00</updated><id>https://nan0silver.github.io/feed.xml</id><title type="html">NAHYUN BLOG</title><subtitle>Nahyunâ€™s Development Blog
Hi, Iâ€™m Nahyun Eun, a student from South Korea studying backend development with Java.  In this blog, I organize and share my learning journey in programming, with notes and insights on backend concepts and practical examples.
 Follow along as I dive into the world of coding!
</subtitle><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><entry><title type="html">[ì¹œêµ¬í•˜ì] WebSocket ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ì¸ì¦ ë¬¸ì œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (@AuthenticationPrincipalì™€ SimpMessageHeaderAccessor)</title><link href="https://nan0silver.github.io/projectdiary/2026-01-19-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] WebSocket ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ì¸ì¦ ë¬¸ì œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (@AuthenticationPrincipalì™€ SimpMessageHeaderAccessor)" /><published>2026-01-19T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2026-01-19-diary/"><![CDATA[<ul>
  <li><a href="#-ë¬¸ì œ-ë°œê²¬-ë°°ê²½">ë¬¸ì œ ë°œê²¬ ë°°ê²½</a></li>
  <li>
    <p><a href="#-ê·¼ë³¸-ì›ì¸-ë¶„ì„">ê·¼ë³¸ ì›ì¸ ë¶„ì„</a></p>

    <ul>
      <li><a href="#1-websocket-ì¸ì¦-íë¦„">1. WebSocket ì¸ì¦ íë¦„</a></li>
      <li><a href="#2-authenticationprincipalì˜-ë™ì‘-ë°©ì‹">2. <code class="language-plaintext highlighter-rouge">@AuthenticationPrincipal</code>ì˜ ë™ì‘ ë°©ì‹</a></li>
      <li><a href="#3-ë¬¸ì œì˜-í•µì‹¬-ì§ë ¬í™”ì—­ì§ë ¬í™”">3. ë¬¸ì œì˜ í•µì‹¬: ì§ë ¬í™”/ì—­ì§ë ¬í™”</a></li>
      <li><a href="#4-í”„ë¡œì íŠ¸-êµ¬í˜„-íŠ¹ì„±">4. í”„ë¡œì íŠ¸ êµ¬í˜„ íŠ¹ì„±</a></li>
    </ul>
  </li>
  <li><a href="#-í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</a></li>
  <li><a href="#-authenticationprincipal-vs-simpmessageheaderaccessor">@AuthenticationPrincipal vs SimpMessageHeaderAccessor</a></li>
  <li><a href="#-í•µì‹¬-ì°¨ì´ì ">í•µì‹¬ ì°¨ì´ì </a></li>
  <li><a href="#-í…ŒìŠ¤íŠ¸-ê²°ê³¼">í…ŒìŠ¤íŠ¸ ê²°ê³¼</a></li>
  <li><a href="#-ì¶”ê°€-ê°œì„ -ì‚¬í•­-ì„ íƒ">ì¶”ê°€ ê°œì„  ì‚¬í•­(ì„ íƒ)</a></li>
  <li><a href="#-ì°¸ê³ -ìë£Œ">ì°¸ê³ ìë£Œ</a></li>
  <li><a href="#-ê²°ë¡ ">ê²°ë¡ </a></li>
</ul>

<hr />

<h2 id="-ë¬¸ì œ-ë°œê²¬-ë°°ê²½">ğŸ“– ë¬¸ì œ ë°œê²¬ ë°°ê²½</h2>

<p>ì‹¤ì‹œê°„ ìŒì„± ë§¤ì¹­ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë˜ ì¤‘, í†µí™” ì¤‘ ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í–ˆì„ ë•Œ í†µí™”ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ëŠ” ë¬¸ì œë¥¼ ë°œê²¬í–ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Grace Period(ìœ ì˜ˆ ì‹œê°„) ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì—¬, ìƒˆë¡œê³ ì¹¨ í›„ 30ì´ˆ ì´ë‚´ì— ì¬ì ‘ì†í•˜ë©´ ê¸°ì¡´ í†µí™”ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤.</p>

<p>Grace Period ê¸°ëŠ¥ êµ¬í˜„ì„ ì™„ë£Œí•˜ê³  ì„œë²„ë¥¼ ì¬ì‹œì‘í•œ ë’¤, í†µí™” ì¢…ë£Œ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìˆœê°„ ì˜ˆìƒì¹˜ ëª»í•œ <code class="language-plaintext highlighter-rouge">NullPointerException</code>ì´ ë°œìƒí–ˆë‹¤. ğŸ¥²</p>

<p><strong>ë‹¹í™©ìŠ¤ëŸ¬ì› ë˜ ì ì€:</strong></p>

<ol>
  <li>ì„œë²„ ì¬ì‹œì‘ ì „ê¹Œì§€ëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë™í–ˆë˜ ê¸°ëŠ¥ì´ì—ˆë˜ ì </li>
  <li>WebSocket CONNECT ì‹œì ì—ëŠ” ì¸ì¦ì´ ì™„ë²½í•˜ê²Œ ì„±ê³µí–ˆëŠ”ë°, MESSAGE ì „ì†¡ ì‹œì ì—ë§Œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë˜ ì </li>
  <li>ë¡œê·¸ë¥¼ ë³´ë‹ˆ <code class="language-plaintext highlighter-rouge">CustomUserDetails</code> ê°ì²´ëŠ” ì¡´ì¬í•˜ëŠ”ë° ë‚´ë¶€ì˜ <code class="language-plaintext highlighter-rouge">user</code> í•„ë“œë§Œ nullì´ì—ˆë˜ ì ..</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WebSocket ì—°ê²° ì¸ì¦ ì„±ê³µ - userId: xxx  âœ…
CustomUserDetails.user is null?: false  âœ…
User ID: xxx  âœ…

... (í†µí™” ì¢…ë£Œ ë²„íŠ¼ í´ë¦­)

User in UserDetails is null  âŒ
NullPointerException: Cannot invoke "User.getId()" because "this.user" is null
</code></pre></div></div>

<p>ì½”ë“œë¥¼ ë³€ê²½í•œ ê²ƒë„ ì•„ë‹Œë° ê°‘ìê¸° ì‘ë™í•˜ì§€ ì•ŠëŠ” ì´ ìƒí™©ì´ ë§¤ìš° í˜¼ë€ìŠ¤ëŸ¬ì› ë‹¤.
ì´ ê¸€ì€ ì´ ë¬¸ì œì˜ ì›ì¸ê³¼ í•´ê²° ê³¼ì •ì„ ì •ë¦¬í•œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë¬¸ì„œì´ë‹¤.</p>

<hr />

<h2 id="-ë¬¸ì œ-ìƒí™©">ğŸ“‹ ë¬¸ì œ ìƒí™©</h2>

<h3 id="ì¦ìƒ">ì¦ìƒ</h3>

<ul>
  <li>WebSocket CONNECT ì‹œì : ì¸ì¦ ì„±ê³µ âœ…</li>
  <li>WebSocket MESSAGE ì „ì†¡ ì‹œì : <code class="language-plaintext highlighter-rouge">NullPointerException</code> ë°œìƒ âŒ
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java.lang.NullPointerException: Cannot invoke "com.ldsilver.chingoohaja.domain.user.User.getId()"
because "this.user" is null
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="ì—ëŸ¬-ë°œìƒ-ì½”ë“œ">ì—ëŸ¬ ë°œìƒ ì½”ë“œ</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@MessageMapping</span><span class="o">(</span><span class="s">"/endpoint/{targetId}"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMessage</span><span class="o">(</span>
    <span class="nd">@DestinationVariable</span> <span class="nc">Long</span> <span class="n">targetId</span><span class="o">,</span>
    <span class="nd">@Payload</span> <span class="nc">SomeMessage</span> <span class="n">message</span><span class="o">,</span>
    <span class="nd">@AuthenticationPrincipal</span> <span class="nc">CustomUserDetails</span> <span class="n">userDetails</span>  <span class="c1">// âŒ ë¬¸ì œ ë°œìƒ</span>
<span class="o">)</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">userDetails</span><span class="o">.</span><span class="na">getUserId</span><span class="o">();</span>  <span class="c1">// NullPointerException ë°œìƒ!</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="ë¡œê·¸-ë¶„ì„">ë¡œê·¸ ë¶„ì„</h3>

<p><strong>CONNECT ì‹œì  (ì„±ê³µ):</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WebSocket ì—°ê²° ì¸ì¦ ì„±ê³µ - userId: xxx
Principal is CustomUserDetails?: true
CustomUserDetails.user is null?: false  âœ…
User ID: xxx
</code></pre></div></div>

<p><strong>MESSAGE ì „ì†¡ ì‹œì  (ì‹¤íŒ¨):</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Invoking WebSocketController#handleMessage
User in UserDetails is null  âŒ
NullPointerException: Cannot invoke "User.getId()" because "this.user" is null
</code></pre></div></div>

<hr />

<h2 id="-ê·¼ë³¸-ì›ì¸-ë¶„ì„">ğŸ” ê·¼ë³¸ ì›ì¸ ë¶„ì„</h2>

<h3 id="1-websocket-ì¸ì¦-íë¦„">1. WebSocket ì¸ì¦ íë¦„</h3>

<h4 id="connect-ë‹¨ê³„">CONNECT ë‹¨ê³„</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>í´ë¼ì´ì–¸íŠ¸ CONNECT ìš”ì²­
    â†“
JwtChannelInterceptor.preSend() ì‹¤í–‰
    â†“
í† í° ê²€ì¦ ë° User ì¡°íšŒ
    â†“
CustomUserDetails ìƒì„± (user í•„ë“œ í¬í•¨)
    â†“
UsernamePasswordAuthenticationToken ìƒì„±
    â†“
WebSocket ì„¸ì…˜ì— Authentication ì €ì¥
</code></pre></div></div>

<p>ì´ ì‹œì ì—ëŠ” <code class="language-plaintext highlighter-rouge">CustomUserDetails.user</code>ê°€ <strong>ì •ìƒì ìœ¼ë¡œ ì¡´ì¬</strong></p>

<h4 id="message-ì „ì†¡-ë‹¨ê³„">MESSAGE ì „ì†¡ ë‹¨ê³„</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>í´ë¼ì´ì–¸íŠ¸ MESSAGE ì „ì†¡
    â†“
Springì´ ì„¸ì…˜ì—ì„œ Authentication ì¡°íšŒ
    â†“
@AuthenticationPrincipalë¡œ Principal ì£¼ì…
    â†“
??? CustomUserDetails.userê°€ null ???
</code></pre></div></div>

<h3 id="2-authenticationprincipalì˜-ë™ì‘-ë°©ì‹">2. <code class="language-plaintext highlighter-rouge">@AuthenticationPrincipal</code>ì˜ ë™ì‘ ë°©ì‹</h3>

<p><code class="language-plaintext highlighter-rouge">@AuthenticationPrincipal</code>ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Spring Security ë‚´ë¶€ ë™ì‘ (ì˜ì‚¬ ì½”ë“œ)</span>
<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="nc">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> <span class="o">...)</span> <span class="o">{</span>
    <span class="nc">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">getAuthentication</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">authentication</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">Object</span> <span class="n">principal</span> <span class="o">=</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">();</span>

    <span class="c1">// ğŸ”¥ ë¬¸ì œ: principalì´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë˜ì—ˆì„ ìˆ˜ ìˆìŒ</span>
    <span class="c1">// ğŸ”¥ WebSocket ì„¸ì…˜ ì €ì¥ì†Œ(Redis, ë©”ëª¨ë¦¬)ì—ì„œ ë³µì›ë  ë•Œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥</span>

    <span class="k">return</span> <span class="n">principal</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="3-ë¬¸ì œì˜-í•µì‹¬-ì§ë ¬í™”ì—­ì§ë ¬í™”">3. ë¬¸ì œì˜ í•µì‹¬: ì§ë ¬í™”/ì—­ì§ë ¬í™”</h3>

<p>WebSocket ì„¸ì…˜ì€ ë©”ëª¨ë¦¬ë‚˜ Redisì— ì €ì¥ë  ìˆ˜ ìˆìœ¼ë©°, ì´ ê³¼ì •ì—ì„œ:</p>

<ol>
  <li><strong>CONNECT ì‹œì </strong>: <code class="language-plaintext highlighter-rouge">CustomUserDetails</code> ê°ì²´ê°€ ìƒì„±ë˜ê³  ì„¸ì…˜ì— ì €ì¥
    <ul>
      <li><code class="language-plaintext highlighter-rouge">User user</code> í•„ë“œê°€ JPA ì—”í‹°í‹°ë¡œ ì™„ì „íˆ ë¡œë“œë¨</li>
    </ul>
  </li>
  <li><strong>MESSAGE ì „ì†¡ ì‹œì </strong>: ì„¸ì…˜ì—ì„œ <code class="language-plaintext highlighter-rouge">Authentication</code> ê°ì²´ ë³µì›
    <ul>
      <li>ì§ë ¬í™”/ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œ <code class="language-plaintext highlighter-rouge">User</code> ê°ì²´ê°€ ì œëŒ€ë¡œ ë³µì›ë˜ì§€ ì•ŠìŒ</li>
      <li>ë˜ëŠ” ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ê°€ ì–•ì€ ë³µì‚¬ë§Œ ìˆ˜í–‰</li>
      <li><strong>ê²°ê³¼</strong>: <code class="language-plaintext highlighter-rouge">CustomUserDetails.user == null</code></li>
    </ul>
  </li>
</ol>

<h3 id="4-í”„ë¡œì íŠ¸-êµ¬í˜„-íŠ¹ì„±">4. í”„ë¡œì íŠ¸ êµ¬í˜„ íŠ¹ì„±</h3>

<h4 id="customuserdetails-êµ¬ì¡°">CustomUserDetails êµ¬ì¡°</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomUserDetails</span> <span class="kd">implements</span> <span class="nc">UserDetails</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">User</span> <span class="n">user</span><span class="o">;</span>  <span class="c1">// JPA Entity</span>

    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>  <span class="c1">// userê°€ nullì´ë©´ NPE ë°œìƒ!</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>  <span class="c1">// userIdë¥¼ Stringìœ¼ë¡œ ì €ì¥</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="user-ì—”í‹°í‹°">User ì—”í‹°í‹°</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="c1">// ... ë‹¤ì–‘í•œ í•„ë“œë“¤</span>
    <span class="c1">// Serializable êµ¬í˜„ë˜ì§€ ì•ŠìŒ (ë¬¸ì œ ìš”ì¸ ì¤‘ í•˜ë‚˜)</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="jwtchannelinterceptor">JwtChannelInterceptor</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">Authentication</span> <span class="nf">authenticateToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">jwtTokenProvider</span><span class="o">.</span><span class="na">getUserIdFromToken</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">userId</span><span class="o">).</span><span class="na">orElseThrow</span><span class="o">(...);</span>

    <span class="nc">CustomUserDetails</span> <span class="n">userDetails</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CustomUserDetails</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>

    <span class="c1">// UsernamePasswordAuthenticationToken ìƒì„±</span>
    <span class="c1">// ì´ ê°ì²´ê°€ WebSocket ì„¸ì…˜ì— ì €ì¥ë¨</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">UsernamePasswordAuthenticationToken</span><span class="o">(</span>
        <span class="n">userDetails</span><span class="o">,</span>  <span class="c1">// principal</span>
        <span class="kc">null</span><span class="o">,</span>
        <span class="n">userDetails</span><span class="o">.</span><span class="na">getAuthorities</span><span class="o">()</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="-í•´ê²°-ë°©ë²•">âœ… í•´ê²° ë°©ë²•</h2>

<h3 id="simpmessageheaderaccessor-ì‚¬ìš©">SimpMessageHeaderAccessor ì‚¬ìš©</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@MessageMapping</span><span class="o">(</span><span class="s">"/endpoint/{targetId}"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMessage</span><span class="o">(</span>
    <span class="nd">@DestinationVariable</span> <span class="nc">Long</span> <span class="n">targetId</span><span class="o">,</span>
    <span class="nd">@Payload</span> <span class="nc">SomeMessage</span> <span class="n">message</span><span class="o">,</span>
    <span class="nc">SimpMessageHeaderAccessor</span> <span class="n">headerAccessor</span>  <span class="c1">// âœ… ë³€ê²½</span>
<span class="o">)</span> <span class="o">{</span>
    <span class="nc">Long</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">extractUserIdFromPrincipal</span><span class="o">(</span><span class="n">headerAccessor</span><span class="o">);</span>
    <span class="c1">// ...</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="nc">Long</span> <span class="nf">extractUserIdFromPrincipal</span><span class="o">(</span><span class="nc">SimpMessageHeaderAccessor</span> <span class="n">headerAccessor</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Principal</span> <span class="n">principal</span> <span class="o">=</span> <span class="n">headerAccessor</span><span class="o">.</span><span class="na">getUser</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">principal</span> <span class="k">instanceof</span> <span class="nc">Authentication</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Authentication</span> <span class="n">auth</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Authentication</span><span class="o">)</span> <span class="n">principal</span><span class="o">;</span>
        <span class="nc">Object</span> <span class="n">principalObj</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">principalObj</span> <span class="k">instanceof</span> <span class="nc">CustomUserDetails</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">CustomUserDetails</span> <span class="n">userDetails</span> <span class="o">=</span> <span class="o">(</span><span class="nc">CustomUserDetails</span><span class="o">)</span> <span class="n">principalObj</span><span class="o">;</span>

            <span class="c1">// userê°€ nullì´ì–´ë„ username(=userId)ì—ì„œ ì¶”ì¶œ ê°€ëŠ¥</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">userDetails</span><span class="o">.</span><span class="na">getUser</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="nc">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="n">userDetails</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">userDetails</span><span class="o">.</span><span class="na">getUserId</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="-authenticationprincipal-vs-simpmessageheaderaccessor">ğŸ”¬ @AuthenticationPrincipal vs SimpMessageHeaderAccessor</h2>

<h3 id="authenticationprincipal-ë°©ì‹">@AuthenticationPrincipal ë°©ì‹</h3>

<h4 id="ì¥ì ">ì¥ì </h4>

<ul>
  <li>âœ… ì½”ë“œê°€ ê°„ê²°í•¨</li>
  <li>âœ… Spring Securityì˜ í‘œì¤€ ë°©ì‹</li>
  <li>âœ… HTTP ìš”ì²­ì—ì„œ ì˜ ì‘ë™</li>
</ul>

<h4 id="ë‹¨ì ">ë‹¨ì </h4>

<ul>
  <li>âŒ WebSocket ì„¸ì…˜ ê´€ë¦¬ì—ì„œ ë¶ˆì•ˆì •</li>
  <li>âŒ ì§ë ¬í™”/ì—­ì§ë ¬í™” ì´ìŠˆì— ì·¨ì•½</li>
  <li>âŒ Principal ê°ì²´ì˜ ë‚´ë¶€ í•„ë“œê°€ nullì¼ ìˆ˜ ìˆìŒ</li>
  <li>âŒ ë””ë²„ê¹…ì´ ì–´ë ¤ì›€ (Springì´ ìë™ìœ¼ë¡œ ì£¼ì…)</li>
</ul>

<h4 id="ë™ì‘-ë°©ì‹">ë™ì‘ ë°©ì‹</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Springì´ ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰</span>
<span class="nc">Authentication</span> <span class="n">auth</span> <span class="o">=</span> <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">getAuthentication</span><span class="o">();</span>
<span class="nc">CustomUserDetails</span> <span class="n">principal</span> <span class="o">=</span> <span class="o">(</span><span class="nc">CustomUserDetails</span><span class="o">)</span> <span class="n">auth</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">();</span>

<span class="c1">// ğŸ”¥ ì´ principalì´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ê±°ì³¤ì„ ìˆ˜ ìˆìŒ</span>
<span class="c1">// ğŸ”¥ user í•„ë“œê°€ nullì¼ ê°€ëŠ¥ì„±</span>
</code></pre></div></div>

<h3 id="simpmessageheaderaccessor-ë°©ì‹">SimpMessageHeaderAccessor ë°©ì‹</h3>

<h4 id="ì¥ì -1">ì¥ì </h4>

<ul>
  <li>âœ… WebSocket ë©”ì‹œì§€ì˜ ì‹¤ì œ Principalì— ì§ì ‘ ì ‘ê·¼</li>
  <li>âœ… ì§ë ¬í™” ì´ìŠˆ íšŒí”¼ (Principal ê°ì²´ë¥¼ ì§ì ‘ ë‹¤ë£¸)</li>
  <li>âœ… null ì²´í¬ ë° fallback ë¡œì§ êµ¬í˜„ ê°€ëŠ¥</li>
  <li>âœ… ë””ë²„ê¹… ìš©ì´ (ëª…ì‹œì ì¸ ì½”ë“œ)</li>
</ul>

<h4 id="ë‹¨ì -1">ë‹¨ì </h4>

<ul>
  <li>âŒ ì½”ë“œê°€ ë‹¤ì†Œ ê¸¸ì–´ì§</li>
  <li>âŒ í—¬í¼ ë©”ì„œë“œ í•„ìš”</li>
</ul>

<h4 id="ë™ì‘-ë°©ì‹-1">ë™ì‘ ë°©ì‹</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì§ì ‘ ë©”ì‹œì§€ í—¤ë”ì—ì„œ Principal ì¶”ì¶œ</span>
<span class="nc">Principal</span> <span class="n">principal</span> <span class="o">=</span> <span class="n">headerAccessor</span><span class="o">.</span><span class="na">getUser</span><span class="o">();</span>

<span class="c1">// ì´ principalì€ JwtChannelInterceptorì—ì„œ</span>
<span class="c1">// accessor.setUser(authentication)ìœ¼ë¡œ ì„¤ì •í•œ ë°”ë¡œ ê·¸ ê°ì²´</span>
<span class="c1">// ì¤‘ê°„ì— ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ (ê°™ì€ ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ ë‚´)</span>
</code></pre></div></div>

<hr />

<h2 id="-í•µì‹¬-ì°¨ì´ì ">ğŸ¯ í•µì‹¬ ì°¨ì´ì </h2>

<h3 id="ì¸ì¦-ì •ë³´-ì¡°íšŒ-ê²½ë¡œ">ì¸ì¦ ì •ë³´ ì¡°íšŒ ê²½ë¡œ</h3>

<p><strong>@AuthenticationPrincipal:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WebSocket ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ (ë©”ëª¨ë¦¬/Redis)
    â†“
ì§ë ¬í™”ëœ Authentication ê°ì²´
    â†“
ì—­ì§ë ¬í™” (ë¬¸ì œ ë°œìƒ ê°€ëŠ¥)
    â†“
SecurityContext
    â†“
@AuthenticationPrincipal ì£¼ì…
</code></pre></div></div>

<p><strong>SimpMessageHeaderAccessor:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>í˜„ì¬ ë©”ì‹œì§€ì˜ StompHeaderAccessor
    â†“
ì§ì ‘ Principal ì¡°íšŒ
    â†“
ëª…ì‹œì  íƒ€ì… ì²´í¬ ë° ë³€í™˜
    â†“
ì•ˆì „í•œ userId ì¶”ì¶œ
</code></pre></div></div>

<h3 id="ì„¸ì…˜-ê´€ë¦¬-ê´€ì ">ì„¸ì…˜ ê´€ë¦¬ ê´€ì </h3>

<table>
  <thead>
    <tr>
      <th>ì¸¡ë©´</th>
      <th>@AuthenticationPrincipal</th>
      <th>SimpMessageHeaderAccessor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ì§ë ¬í™” ì˜ì¡´ì„±</td>
      <td>ë†’ìŒ</td>
      <td>ë‚®ìŒ</td>
    </tr>
    <tr>
      <td>ì„¸ì…˜ ì €ì¥ì†Œ ì˜í–¥</td>
      <td>ì˜í–¥ ë°›ìŒ</td>
      <td>ì˜í–¥ ì ìŒ</td>
    </tr>
    <tr>
      <td>JPA ì—”í‹°í‹° ë¬¸ì œ</td>
      <td>ë°œìƒ ê°€ëŠ¥</td>
      <td>íšŒí”¼ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td>Lazy Loading</td>
      <td>ë¬¸ì œ ê°€ëŠ¥</td>
      <td>ë¬¸ì œ ì—†ìŒ</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-í…ŒìŠ¤íŠ¸-ê²°ê³¼">ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>

<h3 id="before-ë¬¸ì œ-ë°œìƒ">Before (ë¬¸ì œ ë°œìƒ)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WebSocket CONNECT: âœ… ì„±ê³µ
WebSocket MESSAGE: âŒ NullPointerException
</code></pre></div></div>

<h3 id="after-í•´ê²°">After (í•´ê²°)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WebSocket CONNECT: âœ… ì„±ê³µ
WebSocket MESSAGE: âœ… ì„±ê³µ
userId ì¶”ì¶œ: âœ… ì„±ê³µ
ë©”ì‹œì§€ ì²˜ë¦¬: âœ… ì„±ê³µ
</code></pre></div></div>

<hr />

<h2 id="-ì¶”ê°€-ê°œì„ -ì‚¬í•­-ì„ íƒ">ğŸ’¡ ì¶”ê°€ ê°œì„  ì‚¬í•­ (ì„ íƒ)</h2>

<h3 id="1-user-ì—”í‹°í‹°ë¥¼-serializableë¡œ-ë§Œë“¤ê¸°">1. User ì—”í‹°í‹°ë¥¼ Serializableë¡œ ë§Œë“¤ê¸°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="2-customuserdetailsë¥¼-serializableë¡œ-ë§Œë“¤ê¸°">2. CustomUserDetailsë¥¼ Serializableë¡œ ë§Œë“¤ê¸°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomUserDetails</span> <span class="kd">implements</span> <span class="nc">UserDetails</span><span class="o">,</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">User</span> <span class="n">user</span><span class="o">;</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="3-websocket-ì„¸ì…˜-ê´€ë¦¬-ê°œì„ ">3. WebSocket ì„¸ì…˜ ê´€ë¦¬ ê°œì„ </h3>

<ul>
  <li>Redisë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì§ë ¬í™” ì„¤ì • ìµœì í™”</li>
  <li>ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ì„¤ì • ê²€í† </li>
  <li>ì¬ì—°ê²° ì‹œ ì¸ì¦ ê°±ì‹  ë¡œì§ êµ¬í˜„</li>
</ul>

<hr />

<h2 id="-ì°¸ê³ -ìë£Œ">ğŸ“š ì°¸ê³  ìë£Œ</h2>

<ul>
  <li>Spring WebSocket Documentation: https://docs.spring.io/spring-framework/reference/web/websocket.html</li>
  <li>Spring Security WebSocket Support: https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html</li>
  <li>STOMP Protocol Specification: https://stomp.github.io/</li>
</ul>

<hr />

<h2 id="-ê²°ë¡ ">ğŸ ê²°ë¡ </h2>

<p>WebSocket í™˜ê²½ì—ì„œëŠ” HTTP ìš”ì²­ê³¼ ë‹¬ë¦¬ <strong>ì„¸ì…˜ ê´€ë¦¬ ë° ì§ë ¬í™” ì´ìŠˆ</strong>ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>

<p>íŠ¹íˆ <code class="language-plaintext highlighter-rouge">@AuthenticationPrincipal</code>ì€ í¸ë¦¬í•˜ì§€ë§Œ WebSocket ì„¸ì…˜ ì €ì¥ì†Œë¥¼ ê±°ì¹˜ë©´ì„œ <strong>Principal ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœê°€ ì†ì‹¤ë  ìœ„í—˜</strong>ì´ ìˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">SimpMessageHeaderAccessor</code>ë¥¼ ì‚¬ìš©í•˜ë©´:</p>

<ul>
  <li>âœ… ì§ì ‘ Principalì— ì ‘ê·¼í•˜ì—¬ ì•ˆì •ì„± í™•ë³´</li>
  <li>âœ… null ì²´í¬ ë° fallback ë¡œì§ êµ¬í˜„ ê°€ëŠ¥</li>
  <li>âœ… ëª…ì‹œì  ì½”ë“œë¡œ ë””ë²„ê¹… ìš©ì´</li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì¹œêµ¬í•˜ìë¥¼ ê°œë°œí•˜ë©´ì„œ í†µí™” ì¤‘ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ë˜ ì¤‘ ë°œê²¬í•œ WebSocket ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ì¸ì¦ ë¬¸ì œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì…ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] SSL ì¸ì¦ì„œ ìë™ ê°±ì‹  ì„¤ì •í•˜ê¸° (Amazon Linux + Letâ€™s Encrypt)</title><link href="https://nan0silver.github.io/projectdiary/2026-01-12-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] SSL ì¸ì¦ì„œ ìë™ ê°±ì‹  ì„¤ì •í•˜ê¸° (Amazon Linux + Letâ€™s Encrypt)" /><published>2026-01-12T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2026-01-12-diary/"><![CDATA[<ul>
  <li><a href="#ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</a></li>
  <li><a href="#ssl-ì¸ì¦ì„œë€">SSL ì¸ì¦ì„œë€?</a></li>
  <li><a href="#lets-encryptì™€-90ì¼-ê°±ì‹ -ì£¼ê¸°">Letâ€™s Encryptì™€ 90ì¼ ê°±ì‹  ì£¼ê¸°</a></li>
  <li><a href="#í•´ê²°-ê³¼ì •">í•´ê²° ê³¼ì •</a></li>
</ul>

<hr />

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<p>í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ê°‘ìê¸° ë¡œê·¸ì¸ì´ ì•ˆ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://{backend-domain}/api/v1/auth/oauth/kakao/config?platform=web
net::ERR_CERT_DATE_INVALID
</code></pre></div></div>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2026-01-11-pic1.png?raw=true" alt="ì—ëŸ¬ ì´ë¯¸ì§€1" /></p>

<p>ë¸Œë¼ìš°ì € ì½˜ì†”ì— ì°íŒ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë‹ˆ <code class="language-plaintext highlighter-rouge">ERR_CERT_DATE_INVALID</code> - SSL ì¸ì¦ì„œ ë‚ ì§œê°€ ìœ íš¨í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤.</p>

<h2 id="ssl-ì¸ì¦ì„œë€">SSL ì¸ì¦ì„œë€?</h2>

<p>SSL(Secure Sockets Layer) ì¸ì¦ì„œëŠ” ì›¹ì‚¬ì´íŠ¸ì™€ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ê°„ì˜ í†µì‹ ì„ ì•”í˜¸í™”í•˜ëŠ” ë””ì§€í„¸ ì¸ì¦ì„œì´ë‹¤.
HTTPS í†µì‹ ì„ ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ í•„ìš”í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì—­í• ì„ í•œë‹¤:</p>

<ul>
  <li><strong>ë°ì´í„° ì•”í˜¸í™”</strong>: ì‚¬ìš©ìì™€ ì„œë²„ ê°„ ì£¼ê³ ë°›ëŠ” ë°ì´í„°ë¥¼ ì•”í˜¸í™”</li>
  <li><strong>ì‹ ì› ê²€ì¦</strong>: í•´ë‹¹ ë„ë©”ì¸ì´ ì¸ì¦ëœ ì†Œìœ ìì— ì˜í•´ ìš´ì˜ë¨ì„ ì¦ëª…</li>
  <li><strong>ë°ì´í„° ë¬´ê²°ì„±</strong>: ì „ì†¡ ì¤‘ ë°ì´í„°ê°€ ë³€ì¡°ë˜ì§€ ì•Šì•˜ìŒì„ ë³´ì¥</li>
</ul>

<p>íŠ¹íˆ OAuth ë¡œê·¸ì¸ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹¤ë£¨ëŠ” ê²½ìš°, ì¹´ì¹´ì˜¤ë‚˜ êµ¬ê¸€ ê°™ì€ OAuth ì œê³µìë“¤ì€ <strong>HTTPSë¥¼ í•„ìˆ˜</strong>ë¡œ ìš”êµ¬í•œë‹¤.</p>

<h2 id="lets-encryptì™€-90ì¼-ê°±ì‹ -ì£¼ê¸°">Letâ€™s Encryptì™€ 90ì¼ ê°±ì‹  ì£¼ê¸°</h2>

<p>Letâ€™s EncryptëŠ” ë¬´ë£Œë¡œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ì£¼ëŠ” ë¹„ì˜ë¦¬ ì¸ì¦ ê¸°ê´€ì´ë‹¤. í•˜ì§€ë§Œ í•œ ê°€ì§€ íŠ¹ì§•ì´ ìˆë‹¤:</p>

<p><strong>ì¸ì¦ì„œ ìœ íš¨ê¸°ê°„ì´ 90ì¼</strong></p>

<p>ì™œ 90ì¼ì¼ê¹Œ?</p>

<ol>
  <li><strong>ë³´ì•ˆ ê°•í™”</strong>: ì¸ì¦ì„œê°€ íƒˆì·¨ë˜ë”ë¼ë„ í”¼í•´ ê¸°ê°„ì´ ì§§ìŒ</li>
  <li><strong>ìë™í™” ìœ ë„</strong>: ìˆ˜ë™ ê°±ì‹ ì´ ë²ˆê±°ë¡œì›Œ ìë™í™”ë¥¼ ê°•ì œí•¨</li>
  <li><strong>í‚¤ êµì²´ ì£¼ê¸°</strong>: ì •ê¸°ì ì¸ í‚¤ êµì²´ë¡œ ë³´ì•ˆì„± í–¥ìƒ</li>
</ol>

<p>ì¼ë°˜ ìƒìš© ì¸ì¦ì„œëŠ” 1ë…„ ë‹¨ìœ„ì¸ë°, Letâ€™s EncryptëŠ” ë¬´ë£Œ ëŒ€ì‹  ì§§ì€ ì£¼ê¸°ë¡œ ì„¤ì •í–ˆë‹¤.
ê²°ê³¼ì ìœ¼ë¡œ <strong>ìë™ ê°±ì‹  ì„¤ì •</strong>ì´ í•„ìš”í–ˆë‹¤.</p>

<h2 id="í•´ê²°-ê³¼ì •">í•´ê²° ê³¼ì •</h2>

<h3 id="1-ì¦‰ì‹œ-ì¸ì¦ì„œ-ê°±ì‹ ">1. ì¦‰ì‹œ ì¸ì¦ì„œ ê°±ì‹ </h3>

<p>ë¨¼ì € ë§Œë£Œëœ ì¸ì¦ì„œë¥¼ ê°±ì‹ í•´ì„œ ì„œë¹„ìŠ¤ë¥¼ ë³µêµ¬í–ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># EC2 ì„œë²„ì— SSH ì ‘ì†</span>
ssh <span class="nt">-i</span> ~/.ssh/your-key.pem ec2-user@<span class="o">{</span>backend-domain<span class="o">}</span>

<span class="c"># ì¸ì¦ì„œ í™•ì¸</span>
<span class="nb">sudo </span>certbot certificates
</code></pre></div></div>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2026-01-11-pic2.png?raw=true" alt="ì—ëŸ¬ ì´ë¯¸ì§€2" /></p>

<ul>
  <li>ì¸ì¦ì„œë¥¼ í™•ì¸í•˜ë‹ˆ ì–´ì œìë¡œ ë§Œë£Œëœ ê²ƒì„ í™•ì¸í–ˆë‹¤. (ì˜¤ëŠ˜ì€ 1ì›” 12ì¼)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì¸ì¦ì„œ ê°±ì‹ </span>
<span class="nb">sudo </span>certbot renew

<span class="c"># Nginx ì¬ì‹œì‘</span>
<span class="nb">sudo </span>systemctl reload nginx
</code></pre></div></div>

<h3 id="2-ìë™-ê°±ì‹ -ì„¤ì •">2. ìë™ ê°±ì‹  ì„¤ì •</h3>

<p>í•˜ì§€ë§Œ 90ì¼ë§ˆë‹¤ ìˆ˜ë™ìœ¼ë¡œ ê°±ì‹ í•  ìˆ˜ëŠ” ì—†ë‹¤ê³  ìƒê°í•´, cronì„ ì´ìš©í•´ ìë™ ê°±ì‹ ì„ ì„¤ì •í–ˆë‹¤.</p>

<h4 id="amazon-linuxì—ì„œ-cron-ì„¤ì¹˜">Amazon Linuxì—ì„œ cron ì„¤ì¹˜</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cronie íŒ¨í‚¤ì§€ ì„¤ì¹˜</span>
<span class="nb">sudo </span>yum <span class="nb">install </span>cronie

<span class="c"># crond ì„œë¹„ìŠ¤ ì‹œì‘ ë° í™œì„±í™”</span>
<span class="nb">sudo </span>systemctl start crond
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>crond

<span class="c"># ìƒíƒœ í™•ì¸</span>
<span class="nb">sudo </span>systemctl status crond
</code></pre></div></div>

<p><strong>ì£¼ì˜</strong>: Amazon LinuxëŠ” <code class="language-plaintext highlighter-rouge">cron</code>ì´ ì•„ë‹ˆë¼ <code class="language-plaintext highlighter-rouge">crond</code>ë¥¼ ì‚¬ìš©!</p>

<h4 id="crontab-ì„¤ì •">crontab ì„¤ì •</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># root ê³„ì •ì˜ crontab í¸ì§‘</span>
<span class="nb">sudo </span>crontab <span class="nt">-e</span>
</code></pre></div></div>

<p>ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0 2 * * * /usr/bin/certbot renew --quiet --post-hook "systemctl reload nginx"
</code></pre></div></div>

<p><strong>ì„¤ì • ì˜ë¯¸:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">0 2 * * *</code>: ë§¤ì¼ ìƒˆë²½ 2ì‹œì— ì‹¤í–‰</li>
  <li><code class="language-plaintext highlighter-rouge">certbot renew</code>: ì¸ì¦ì„œ ê°±ì‹  ì²´í¬ (30ì¼ ì´ë‚´ ë§Œë£Œ ì‹œ ìë™ ê°±ì‹ )</li>
  <li><code class="language-plaintext highlighter-rouge">--quiet</code>: ì¶œë ¥ ìµœì†Œí™”</li>
  <li><code class="language-plaintext highlighter-rouge">--post-hook</code>: ê°±ì‹  ì„±ê³µ ì‹œ Nginx ì¬ì‹œì‘</li>
</ul>

<p>ì €ì¥í•˜ê³  ì¢…ë£Œ:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i           # ì…ë ¥ ëª¨ë“œ
(ë‚´ìš© ì…ë ¥)
ESC         # ëª…ë ¹ ëª¨ë“œ
:wq         # ì €ì¥ í›„ ì¢…ë£Œ
</code></pre></div></div>

<h3 id="3-ì„¤ì •-í™•ì¸">3. ì„¤ì • í™•ì¸</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># crontab ëª©ë¡ í™•ì¸</span>
<span class="nb">sudo </span>crontab <span class="nt">-l</span>

<span class="c"># ê°±ì‹  í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ê°±ì‹  ì—†ì´ ì‹œë®¬ë ˆì´ì…˜)</span>
<span class="nb">sudo </span>certbot renew <span class="nt">--dry-run</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">--dry-run</code>ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ë©´ ì‹¤ì œ ê°±ì‹  ì—†ì´ í”„ë¡œì„¸ìŠ¤ê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<h2 id="ì‘ë™-ì›ë¦¬">ì‘ë™ ì›ë¦¬</h2>

<p>ì„¤ì • í›„ ì‹œìŠ¤í…œì€ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤:</p>

<ol>
  <li><strong>ë§¤ì¼ ìƒˆë²½ 2ì‹œ</strong>, cronì´ <code class="language-plaintext highlighter-rouge">certbot renew</code> ì‹¤í–‰</li>
  <li>certbotì´ ì¸ì¦ì„œ ë§Œë£Œì¼ ì²´í¬</li>
  <li><strong>ë§Œë£Œ 30ì¼ ì´ë‚´</strong>ì¸ ê²½ìš°ì—ë§Œ ì‹¤ì œ ê°±ì‹  ì§„í–‰</li>
  <li>ê°±ì‹  ì„±ê³µ ì‹œ ìë™ìœ¼ë¡œ Nginx ì¬ì‹œì‘</li>
  <li>ê°±ì‹  ë¶ˆí•„ìš” ì‹œ ì¡°ìš©íˆ ì¢…ë£Œ</li>
</ol>

<p>ì¦‰, ì„¤ì •ë§Œ í•´ë‘ë©´ <strong>ì™„ì „ ìë™ìœ¼ë¡œ</strong> ì¸ì¦ì„œê°€ ê´€ë¦¬ëœë‹¤.</p>

<h2 id="ê²°ë¡ ">ê²°ë¡ </h2>

<p>SSL ì¸ì¦ì„œ ë§Œë£Œë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì¥ì• ëŠ” ì¹˜ëª…ì ì´ë‹¤. íŠ¹íˆ OAuth ì¸ì¦ì„ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ì—ì„œëŠ” ë¡œê·¸ì¸ ìì²´ê°€ ë¶ˆê°€ëŠ¥í•´ì”ë‹¤.</p>

<p>Letâ€™s Encryptë¥¼ ì‚¬ìš©í•œë‹¤ë©´:</p>

<ul>
  <li>âœ… cron ìë™ ê°±ì‹  ì„¤ì •ì€ í•„ìˆ˜</li>
  <li>âœ… <code class="language-plaintext highlighter-rouge">--dry-run</code>ìœ¼ë¡œ ì •ê¸°ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸</li>
  <li>âœ… ê°±ì‹  ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ì„¤ì • ê¶Œì¥ (ì´ë©”ì¼ ë“±)</li>
</ul>

<p>90ì¼ë§ˆë‹¤ ìˆ˜ë™ ê°±ì‹ í•˜ëŠ” ê²ƒë³´ë‹¤, í•œ ë²ˆ ì œëŒ€ë¡œ ìë™í™” ì„¤ì •í•´ë‘ëŠ” ê²ƒì´ í›¨ì”¬ ì•ˆì „í•˜ê³  í¸ë¦¬í•˜ë‹¤.</p>

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://letsencrypt.org/docs/">Letâ€™s Encrypt ê³µì‹ ë¬¸ì„œ</a></li>
  <li><a href="https://certbot.eff.org/">Certbot ì‚¬ìš© ê°€ì´ë“œ</a></li>
  <li><a href="https://docs.aws.amazon.com/linux/">Amazon Linux cron ì„¤ì •</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[SSH ì¸ì¦ì„œê°€ ë§Œë£Œë˜ì–´ ì´ì— ëŒ€í•´ ê³µë¶€í•œ ë‚´ìš©ê³¼ í•´ê²°í•œ ë‚´ìš©ì— ëŒ€í•´ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[Algorithm] ì½”ë”©í…ŒìŠ¤íŠ¸ ì•Œê³ ë¦¬ì¦˜ ì„ íƒë°©ë²• ìš”ì•½</title><link href="https://nan0silver.github.io/algorithm/2026-01-09-summary/" rel="alternate" type="text/html" title="[Algorithm] ì½”ë”©í…ŒìŠ¤íŠ¸ ì•Œê³ ë¦¬ì¦˜ ì„ íƒë°©ë²• ìš”ì•½" /><published>2026-01-09T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/algorithm/summary</id><content type="html" xml:base="https://nan0silver.github.io/algorithm/2026-01-09-summary/"><![CDATA[<p>ì½”ë”©í…ŒìŠ¤íŠ¸ì—ì„œ ì–´ë–¤ ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•´ì•¼ í• ì§€ ê³ ë¯¼ë  ë•Œê°€ ë§ë‹¤.
ì´ ê¸€ì—ì„œëŠ” <strong>ì½”í…Œ ê¸°ì¤€ìœ¼ë¡œ ë”± í•„ìš”í•œ ë§Œí¼ë§Œ</strong> ì •ë¦¬í•œë‹¤.</p>

<hr />

<h2 id="1ï¸âƒ£-ë¬¸ì œë¥¼-ì½ìë§ˆì-ë˜ì§ˆ-5ê°€ì§€-ì§ˆë¬¸">1ï¸âƒ£ ë¬¸ì œë¥¼ ì½ìë§ˆì ë˜ì§ˆ 5ê°€ì§€ ì§ˆë¬¸</h2>

<table>
  <thead>
    <tr>
      <th>ìˆœì„œ</th>
      <th>ìŠ¤ìŠ¤ë¡œì—ê²Œ ë¬»ëŠ” ì§ˆë¬¸</th>
      <th>YESë©´</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Q1</td>
      <td>ìµœë‹¨ ê±°ë¦¬ / ìµœì†Œ íšŸìˆ˜ì¸ê°€?</td>
      <td>ğŸ‘‰ ì•„ë˜ Q2</td>
    </tr>
    <tr>
      <td>Q2</td>
      <td>ëª¨ë“  ê°„ì„  ê°€ì¤‘ì¹˜ê°€ ê°™ì€ê°€?</td>
      <td>ğŸ‘‰ <strong>BFS</strong></td>
    </tr>
    <tr>
      <td>Q3</td>
      <td>ê°€ì¤‘ì¹˜ê°€ ë‹¤ë¥´ì§€ë§Œ ìŒìˆ˜ëŠ” ì—†ëŠ”ê°€?</td>
      <td>ğŸ‘‰ <strong>ë‹¤ìµìŠ¤íŠ¸ë¼</strong></td>
    </tr>
    <tr>
      <td>Q4</td>
      <td>ëª¨ë“  ìŒ (i, j) ìµœë‹¨ê±°ë¦¬ì¸ê°€?</td>
      <td>ğŸ‘‰ <strong>í”Œë¡œì´ë“œ-ì›Œì…œ</strong></td>
    </tr>
    <tr>
      <td>Q5</td>
      <td>íŠ¸ë¦¬(ì‚¬ì´í´ ì—†ìŒ)ì¸ê°€?</td>
      <td>ğŸ‘‰ <strong>DFS / íŠ¸ë¦¬ DP</strong></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="2ï¸âƒ£-bfs--dfs--ë‹¤ìµìŠ¤íŠ¸ë¼--í”Œë¡œì´ë“œ-ë¹„êµí‘œ">2ï¸âƒ£ BFS / DFS / ë‹¤ìµìŠ¤íŠ¸ë¼ / í”Œë¡œì´ë“œ ë¹„êµí‘œ</h2>

<table>
  <thead>
    <tr>
      <th>êµ¬ë¶„</th>
      <th>BFS</th>
      <th>DFS</th>
      <th>ë‹¤ìµìŠ¤íŠ¸ë¼</th>
      <th>í”Œë¡œì´ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ëª©ì </td>
      <td>ìµœë‹¨ ê±°ë¦¬(ê°€ì¤‘ì¹˜=1)</td>
      <td>íƒìƒ‰/êµ¬ì¡°</td>
      <td>ìµœë‹¨ ê±°ë¦¬(ê°€ì¤‘ì¹˜â‰ 1)</td>
      <td>ëª¨ë“  ìŒ ìµœë‹¨</td>
    </tr>
    <tr>
      <td>ìë£Œêµ¬ì¡°</td>
      <td>Queue</td>
      <td>ì¬ê·€ / Stack</td>
      <td>PriorityQueue</td>
      <td>2ì°¨ì› ë°°ì—´</td>
    </tr>
    <tr>
      <td>ì‹œê°„ë³µì¡ë„</td>
      <td>O(N+M)</td>
      <td>O(N+M)</td>
      <td>O((N+M)logN)</td>
      <td>O(NÂ³)</td>
    </tr>
    <tr>
      <td>ê±°ë¦¬ ë°°ì—´</td>
      <td>O</td>
      <td>â–³</td>
      <td>O</td>
      <td>O</td>
    </tr>
    <tr>
      <td>visited</td>
      <td>O</td>
      <td>O</td>
      <td>â–³</td>
      <td>X</td>
    </tr>
    <tr>
      <td>ëŒ€í‘œ ë¬¸ì œ</td>
      <td>ë¯¸ë¡œ, ìˆ¨ë°”ê¼­ì§ˆ</td>
      <td>íŠ¸ë¦¬ ì§€ë¦„</td>
      <td>ìµœë‹¨ ë¹„ìš©</td>
      <td>í”Œë¡œì´ë“œ</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="3ï¸âƒ£-ê°€ì¤‘ì¹˜ë¡œ-ë°”ë¡œ-ê³ ë¥´ëŠ”-ê³µì‹-ì•”ê¸°ìš©">3ï¸âƒ£ â€œê°€ì¤‘ì¹˜â€ë¡œ ë°”ë¡œ ê³ ë¥´ëŠ” ê³µì‹ (ì•”ê¸°ìš©)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ìµœë‹¨ ê±°ë¦¬ + ê°€ì¤‘ì¹˜ = 1  â†’ BFS
ìµœë‹¨ ê±°ë¦¬ + ê°€ì¤‘ì¹˜ ë‹¤ë¦„ â†’ ë‹¤ìµìŠ¤íŠ¸ë¼
ëª¨ë“  ìŒ ìµœë‹¨ ê±°ë¦¬      â†’ í”Œë¡œì´ë“œ
</code></pre></div></div>

<hr />

<h2 id="4ï¸âƒ£-íŠ¸ë¦¬ê°€-ë‚˜ì˜¤ë©´-ì´ë ‡ê²Œ-ìƒê°í•˜ì">4ï¸âƒ£ â€œíŠ¸ë¦¬â€ê°€ ë‚˜ì˜¤ë©´ ì´ë ‡ê²Œ ìƒê°í•˜ì</h2>

<table>
  <thead>
    <tr>
      <th>ë¬¸ì œ í‚¤ì›Œë“œ</th>
      <th>ê±°ì˜ ì •ë‹µ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>íŠ¸ë¦¬ / ë¶€ëª¨ / ìì‹</td>
      <td>DFS</td>
    </tr>
    <tr>
      <td>ê°€ì¥ ê¸´ ê²½ë¡œ</td>
      <td>íŠ¸ë¦¬ ì§€ë¦„</td>
    </tr>
    <tr>
      <td>ì„œë¸ŒíŠ¸ë¦¬</td>
      <td>íŠ¸ë¦¬ DP</td>
    </tr>
    <tr>
      <td>ë£¨íŠ¸ê°€ ìˆìŒ</td>
      <td>DFS</td>
    </tr>
    <tr>
      <td>ê°„ì„  = ë…¸ë“œ - 1</td>
      <td>íŠ¸ë¦¬</td>
    </tr>
  </tbody>
</table>

<p>ğŸ‘‰ <strong>íŠ¸ë¦¬ = DFS ê¸°ë³¸ê°’</strong></p>

<hr />

<h2 id="5ï¸âƒ£-ì¸ì ‘-ë¦¬ìŠ¤íŠ¸-vs-ì¸ì ‘-í–‰ë ¬-ì„ íƒí‘œ">5ï¸âƒ£ ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ vs ì¸ì ‘ í–‰ë ¬ ì„ íƒí‘œ</h2>

<table>
  <thead>
    <tr>
      <th>ìƒí™©</th>
      <th>ì„ íƒ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>N â‰¥ 1,000</td>
      <td>ì¸ì ‘ ë¦¬ìŠ¤íŠ¸</td>
    </tr>
    <tr>
      <td>BFS / DFS / ë‹¤ìµìŠ¤íŠ¸ë¼</td>
      <td>ì¸ì ‘ ë¦¬ìŠ¤íŠ¸</td>
    </tr>
    <tr>
      <td>í”Œë¡œì´ë“œ-ì›Œì…œ</td>
      <td>ì¸ì ‘ í–‰ë ¬</td>
    </tr>
    <tr>
      <td>ë©”ëª¨ë¦¬ ì œí•œ ë¹¡ë¹¡</td>
      <td>ì¸ì ‘ ë¦¬ìŠ¤íŠ¸</td>
    </tr>
  </tbody>
</table>

<p><strong>ì½”í…Œ ê¸°ë³¸ê°’</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">[]&gt;[]</span> <span class="n">graph</span><span class="o">;</span>
</code></pre></div></div>

<hr />

<h2 id="6ï¸âƒ£-ë¬¸ì œ-ë¬¸ì¥--ì•Œê³ ë¦¬ì¦˜-ìë™-ë³€í™˜-ì˜ˆì‹œ">6ï¸âƒ£ ë¬¸ì œ ë¬¸ì¥ â†’ ì•Œê³ ë¦¬ì¦˜ ìë™ ë³€í™˜ ì˜ˆì‹œ</h2>

<table>
  <thead>
    <tr>
      <th>ë¬¸ì œ ë¬¸ì¥</th>
      <th>ë°”ë¡œ ë– ì˜¬ë¦´ ê²ƒ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>â€œìµœì†Œ ëª‡ ë²ˆ ë§Œì—â€</td>
      <td>BFS</td>
    </tr>
    <tr>
      <td>â€œìµœì†Œ ë¹„ìš©â€</td>
      <td>ë‹¤ìµìŠ¤íŠ¸ë¼</td>
    </tr>
    <tr>
      <td>â€œëª¨ë“  ë„ì‹œ ìŒâ€</td>
      <td>í”Œë¡œì´ë“œ</td>
    </tr>
    <tr>
      <td>â€œê°€ì¥ ê¸´ ê²½ë¡œâ€</td>
      <td>íŠ¸ë¦¬ ì§€ë¦„</td>
    </tr>
    <tr>
      <td>â€œì—°ê²°ë˜ì–´ ìˆëŠ”ê°€â€</td>
      <td>DFS/BFS</td>
    </tr>
    <tr>
      <td>â€œK ê±°ë¦¬ì¸ ë…¸ë“œâ€</td>
      <td>BFS</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="7ï¸âƒ£-ì‹¤ì „ì—ì„œ-ì“°ëŠ”-íŒë³„-í•œ-ì¤„-ê³µì‹">7ï¸âƒ£ ì‹¤ì „ì—ì„œ ì“°ëŠ” <strong>íŒë³„ í•œ ì¤„ ê³µì‹</strong></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ìµœë‹¨ ê±°ë¦¬ì¸ê°€?
â†’ ê°€ì¤‘ì¹˜ê°€ ì „ë¶€ 1ì¸ê°€?
  â†’ YES: BFS
  â†’ NO : ë‹¤ìµìŠ¤íŠ¸ë¼
íŠ¸ë¦¬ì¸ê°€?
â†’ DFS / íŠ¸ë¦¬ DP
</code></pre></div></div>

<hr />

<h2 id="8ï¸âƒ£-ë„ˆê°€-ìì£¼-í—·ê°ˆë¦¬ë˜-ë¬¸ì œë“¤-ì •ë‹µ-ì•Œê³ ë¦¬ì¦˜">8ï¸âƒ£ ë„ˆê°€ ìì£¼ í—·ê°ˆë¦¬ë˜ ë¬¸ì œë“¤, ì •ë‹µ ì•Œê³ ë¦¬ì¦˜</h2>

<table>
  <thead>
    <tr>
      <th>ë¬¸ì œ</th>
      <th>ì •ë‹µ ì•Œê³ ë¦¬ì¦˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>íŠ¹ì • ê±°ë¦¬ì˜ ë„ì‹œ ì°¾ê¸°</td>
      <td>BFS</td>
    </tr>
    <tr>
      <td>ìˆ¨ë°”ê¼­ì§ˆ</td>
      <td>BFS</td>
    </tr>
    <tr>
      <td>íŠ¸ë¦¬ì˜ ì§€ë¦„</td>
      <td>DFS (2ë²ˆ or DP)</td>
    </tr>
    <tr>
      <td>ê±°ì§“ë§</td>
      <td>DSU / BFS</td>
    </tr>
    <tr>
      <td>ì¹˜í‚¨ ë°°ë‹¬</td>
      <td>ì¡°í•© + ê±°ë¦¬ ê³„ì‚°</td>
    </tr>
    <tr>
      <td>í”Œë¡œì´ë“œ</td>
      <td>í”Œë¡œì´ë“œ-ì›Œì…œ</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-ìµœì¢…-ìš”ì•½-ì´-ë¬¸ì¥ë§Œ-ì™¸ì›Œë„-ë¨">ğŸ¯ ìµœì¢… ìš”ì•½ (ì´ ë¬¸ì¥ë§Œ ì™¸ì›Œë„ ë¨)</h2>

<blockquote>
  <p><strong>â€œì•Œê³ ë¦¬ì¦˜ì€ ì™¸ìš°ëŠ” ê²Œ ì•„ë‹ˆë¼,
ë¬¸ì œ ì¡°ê±´ìœ¼ë¡œ ì œê±°í•˜ê³  ë‚¨ëŠ” í•˜ë‚˜ë¥¼ ê³ ë¥´ëŠ” ê²ƒâ€</strong></p>
</blockquote>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="algorithm" /><summary type="html"><![CDATA[ì½”ë”©í…ŒìŠ¤íŠ¸ ì•Œê³ ë¦¬ì¦˜ ì„ íƒ ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[Algorithm] í”Œë¡œì´ë“œ-ì›Œì…œ ì•Œê³ ë¦¬ì¦˜</title><link href="https://nan0silver.github.io/algorithm/2025-12-29-floyd-warshall/" rel="alternate" type="text/html" title="[Algorithm] í”Œë¡œì´ë“œ-ì›Œì…œ ì•Œê³ ë¦¬ì¦˜" /><published>2025-12-29T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/algorithm/floyd-warshall</id><content type="html" xml:base="https://nan0silver.github.io/algorithm/2025-12-29-floyd-warshall/"><![CDATA[<ol>
  <li><a href="#-1ï¸âƒ£-í”Œë¡œì´ë“œ-ì›Œì…œì´ë€">í”Œë¡œì´ë“œ-ì›Œì…œì´ë€?</a></li>
  <li><a href="#-2ï¸âƒ£-í•µì‹¬-ê°œë…-ì´í•´í•˜ê¸°">í•µì‹¬ ê°œë… ì´í•´í•˜ê¸°</a></li>
  <li><a href="#-3ï¸âƒ£-k-i-jì˜-ì •í™•í•œ-ì˜ë¯¸">k, i, jì˜ ì˜ë¯¸</a></li>
  <li><a href="#-4ï¸âƒ£-ë™ì‘-ê³¼ì •-ì‹œê°í™”">ë™ì‘ ê³¼ì • ì‹œê°í™”</a></li>
  <li><a href="#-5ï¸âƒ£-ì½”ë“œ-êµ¬í˜„">ì½”ë“œ êµ¬í˜„</a></li>
  <li><a href="#-6ï¸âƒ£-ì‹œê°„ë³µì¡ë„ì™€-ê³µê°„ë³µì¡ë„">ì‹œê°„ë³µì¡ë„ì™€ ê³µê°„ë³µì¡ë„</a></li>
  <li><a href="#-7ï¸âƒ£-ë‹¤ìµìŠ¤íŠ¸ë¼ì™€ì˜-ë¹„êµ">ë‹¤ìµìŠ¤íŠ¸ë¼ì™€ì˜ ë¹„êµ</a></li>
  <li><a href="#-8ï¸âƒ£-ì‹¤ì „-ë¬¸ì œ-ì ìš©">ì‹¤ì „ ë¬¸ì œ ì ìš©</a></li>
</ol>

<hr />

<h2 id="-1ï¸âƒ£-í”Œë¡œì´ë“œ-ì›Œì…œì´ë€">ğŸ¯ 1ï¸âƒ£ í”Œë¡œì´ë“œ-ì›Œì…œì´ë€?</h2>

<h3 id="-í•œ-ë¬¸ì¥-ì •ì˜">ğŸ’¡ í•œ ë¬¸ì¥ ì •ì˜</h3>

<p><strong>â€œëª¨ë“  ì •ì  ìŒ ì‚¬ì´ì˜ ìµœë‹¨ ê²½ë¡œë¥¼ í•œ ë²ˆì— êµ¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜â€</strong></p>

<h3 id="-ì–¸ì œ-ì‚¬ìš©í•˜ëŠ”ê°€">ğŸ’¡ ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê°€?</h3>

<ul>
  <li>â€œA ë„ì‹œì—ì„œ B ë„ì‹œë¡œ ê°€ëŠ” ìµœë‹¨ ê±°ë¦¬ëŠ”?â€ â†’ ëª¨ë“  ë„ì‹œ ìŒì— ëŒ€í•´ ë¬¼ì–´ë³¼ ë•Œ</li>
  <li>â€œê²½ìœ ì§€ë¥¼ ê±°ì³ê°€ëŠ” ê²ƒì´ ë” ë¹ ë¥¸ê°€?â€ â†’ ì¤‘ê°„ ë…¸ë“œë¥¼ í—ˆìš©í•˜ë©° ìµœì  ê²½ë¡œë¥¼ ì°¾ì„ ë•Œ</li>
  <li>ê·¸ë˜í”„ì˜ ëª¨ë“  ìŒ ìµœë‹¨ ê±°ë¦¬ë¥¼ êµ¬í•´ì•¼ í•  ë•Œ</li>
</ul>

<h3 id="-íŠ¹ì§•">ğŸ’¡ íŠ¹ì§•</h3>

<table>
  <thead>
    <tr>
      <th>íŠ¹ì§•</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ì‹œê°„ë³µì¡ë„</strong></td>
      <td>O(VÂ³) - ì •ì  ê°œìˆ˜ì˜ ì„¸ì œê³±</td>
    </tr>
    <tr>
      <td><strong>ê³µê°„ë³µì¡ë„</strong></td>
      <td>O(VÂ²) - 2ì°¨ì› ë°°ì—´</td>
    </tr>
    <tr>
      <td><strong>ìŒìˆ˜ ê°„ì„ </strong></td>
      <td>ì²˜ë¦¬ ê°€ëŠ¥ (ë‹¨, ìŒìˆ˜ ì‚¬ì´í´ì€ ë¶ˆê°€)</td>
    </tr>
    <tr>
      <td><strong>ê·¸ë˜í”„ ì¢…ë¥˜</strong></td>
      <td>ë°©í–¥/ë¬´ë°©í–¥ ëª¨ë‘ ê°€ëŠ¥</td>
    </tr>
    <tr>
      <td><strong>êµ¬í˜„ ë‚œì´ë„</strong></td>
      <td>ë§¤ìš° ì‰¬ì›€ (3ì¤‘ forë¬¸)</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-2ï¸âƒ£-í•µì‹¬-ê°œë…-ì´í•´í•˜ê¸°">ğŸ§  2ï¸âƒ£ í•µì‹¬ ê°œë… ì´í•´í•˜ê¸°</h2>

<h3 id="-ì•Œê³ ë¦¬ì¦˜ì˜-ë³¸ì§ˆ">ğŸ’¡ ì•Œê³ ë¦¬ì¦˜ì˜ ë³¸ì§ˆ</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"ë„ì‹œ iì—ì„œ ë„ì‹œ jë¡œ ê°ˆ ë•Œ,
kë²ˆ ë„ì‹œë¥¼ ì¤‘ê°„ì— í•œ ë²ˆ ê±°ì³ë„ ë˜ëŠ”ì§€ë¥¼
ë§¤ ë‹¨ê³„ë§ˆë‹¤ í—ˆìš©í•´ê°€ë©° ìµœì†Œ ë¹„ìš©ì„ ê°±ì‹ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜"
</code></pre></div></div>

<h3 id="-distijì˜-ì˜ë¯¸">ğŸ’¡ dist[i][j]ì˜ ì˜ë¯¸</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">ì§€ê¸ˆê¹Œì§€</span> <span class="n">í—ˆìš©ëœ</span> <span class="n">ì¤‘ê°„</span> <span class="n">ë„ì‹œë“¤ë§Œ</span> <span class="n">ì´ìš©í•´ì„œ</span>
             <span class="n">i</span> <span class="err">â†’</span> <span class="n">jë¡œ</span> <span class="n">ê°€ëŠ”</span> <span class="n">ìµœì†Œ</span> <span class="n">ë¹„ìš©</span>
</code></pre></div></div>

<p>ì—¬ê¸°ì„œ â€œì§€ê¸ˆê¹Œì§€ í—ˆìš©ëœâ€ì´ í•µì‹¬ì´ë‹¤. kê°’ì— ë”°ë¼ í—ˆìš© ë²”ìœ„ê°€ ë‹¬ë¼ì§„ë‹¤.</p>

<h3 id="-ë™ì -ê³„íšë²•dpìœ¼ë¡œì„œì˜-í”Œë¡œì´ë“œ-ì›Œì…œ">ğŸ’¡ ë™ì  ê³„íšë²•(DP)ìœ¼ë¡œì„œì˜ í”Œë¡œì´ë“œ-ì›Œì…œ</h3>

<p>í”Œë¡œì´ë“œ-ì›Œì…œì˜ ë³¸ì§ˆì ì¸ ì í™”ì‹:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DP[k][i][j] = ì¤‘ê°„ ë„ì‹œë¥¼ 1~kê¹Œì§€ë§Œ ì¨ì„œ iâ†’jë¡œ ê°€ëŠ” ìµœì†Œ ë¹„ìš©

DP[k][i][j] = min(
    DP[k-1][i][j],           // kë¥¼ ê±°ì¹˜ì§€ ì•ŠëŠ” ê²½ìš°
    DP[k-1][i][k] + DP[k-1][k][j]  // kë¥¼ ê±°ì¹˜ëŠ” ê²½ìš°
)
</code></pre></div></div>

<p>ì‹¤ì œ ì½”ë“œëŠ” 3ì°¨ì› ë°°ì—´ ëŒ€ì‹  2ì°¨ì› ë°°ì—´ì„ ë®ì–´ì“°ë©´ì„œ k ë‹¨ê³„ë¥¼ í™•ì¥í•œë‹¤.</p>

<hr />

<h2 id="-3ï¸âƒ£-k-i-jì˜-ì •í™•í•œ-ì˜ë¯¸">ğŸ”‘ 3ï¸âƒ£ k, i, jì˜ ì •í™•í•œ ì˜ë¯¸</h2>

<h3 id="-ê¸°ë³¸-êµ¬ì¡°">ğŸ’¡ ê¸°ë³¸ êµ¬ì¡°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span> <span class="o">{</span>        <span class="c1">// ì¤‘ê°„ ë…¸ë“œ</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>    <span class="c1">// ì¶œë°œ ë…¸ë“œ</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span> <span class="c1">// ë„ì°© ë…¸ë“œ</span>
            <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span>
                <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">],</span>
                <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">+</span> <span class="n">dist</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span>
            <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="-ê°-ë³€ìˆ˜ì˜-ì˜ë¯¸">ğŸ’¡ ê° ë³€ìˆ˜ì˜ ì˜ë¯¸</h3>

<table>
  <thead>
    <tr>
      <th>ë³€ìˆ˜</th>
      <th>ì˜ë¯¸</th>
      <th>ì—­í• </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>k</strong></td>
      <td>ì¤‘ê°„ì— ê±°ì³ë„ ë˜ëŠ” ë„ì‹œ ë²ˆí˜¸</td>
      <td>k=1ì¼ ë•ŒëŠ” 1ë²ˆë§Œ, k=2ì¼ ë•ŒëŠ” 1,2ë²ˆê¹Œì§€ í—ˆìš©</td>
    </tr>
    <tr>
      <td><strong>i</strong></td>
      <td>ì¶œë°œ ë„ì‹œ</td>
      <td>ëª¨ë“  ì¶œë°œì§€ë¥¼ ìˆœíšŒ</td>
    </tr>
    <tr>
      <td><strong>j</strong></td>
      <td>ë„ì°© ë„ì‹œ</td>
      <td>ëª¨ë“  ë„ì°©ì§€ë¥¼ ìˆœíšŒ</td>
    </tr>
  </tbody>
</table>

<h3 id="-í•µì‹¬-ë¡œì§ì˜-ì˜ë¯¸">ğŸ’¡ í•µì‹¬ ë¡œì§ì˜ ì˜ë¯¸</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span>
    <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">],</span>          <span class="c1">// ì›ë˜ ì•Œê³  ìˆë˜ i â†’ j ìµœë‹¨ ê²½ë¡œ</span>
    <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">+</span> <span class="n">dist</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span>  <span class="c1">// i â†’ k â†’ jë¡œ ê°€ëŠ” ìƒˆë¡œìš´ ê²½ë¡œ</span>
<span class="o">);</span>
</code></pre></div></div>

<p>ì´ ì½”ë“œê°€ ë¬»ëŠ” ì§ˆë¬¸:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"iì—ì„œ jë¡œ ë°”ë¡œ ê°€ëŠ” ê²Œ ë‚«ë‚˜?"
"ì•„ë‹ˆë©´ kë¥¼ í•œ ë²ˆ ë“¤ë €ë‹¤ ê°€ëŠ” ê²Œ ë‚«ë‚˜?"
</code></pre></div></div>

<p>ì‹œê°ì  í‘œí˜„:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>i â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ j  (ì§ì ‘)
â”‚
â”‚
â–¼
k
</code></pre></div></div>

<h3 id="-ì™œ-kê°€-ê°€ì¥-ë°”ê¹¥-ë£¨í”„ì¸ê°€">ğŸ’¡ ì™œ kê°€ ê°€ì¥ ë°”ê¹¥ ë£¨í”„ì¸ê°€?</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âœ… ì˜¬ë°”ë¥¸ ìˆœì„œ</span>
<span class="k">for</span> <span class="n">k</span>
  <span class="k">for</span> <span class="n">i</span>
    <span class="k">for</span> <span class="n">j</span>

<span class="c1">// âŒ ì˜ëª»ëœ ìˆœì„œ</span>
<span class="k">for</span> <span class="n">i</span>
  <span class="k">for</span> <span class="n">j</span>
    <span class="k">for</span> <span class="n">k</span>
</code></pre></div></div>

<p><strong>ì´ìœ </strong>: këŠ” â€œì¤‘ê°„ ë„ì‹œë¡œ kê¹Œì§€ í—ˆìš©í•œ ìƒíƒœì—ì„œ ëª¨ë“  iâ†’j ìµœë‹¨ê±°ë¦¬ë¥¼ ê°±ì‹ â€í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤. ë§Œì•½ ië‚˜ jê°€ ë°”ê¹¥ì— ìˆìœ¼ë©´ ì•„ì§ í—ˆìš©ë˜ì§€ ì•Šì€ ì¤‘ê°„ ë„ì‹œë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ DPì˜ ë‹¨ê³„ì  ì˜ë¯¸ê°€ ê¹¨ì§„ë‹¤.</p>

<hr />

<h2 id="-4ï¸âƒ£-ë™ì‘-ê³¼ì •-ì‹œê°í™”">ğŸ“Š 4ï¸âƒ£ ë™ì‘ ê³¼ì • ì‹œê°í™”</h2>

<h3 id="-ì˜ˆì‹œ-ê·¸ë˜í”„">ğŸ’¡ ì˜ˆì‹œ ê·¸ë˜í”„</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    1 â”€â”€(4)â”€â”€ 2
    â”‚         â”‚
   (3)       (2)
    â”‚         â”‚
    3 â”€â”€(5)â”€â”€ 4
</code></pre></div></div>

<h3 id="-ì´ˆê¸°-ìƒíƒœ-k--0-ì¤‘ê°„-ë…¸ë“œ-í—ˆìš©-ì•ˆ-í•¨">ğŸ’¡ ì´ˆê¸° ìƒíƒœ (k = 0, ì¤‘ê°„ ë…¸ë“œ í—ˆìš© ì•ˆ í•¨)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dist[i][j] = ì§ì ‘ ì—°ê²°ëœ ê°„ì„ ë§Œ ì‚¬ìš©

      1    2    3    4
1  [  0    4   INF  INF ]
2  [  4    0   INF   2  ]
3  [ INF  INF   0    5  ]
4  [ INF   2    5    0  ]
</code></pre></div></div>

<h3 id="-k--1-1ë²ˆ-ë…¸ë“œë¥¼-ì¤‘ê°„ì—-ì‚¬ìš©-ê°€ëŠ¥">ğŸ’¡ k = 1 (1ë²ˆ ë…¸ë“œë¥¼ ì¤‘ê°„ì— ì‚¬ìš© ê°€ëŠ¥)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"1ë²ˆì„ ê±°ì³ê°€ë©´ ë” ë¹ ë¥¸ ê²½ë¡œê°€ ìˆë‚˜?"

i=2, j=3ì¼ ë•Œ:
dist[2][3] = min(INF, dist[2][1] + dist[1][3])
           = min(INF, 4 + INF) = INF

i=3, j=2ì¼ ë•Œ:
dist[3][2] = min(INF, dist[3][1] + dist[1][2])
           = min(INF, INF + 4) = INF
</code></pre></div></div>

<h3 id="-k--2-12ë²ˆ-ë…¸ë“œë¥¼-ì¤‘ê°„ì—-ì‚¬ìš©-ê°€ëŠ¥">ğŸ’¡ k = 2 (1,2ë²ˆ ë…¸ë“œë¥¼ ì¤‘ê°„ì— ì‚¬ìš© ê°€ëŠ¥)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"2ë²ˆì„ ê±°ì³ê°€ë©´ ë” ë¹ ë¥¸ ê²½ë¡œê°€ ìˆë‚˜?"

i=1, j=4ì¼ ë•Œ:
dist[1][4] = min(INF, dist[1][2] + dist[2][4])
           = min(INF, 4 + 2) = 6
</code></pre></div></div>

<h3 id="-ìµœì¢…-ê²°ê³¼-k--4-ëª¨ë“ -ë…¸ë“œ-í—ˆìš©">ğŸ’¡ ìµœì¢… ê²°ê³¼ (k = 4, ëª¨ë“  ë…¸ë“œ í—ˆìš©)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      1    2    3    4
1  [  0    4    8    6  ]
2  [  4    0    7    2  ]
3  [  8    7    0    5  ]
4  [  6    2    5    0  ]
</code></pre></div></div>

<hr />

<h2 id="-5ï¸âƒ£-ì½”ë“œ-êµ¬í˜„">ğŸ’» 5ï¸âƒ£ ì½”ë“œ êµ¬í˜„</h2>

<h3 id="-ê¸°ë³¸-í…œí”Œë¦¿">ğŸ’¡ ê¸°ë³¸ í…œí”Œë¦¿</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">FloydWarshall</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">INF</span> <span class="o">=</span> <span class="mi">987654321</span><span class="o">;</span>  <span class="c1">// ì¶©ë¶„íˆ í° ê°’</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">solution</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">graph</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[][]</span> <span class="n">dist</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">][</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>

        <span class="c1">// 1. ì´ˆê¸°í™”</span>

        <span class="c1">// 2. ê°„ì„  ì •ë³´ ì…ë ¥</span>

        <span class="c1">// 3. í”Œë¡œì´ë“œ-ì›Œì…œ ì•Œê³ ë¦¬ì¦˜</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">!=</span> <span class="no">INF</span> <span class="o">&amp;&amp;</span> <span class="n">dist</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">!=</span> <span class="no">INF</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">],</span>
                                              <span class="n">dist</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">+</span> <span class="n">dist</span><span class="o">[</span><span class="n">k</span><span class="o">][</span><span class="n">j</span><span class="o">]);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// 4. ê²°ê³¼ ì¶œë ¥</span>
        <span class="n">printDistances</span><span class="o">(</span><span class="n">dist</span><span class="o">,</span> <span class="n">n</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="-6ï¸âƒ£-ì‹œê°„ë³µì¡ë„ì™€-ê³µê°„ë³µì¡ë„">ğŸ“ˆ 6ï¸âƒ£ ì‹œê°„ë³µì¡ë„ì™€ ê³µê°„ë³µì¡ë„</h2>

<h3 id="-ì‹œê°„ë³µì¡ë„">ğŸ’¡ ì‹œê°„ë³µì¡ë„</h3>

<table>
  <thead>
    <tr>
      <th>ì—°ì‚°</th>
      <th>ë³µì¡ë„</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>í”Œë¡œì´ë“œ-ì›Œì…œ</strong></td>
      <td>O(VÂ³)</td>
      <td>3ì¤‘ forë¬¸</td>
    </tr>
    <tr>
      <td><strong>ì´ˆê¸°í™”</strong></td>
      <td>O(VÂ²)</td>
      <td>2ì°¨ì› ë°°ì—´ ì´ˆê¸°í™”</td>
    </tr>
    <tr>
      <td><strong>ì „ì²´</strong></td>
      <td>O(VÂ³)</td>
      <td>í”Œë¡œì´ë“œ-ì›Œì…œì´ ì§€ë°°ì </td>
    </tr>
  </tbody>
</table>

<h3 id="-ê³µê°„ë³µì¡ë„">ğŸ’¡ ê³µê°„ë³µì¡ë„</h3>

<table>
  <thead>
    <tr>
      <th>ìë£Œêµ¬ì¡°</th>
      <th>í¬ê¸°</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ê±°ë¦¬ ë°°ì—´</strong></td>
      <td>O(VÂ²)</td>
      <td>dist[n][n]</td>
    </tr>
    <tr>
      <td><strong>ê²½ë¡œ ë°°ì—´</strong></td>
      <td>O(VÂ²)</td>
      <td>next[n][n] (ì„ íƒì )</td>
    </tr>
    <tr>
      <td><strong>ì „ì²´</strong></td>
      <td>O(VÂ²)</td>
      <td>2ì°¨ì› ë°°ì—´</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="ï¸-7ï¸âƒ£-ë‹¤ìµìŠ¤íŠ¸ë¼ì™€ì˜-ë¹„êµ">âš–ï¸ 7ï¸âƒ£ ë‹¤ìµìŠ¤íŠ¸ë¼ì™€ì˜ ë¹„êµ</h2>

<h3 id="-í•µì‹¬-ì°¨ì´ì ">ğŸ’¡ í•µì‹¬ ì°¨ì´ì </h3>

<table>
  <thead>
    <tr>
      <th>êµ¬ë¶„</th>
      <th>í”Œë¡œì´ë“œ-ì›Œì…œ</th>
      <th>ë‹¤ìµìŠ¤íŠ¸ë¼</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ëª©ì </strong></td>
      <td>ëª¨ë“  ìŒ ìµœë‹¨ ê²½ë¡œ</td>
      <td>í•œ ì •ì ì—ì„œ ëª¨ë“  ì •ì ìœ¼ë¡œ</td>
    </tr>
    <tr>
      <td><strong>ì‹œê°„ë³µì¡ë„</strong></td>
      <td>O(VÂ³)</td>
      <td>O((V+E)logV)</td>
    </tr>
    <tr>
      <td><strong>ê³µê°„ë³µì¡ë„</strong></td>
      <td>O(VÂ²)</td>
      <td>O(V)</td>
    </tr>
    <tr>
      <td><strong>ìŒìˆ˜ ê°„ì„ </strong></td>
      <td>ê°€ëŠ¥ (ìŒìˆ˜ ì‚¬ì´í´ ì œì™¸)</td>
      <td>ë¶ˆê°€ëŠ¥</td>
    </tr>
    <tr>
      <td><strong>êµ¬í˜„ ë‚œì´ë„</strong></td>
      <td>ë§¤ìš° ì‰¬ì›€</td>
      <td>ì¤‘ê°„ (ìš°ì„ ìˆœìœ„ í)</td>
    </tr>
    <tr>
      <td><strong>ì ìš© ìƒí™©</strong></td>
      <td>ì •ì ì´ ì ì„ ë•Œ (V â‰¤ 500)</td>
      <td>ì •ì ì´ ë§ì„ ë•Œ, íŠ¹ì • ì¶œë°œì </td>
    </tr>
  </tbody>
</table>

<h3 id="-ì–¸ì œ-ë¬´ì—‡ì„-ì“¸ê¹Œ">ğŸ’¡ ì–¸ì œ ë¬´ì—‡ì„ ì“¸ê¹Œ?</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âœ… í”Œë¡œì´ë“œ-ì›Œì…œì„ ì“¸ ë•Œ</span>
<span class="k">if</span> <span class="o">(</span><span class="n">ëª¨ë“ </span> <span class="n">ì •ì </span> <span class="n">ìŒì˜</span> <span class="n">ìµœë‹¨</span> <span class="n">ê±°ë¦¬ê°€</span> <span class="n">í•„ìš”</span> <span class="o">&amp;&amp;</span> <span class="n">ì •ì </span> <span class="n">ìˆ˜</span> <span class="err">â‰¤</span> <span class="mi">500</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">í”Œë¡œì´ë“œì›Œì…œ</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">// âœ… ë‹¤ìµìŠ¤íŠ¸ë¼ë¥¼ ì“¸ ë•Œ</span>
<span class="k">if</span> <span class="o">(</span><span class="n">íŠ¹ì •</span> <span class="n">ì¶œë°œì ì—ì„œ</span> <span class="n">ëª¨ë“ </span> <span class="n">ì •ì ê¹Œì§€</span> <span class="o">&amp;&amp;</span> <span class="n">ìŒìˆ˜</span> <span class="n">ê°„ì„ </span> <span class="n">ì—†ìŒ</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ë‹¤ìµìŠ¤íŠ¸ë¼</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">// âœ… ë²¨ë§Œ-í¬ë“œë¥¼ ì“¸ ë•Œ</span>
<span class="k">if</span> <span class="o">(</span><span class="n">ìŒìˆ˜</span> <span class="n">ê°„ì„ </span> <span class="n">ìˆìŒ</span> <span class="o">&amp;&amp;</span> <span class="n">ìŒìˆ˜</span> <span class="n">ì‚¬ì´í´</span> <span class="n">ê°ì§€</span> <span class="n">í•„ìš”</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ë²¨ë§Œí¬ë“œ</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="-8ï¸âƒ£-ì‹¤ì „-ë¬¸ì œ-ì ìš©">ğŸ¯ 8ï¸âƒ£ ì‹¤ì „ ë¬¸ì œ ì ìš©</h2>

<h3 id="-ëŒ€í‘œ-ë¬¸ì œ-ìœ í˜•">ğŸ’¡ ëŒ€í‘œ ë¬¸ì œ ìœ í˜•</h3>

<table>
  <thead>
    <tr>
      <th>ìœ í˜•</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ë¬¸ì œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ëª¨ë“  ìŒ ìµœë‹¨ ê²½ë¡œ</strong></td>
      <td>ëª¨ë“  ë„ì‹œ ê°„ ìµœë‹¨ ê±°ë¦¬</td>
      <td>ë°±ì¤€ 11404 í”Œë¡œì´ë“œ</td>
    </tr>
    <tr>
      <td><strong>ê²½ìœ ì§€ ë¬¸ì œ</strong></td>
      <td>íŠ¹ì • ê²½ìœ ì§€ë¥¼ ê±°ì³ì•¼ í•  ë•Œ</td>
      <td>í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ìˆœìœ„</td>
    </tr>
    <tr>
      <td><strong>ì—°ê²°ì„± íŒë‹¨</strong></td>
      <td>ëª¨ë“  ë…¸ë“œê°€ ì—°ê²°ë˜ì–´ ìˆëŠ”ê°€?</td>
      <td>ë°±ì¤€ 1389 ì¼€ë¹ˆ ë² ì´ì»¨</td>
    </tr>
    <tr>
      <td><strong>ìµœë‹¨ ê²½ë¡œ ê°œìˆ˜</strong></td>
      <td>ìµœë‹¨ ê²½ë¡œê°€ ëª‡ ê°œì¸ê°€?</td>
      <td>ë°±ì¤€ 1613 ì—­ì‚¬</td>
    </tr>
  </tbody>
</table>

<h3 id="-ì²´í¬ë¦¬ìŠ¤íŠ¸">ğŸ’¡ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>

<p>í”Œë¡œì´ë“œ-ì›Œì…œ ë¬¸ì œë¥¼ í’€ ë•Œ í™•ì¸í•  ê²ƒ:</p>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ì •ì  ìˆ˜ê°€ 500 ì´í•˜ì¸ê°€? (ì•„ë‹ˆë©´ ë‹¤ìµìŠ¤íŠ¸ë¼ ê³ ë ¤)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ëª¨ë“  ìŒì˜ ìµœë‹¨ ê±°ë¦¬ê°€ í•„ìš”í•œê°€?</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ìŒìˆ˜ ê°„ì„ ì´ ìˆëŠ”ê°€?</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ìŒìˆ˜ ì‚¬ì´í´ì„ ê°ì§€í•´ì•¼ í•˜ëŠ”ê°€?</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />INF ê°’ì„ ì¶©ë¶„íˆ í¬ê²Œ ì„¤ì •í–ˆëŠ”ê°€?</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ì¤‘ë³µ ê°„ì„  ì²˜ë¦¬ë¥¼ í–ˆëŠ”ê°€?</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />kê°€ ê°€ì¥ ë°”ê¹¥ ë£¨í”„ì¸ê°€?</li>
</ul>

<hr />]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="algorithm" /><summary type="html"><![CDATA[í”Œë¡œì´ë“œ-ì›Œì…œ ì•Œê³ ë¦¬ì¦˜ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì 2025 íšŒê³ ] ì‹¤ì‹œê°„ ë§¤ì¹­ ì‹œìŠ¤í…œ, ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë˜ ì´ì•¼ê¸°</title><link href="https://nan0silver.github.io/projectdiary/2025-12-25-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì 2025 íšŒê³ ] ì‹¤ì‹œê°„ ë§¤ì¹­ ì‹œìŠ¤í…œ, ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë˜ ì´ì•¼ê¸°" /><published>2025-12-25T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-12-25-diary/"><![CDATA[<ul>
  <li><a href="#ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
  <li><a href="#1-ì²˜ìŒ-ê·¸ë¦°-ê·¸ë¦¼">1. ì²˜ìŒ ê·¸ë¦° ê·¸ë¦¼</a></li>
  <li><a href="#2-redis-ëŒ€ê¸°ì—´-ìƒê°ë³´ë‹¤-ë³µì¡í–ˆë‹¤">2. Redis ëŒ€ê¸°ì—´, ìƒê°ë³´ë‹¤ ë³µì¡í–ˆë‹¤</a></li>
  <li><a href="#3-ë§¤ì¹­-ì•Œê³ ë¦¬ì¦˜ì˜-ë”œë ˆë§ˆ">3. ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ì˜ ë”œë ˆë§ˆ</a></li>
  <li><a href="#4-ì•Œë¦¼ì´-ì•ˆ-ê°€ìš”">4. â€œì•Œë¦¼ì´ ì•ˆ ê°€ìš”â€</a></li>
  <li><a href="#5-ë™ì‹œì„±ì˜-ëŠª">5. ë™ì‹œì„±ì˜ ëŠª</a></li>
  <li><a href="#6-dbì™€-redis-ì‚¬ì´ì—ì„œ">6. DBì™€ Redis ì‚¬ì´ì—ì„œ</a></li>
  <li><a href="#7-ë°°ìš´-ê²ƒë“¤">7. ë°°ìš´ ê²ƒë“¤</a></li>
</ul>

<hr />

<h2 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</h2>

<p>â€œë§¤ì¹­ì´ìš”? ê·¸ëƒ¥ ëŒ€ê¸°ì—´ ë§Œë“¤ê³ , 2ëª… ë˜ë©´ ì—°ê²°í•˜ë©´ ë˜ëŠ” ê±° ì•„ë‹ˆì—ìš”?â€</p>

<p>ì²˜ìŒì— ë‚˜ë„ ê·¸ë ‡ê²Œ ìƒê°í–ˆë‹¤. ë²„íŠ¼ í•˜ë‚˜ ëˆ„ë¥´ë©´ ë§¤ì¹­ë˜ê³ , ë°”ë¡œ í†µí™” ì‹œì‘. ê°„ë‹¨í•˜ì§€ ì•Šë‚˜?</p>

<p>ê·¸ëŸ°ë° ë§‰ìƒ ë§Œë“¤ê¸° ì‹œì‘í•˜ë‹ˆê¹Œâ€¦ ì „í˜€ ê°„ë‹¨í•˜ì§€ ì•Šì•˜ë‹¤.</p>

<hr />

<h2 id="1-ì²˜ìŒ-ê·¸ë¦°-ê·¸ë¦¼">1. ì²˜ìŒ ê·¸ë¦° ê·¸ë¦¼</h2>

<p>ê°€ì¥ ë¨¼ì € ê·¸ë¦° ê±´ ì´ëŸ° íë¦„ì´ì—ˆë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ì‚¬ìš©ìê°€ "ë§¤ì¹­ ì‹œì‘" ë²„íŠ¼ í´ë¦­
2. ëŒ€ê¸°ì—´ì— ë“¤ì–´ê°
3. ë‹¤ë¥¸ ì‚¬ëŒì´ ë“¤ì–´ì˜¤ë©´ ìë™ ë§¤ì¹­
4. í†µí™” ì‹œì‘!
</code></pre></div></div>

<p>ì–´ë µì§€ ì•Šì•„ ë³´ì˜€ë‹¤. ê·¸ë˜ì„œ ë°”ë¡œ ì½”ë”©ì„ ì‹œì‘í–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì²« ë²ˆì§¸ ì‹œë„</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">startMatching</span><span class="o">(</span><span class="nc">Long</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">queue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">userId</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">queue</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user1</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
        <span class="nc">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
        <span class="n">createCall</span><span class="o">(</span><span class="n">user1</span><span class="o">,</span> <span class="n">user2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ë‹ˆê¹Œ ì˜ ëë‹¤. â€œì˜¤, ì‰½ë„¤?â€ ì‹¶ì—ˆë‹¤.</p>

<p>ê·¸ëŸ°ë°â€¦</p>

<hr />

<h2 id="2-redis-ëŒ€ê¸°ì—´-ìƒê°ë³´ë‹¤-ë³µì¡í–ˆë‹¤">2. Redis ëŒ€ê¸°ì—´, ìƒê°ë³´ë‹¤ ë³µì¡í–ˆë‹¤</h2>

<h3 id="ê°™ì€-ì‚¬ëŒì´ë‘-ê³„ì†-ë§¤ì¹­ë¼ìš”">â€œê°™ì€ ì‚¬ëŒì´ë‘ ê³„ì† ë§¤ì¹­ë¼ìš”â€</h3>

<p>ì²« ë²ˆì§¸ ë¬¸ì œëŠ” ê¸ˆë°© ë°œê²¬ëë‹¤. í…ŒìŠ¤íŠ¸í•˜ë˜ ì¹œêµ¬ê°€ ë§í–ˆë‹¤.</p>

<p>â€œì–´â€¦ ë‚˜ ë°©ê¸ˆ ë§¤ì¹­ëœ ì‚¬ëŒì´ë‘ ë˜ ë§¤ì¹­ëëŠ”ë°?â€</p>

<p>ê·¸ì œì•¼ ê¹¨ë‹¬ì•˜ë‹¤. ê·¸ëƒ¥ ëœë¤ìœ¼ë¡œ ë§¤ì¹­í•˜ë©´ ë°©ê¸ˆ í†µí™”í•œ ì‚¬ëŒì´ë‘ ë˜ ë§Œë‚  ìˆ˜ ìˆë‹¤ëŠ” ê±¸.</p>

<p>â€œê·¸ëŸ¼ ëŒ€ê¸°ìˆœìœ¼ë¡œ í•˜ë©´ ë˜ê² ë„¤!â€</p>

<p>Listë¥¼ ì¨ì„œ ë¨¼ì € ì˜¨ ì‚¬ëŒë¶€í„° ë§¤ì¹­í•˜ë„ë¡ ë°”ê¿¨ë‹¤. ë¬¸ì œ í•´ê²°!</p>

<h3 id="10ë¶„ì§¸-ê¸°ë‹¤ë¦¬ê³ -ìˆëŠ”ë°ìš”">â€œ10ë¶„ì§¸ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ”ë°ìš”â€</h3>

<p>ê·¸ëŸ°ë° ì´ë²ˆì—” ë‹¤ë¥¸ ë¬¸ì œê°€ ìƒê²¼ë‹¤.</p>

<p>ìƒˆë²½ ì‹œê°„ëŒ€ì— ì‚¬ìš©ìê°€ ì ì„ ë•Œ, í•œ ëª…ì´ ë“¤ì–´ì™€ì„œ 10ë¶„ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì—ˆë‹¤. ìƒëŒ€ë°©ì´ ì•ˆ ì™€ì„œ.</p>

<p>â€œì•„â€¦ íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•˜ëŠ”êµ¬ë‚˜.â€</p>

<p>ê·¸ëŸ°ë° Listë¡œëŠ” â€œì–¸ì œ ë“¤ì–´ì™”ëŠ”ì§€â€ë¥¼ ì•Œ ìˆ˜ê°€ ì—†ì—ˆë‹¤. ê·¸ëƒ¥ ìˆœì„œë§Œ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ Redisì˜ <strong>Sorted Set(ZSET)</strong> ì„ ì•Œê²Œ ëë‹¤.</p>

<pre><code class="language-redis"># ë“¤ì–´ì˜¨ ì‹œê°ì„ ì ìˆ˜ë¡œ ì €ì¥
ZADD queue:music 1734840123456 user_101
ZADD queue:music 1734840125789 user_205
</code></pre>

<p>ì´ì œ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ë„ ë˜ê³ , ì˜¤ë˜ëœ ì‚¬ëŒ ì°¾ê¸°ë„ ì‰¬ì›Œì¡Œë‹¤.</p>

<h3 id="ëœë¤ë„-í•˜ê³ -ì‹¶ì€ë°ìš”">â€œëœë¤ë„ í•˜ê³  ì‹¶ì€ë°ìš”?â€</h3>

<p>ëŒ€ê¸°ìˆœë§Œ í•˜ë‹ˆê¹Œ ë„ˆë¬´ ì§€ë£¨í•˜ë‹¤ëŠ” í”¼ë“œë°±ì´ ì™”ë‹¤.</p>

<p>â€œê°€ë”ì€ ëœë¤ ë§¤ì¹­ë„ í•˜ë©´ ì¬ë°Œì„ ê²ƒ ê°™ì•„ìš”!â€</p>

<p>ZSETì˜ <code class="language-plaintext highlighter-rouge">ZRANDMEMBER</code> ëª…ë ¹ì–´ë¥¼ ë°œê²¬í–ˆë‹¤. ì™„ë²½í–ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ë˜ ê³ ë¯¼ì´ ìƒê²¼ë‹¤. í•­ìƒ ëœë¤? í•­ìƒ ëŒ€ê¸°ìˆœ? ì–´ë–»ê²Œ ì„ì§€?</p>

<hr />

<h2 id="3-ë§¤ì¹­-ì•Œê³ ë¦¬ì¦˜ì˜-ë”œë ˆë§ˆ">3. ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ì˜ ë”œë ˆë§ˆ</h2>

<h3 id="ê³µì •ì„±-vs-ë‹¤ì–‘ì„±">ê³µì •ì„± vs ë‹¤ì–‘ì„±</h3>

<p>ê³ ë¯¼ì„ ì •ë¦¬í•´ë´¤ë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ëŒ€ê¸°ìˆœë§Œ í•˜ë©´:
âœ… ê³µì •í•¨
âŒ ì§€ë£¨í•¨

ëœë¤ë§Œ í•˜ë©´:
âœ… ì¬ë¯¸ìˆìŒ
âŒ ì˜¤ë˜ ê¸°ë‹¤ë¦° ì‚¬ëŒ ë¶ˆê³µí‰
</code></pre></div></div>

<p>ê²°êµ­ <strong>í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹</strong>ì„ ì„ íƒí–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ëŒ€ê¸°ìˆœê³¼ ëœë¤ì„ ì ì ˆíˆ ì„ê¸°</span>
<span class="kt">boolean</span> <span class="n">useRandom</span> <span class="o">=</span> <span class="n">shouldUseRandom</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">useRandom</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ëœë¤ ë§¤ì¹­</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">// ëŒ€ê¸°ìˆœ ë§¤ì¹­</span>
<span class="o">}</span>
</code></pre></div></div>

<p>(ë¹„ìœ¨ì€ ì‚¬ì‹¤ ê°ìœ¼ë¡œ ì •í–ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„° ë³´ë©´ì„œ ì¡°ì •í•  ìƒê°ì´ë‹¤.)</p>

<h3 id="ìŠ¤ì¼€ì¤„ëŸ¬-vs-ì‹¤ì‹œê°„">ìŠ¤ì¼€ì¤„ëŸ¬ vs ì‹¤ì‹œê°„</h3>

<p>ë˜ ë‹¤ë¥¸ ê³ ë¯¼: ëˆ„ê°€ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ë§¤ì¹­ì„ ì‹œë„í• ê¹Œ? ì•„ë‹ˆë©´ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í• ê¹Œ?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì‹¤ì‹œê°„ ì‹œë„:
âœ… ë¹ ë¦„
âŒ íŠ¸ë˜í”½ ë§ìœ¼ë©´ ë¶€í•˜

ì£¼ê¸°ì  í™•ì¸:
âœ… ì•ˆì •ì 
âŒ ì•½ê°„ ëŠë¦¼
</code></pre></div></div>

<p>ì¼ë‹¨ <strong>ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬</strong>ë¡œ êµ¬í˜„í–ˆë‹¤. 1ë¶„ ì´ë‚´ ë§¤ì¹­ì´ ëª©í‘œì˜€ìœ¼ë‹ˆê¹Œ ì¶©ë¶„í–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Scheduled</span><span class="o">(</span><span class="n">fixedDelay</span> <span class="o">=</span> <span class="mi">30000</span><span class="o">)</span>  <span class="c1">// 30ì´ˆ</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processMatching</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ë§¤ì¹­ ë¡œì§</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="4-ì•Œë¦¼ì´-ì•ˆ-ê°€ìš”">4. â€œì•Œë¦¼ì´ ì•ˆ ê°€ìš”â€</h2>

<p>ë§¤ì¹­ì€ ë˜ëŠ”ë°, ì‚¬ìš©ìê°€ ëª¨ë¥¸ë‹¤ëŠ” ê²Œ ë¬¸ì œì˜€ë‹¤.</p>

<h3 id="websocketì˜-ë“±ì¥">WebSocketì˜ ë“±ì¥</h3>

<p>â€œì•Œë¦¼ ì–´ë–»ê²Œ ë³´ë‚´ì§€?â€</p>

<p>ì²˜ìŒì—” í´ë¼ì´ì–¸íŠ¸ê°€ ê³„ì† ì„œë²„ì— ë¬¼ì–´ë³´ëŠ” <strong>í´ë§</strong> ë°©ì‹ì„ ìƒê°í–ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì´ë ‡ê²Œ?</span>
<span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/matching/status</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span> <span class="c1">// 1ì´ˆë§ˆë‹¤</span>
</code></pre></div></div>

<p>ê·¸ëŸ°ë° ì´ê±´ ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì´ì—ˆë‹¤. ì„œë²„ë„ ë¶€ë‹´ìŠ¤ëŸ½ê³ .</p>

<p>ê·¸ë˜ì„œ <strong>WebSocket</strong>ì„ ì“°ê¸°ë¡œ í–ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// êµ¬ë…í•˜ê³  ê¸°ë‹¤ë¦¬ë©´ ì•Œë¦¼ì´ ì˜´</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s2">`/topic/matching/</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ë§¤ì¹­ ì™„ë£Œ!</span>
  <span class="nx">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">/call</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="íƒ€ì´ë°-ì´ìŠˆ">íƒ€ì´ë° ì´ìŠˆ</h3>

<p>ê·¸ëŸ°ë° ì—¬ê¸°ì„œ ë˜ í•¨ì •ì´ ìˆì—ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ë§¤ì¹­ ì™„ë£Œ â†’ DB ì €ì¥
2. WebSocket ì•Œë¦¼ ë°œì†¡
3. í´ë¼ì´ì–¸íŠ¸ê°€ í†µí™” ì •ë³´ ì¡°íšŒ
4. âŒ ì•„ì§ DBì— ì»¤ë°‹ ì•ˆ ë¨!
</code></pre></div></div>

<p>ì•Œë¦¼ì€ ë³´ëƒˆëŠ”ë° DBì—ëŠ” ì•„ì§ ë°ì´í„°ê°€ ì—†ëŠ” ìƒí™©.</p>

<p>í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì—ëŸ¬ê°€ ë‚¬ë‹¤. â€œí†µí™”ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.â€</p>

<p><strong>í•´ê²°:</strong> íŠ¸ëœì­ì…˜ ì»¤ë°‹ í›„ì— ì•Œë¦¼ ë³´ë‚´ê¸°</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// DB ì»¤ë°‹ ì„±ê³µ í›„ì—ë§Œ ì•Œë¦¼</span>
<span class="nc">TransactionSynchronizationManager</span><span class="o">.</span><span class="na">registerSynchronization</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">TransactionSynchronization</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterCommit</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">// ì´ì œì•¼ ì•Œë¦¼ ë°œì†¡</span>
            <span class="n">sendNotification</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">);</span>
</code></pre></div></div>

<p>ì´ ë¶€ë¶„ì€ Spring ë¬¸ì„œë¥¼ ë’¤ì ¸ê°€ë©° ì°¾ì•˜ë‹¤. â€œíŠ¸ëœì­ì…˜ ë™ê¸°í™”â€ë¼ëŠ” ê°œë…ì„ ì²˜ìŒ ì•Œì•˜ë‹¤.</p>

<hr />

<h2 id="5-ë™ì‹œì„±ì˜-ëŠª">5. ë™ì‹œì„±ì˜ ëŠª</h2>

<p>ë¡œì»¬ì—ì„œëŠ” ì˜ ë˜ë˜ ê²Œ, ë°°í¬í•˜ë‹ˆê¹Œ ë¬¸ì œê°€ ìƒê²¼ë‹¤.</p>

<h3 id="ì €-ë‘-ëª…ì´ë‘-ë™ì‹œì—-ë§¤ì¹­ëì–´ìš”">â€œì € ë‘ ëª…ì´ë‘ ë™ì‹œì— ë§¤ì¹­ëì–´ìš”â€</h3>

<p>í•œ ì‚¬ìš©ìê°€ ë‘ ê°œì˜ í†µí™”ì— ë™ì‹œì— ë§¤ì¹­ë˜ëŠ” ë²„ê·¸ì˜€ë‹¤.</p>

<p>ì›ì¸ì„ ì°¾ì•„ë³´ë‹ˆâ€¦ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë§¤ì¹­ ë¡œì§ì„ ì‹¤í–‰í•˜ë©´ì„œ ìƒê¸´ ë¬¸ì œì˜€ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ìŠ¤ë ˆë“œ A] ì‚¬ìš©ì 101, 102 ë§¤ì¹­ ì‹œì‘
[ìŠ¤ë ˆë“œ B] ì‚¬ìš©ì 101, 103 ë§¤ì¹­ ì‹œì‘
     â†“
ì‚¬ìš©ì 101ì´ ë‘ ë²ˆ ë§¤ì¹­ë¨!
</code></pre></div></div>

<p><strong>í•´ê²°:</strong> ì‚¬ìš©ì ìƒíƒœ ì²´í¬</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// "ë‚˜ ì§€ê¸ˆ ë§¤ì¹­ ì¤‘ì´ì•¼" í‘œì‹œ</span>
<span class="nc">String</span> <span class="n">lockKey</span> <span class="o">=</span> <span class="s">"user:queued:"</span> <span class="o">+</span> <span class="n">userId</span><span class="o">;</span>

<span class="nc">Boolean</span> <span class="n">acquired</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">()</span>
    <span class="o">.</span><span class="na">setIfAbsent</span><span class="o">(</span><span class="n">lockKey</span><span class="o">,</span> <span class="s">"1"</span><span class="o">,</span> <span class="nc">Duration</span><span class="o">.</span><span class="na">ofMinutes</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>

<span class="k">if</span> <span class="o">(!</span><span class="n">acquired</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">AlreadyInQueueException</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Redisì˜ <code class="language-plaintext highlighter-rouge">SETNX</code> (Set if Not eXists) ëª…ë ¹ì–´ë¥¼ ì“°ë©´ ì›ìì ìœ¼ë¡œ ì²´í¬í•˜ê³  ì„¤ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ê±¸ ë°°ì› ë‹¤.</p>

<h3 id="ì¹´í…Œê³ ë¦¬ë³„-ë…ë¦½-ì²˜ë¦¬">ì¹´í…Œê³ ë¦¬ë³„ ë…ë¦½ ì²˜ë¦¬</h3>

<p>ìŒì•…, ì˜í™”, ê²Œì„â€¦ ì¹´í…Œê³ ë¦¬ê°€ ì—¬ëŸ¬ ê°œì¸ë°, í•˜ë‚˜ì˜ ì¹´í…Œê³ ë¦¬ì—ì„œ ì—ëŸ¬ê°€ ë‚˜ë©´ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ë„ ë‹¤ ì‹¤íŒ¨í–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ë¬¸ì œê°€ ìˆë˜ ì½”ë“œ</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processMatching</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Category</span> <span class="n">category</span> <span class="o">:</span> <span class="n">categories</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">matchCategory</span><span class="o">(</span><span class="n">category</span><span class="o">);</span>  <span class="c1">// í•˜ë‚˜ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ë¡¤ë°±!</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>í•´ê²°:</strong> ê° ì¹´í…Œê³ ë¦¬ë§ˆë‹¤ ë…ë¦½ì ì¸ íŠ¸ëœì­ì…˜</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span><span class="o">(</span><span class="n">propagation</span> <span class="o">=</span> <span class="nc">Propagation</span><span class="o">.</span><span class="na">REQUIRES_NEW</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">matchCategory</span><span class="o">(</span><span class="nc">Category</span> <span class="n">category</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ì´ì œ í•˜ë‚˜ ì‹¤íŒ¨í•´ë„ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ëŠ” ê³„ì† ì§„í–‰</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">REQUIRES_NEW</code>ë¼ëŠ” ì˜µì…˜ì´ ìˆë‹¤ëŠ” ê±¸ ì´ë•Œ ì•Œì•˜ë‹¤. Springì€ ì •ë§ ë°°ìš¸ ê²Œ ë§ë‹¤.</p>

<hr />

<h2 id="6-dbì™€-redis-ì‚¬ì´ì—ì„œ">6. DBì™€ Redis ì‚¬ì´ì—ì„œ</h2>

<h3 id="ì–´ë””ì—-ë­˜-ì €ì¥í• ê¹Œ">ì–´ë””ì— ë­˜ ì €ì¥í• ê¹Œ?</h3>

<p>ì²˜ìŒì—” Redisì—ë§Œ ëŒ€ê¸°ì—´ì„ ê´€ë¦¬í–ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Redisë§Œ ì‚¬ìš©:
âœ… ë¹ ë¦„
âŒ ì„œë²„ ì¬ì‹œì‘í•˜ë©´ ëŒ€ê¸°ì—´ ì‚¬ë¼ì§
âŒ ëˆ„ê°€ ì–¸ì œ ë“¤ì–´ì™”ëŠ”ì§€ ê¸°ë¡ ì—†ìŒ
</code></pre></div></div>

<p>ê·¸ë˜ì„œ DBì—ë„ ì €ì¥í•˜ê¸°ë¡œ í–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. DBì— ì €ì¥</span>
<span class="nc">MatchingQueue</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">matchingQueueRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">MatchingQueue</span><span class="o">(</span><span class="n">userId</span><span class="o">,</span> <span class="n">categoryId</span><span class="o">)</span>
<span class="o">);</span>

<span class="c1">// 2. Redisì—ë„ ì¶”ê°€</span>
<span class="n">redisService</span><span class="o">.</span><span class="na">enqueue</span><span class="o">(</span><span class="n">userId</span><span class="o">,</span> <span class="n">categoryId</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="ê·¸ëŸ°ë°-redis-ì¶”ê°€ê°€-ì‹¤íŒ¨í•˜ë©´">ê·¸ëŸ°ë° Redis ì¶”ê°€ê°€ ì‹¤íŒ¨í•˜ë©´?</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. DB ì €ì¥ ì„±ê³µ âœ…
2. Redis ì¶”ê°€ ì‹¤íŒ¨ âŒ
   â†“
ëŒ€ê¸°ì—´ì—ëŠ” ì—†ëŠ”ë° DBì—” ìˆëŠ” ìƒíƒœ
</code></pre></div></div>

<p>ì´ê²Œ ìƒê°ë³´ë‹¤ ê³¨ì¹˜ ì•„íŒ ë‹¤.</p>

<p>ì²˜ìŒì—” â€œë‘˜ ë‹¤ ì„±ê³µí•˜ê²Œ ë§Œë“¤ì–´ì•¼ì§€!â€ ë¼ê³  ìƒê°í–ˆë‹¤. ê·¸ëŸ°ë° í˜„ì‹¤ì€ ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤.</p>

<p>DBì™€ RedisëŠ” ì™„ì „íˆ ë‹¤ë¥¸ ì‹œìŠ¤í…œì´ë‹¤. í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¬¶ì„ ìˆ˜ ì—†ë‹¤.</p>

<p><strong>ê²°ë¡ :</strong> ì™„ë²½í•œ ì¼ì¹˜ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤.</p>

<p>ëŒ€ì‹  ì´ë ‡ê²Œ ì ‘ê·¼í–ˆë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. DBëŠ” "ê¸°ë¡ìš©"
   - ëˆ„ê°€ ì–¸ì œ ë§¤ì¹­ì„ ì‹œë„í–ˆëŠ”ì§€
   - í†µê³„ì™€ ë¶„ì„ìš©

2. RedisëŠ” "ì‹¤ì‹œê°„ ì²˜ë¦¬ìš©"
   - ì§€ê¸ˆ ëŒ€ê¸° ì¤‘ì¸ ì‚¬ëŒë“¤
   - ë¹ ë¥¸ ë§¤ì¹­ìš©

3. ë¶ˆì¼ì¹˜ê°€ ìƒê¸°ë©´?
   - Redis ì‹¤íŒ¨í•˜ë©´ ë¡œê·¸ ë‚¨ê¸°ê³ 
   - ì„œë²„ ì‹œì‘í•  ë•Œ DBì—ì„œ ë³µêµ¬
</code></pre></div></div>

<p>â€œìµœì„ â€ì„ â€œì™„ë²½â€ ëŒ€ì‹  ì„ íƒí–ˆë‹¤.</p>

<hr />

<h2 id="7-ë°°ìš´-ê²ƒë“¤">7. ë°°ìš´ ê²ƒë“¤</h2>

<h3 id="ê°„ë‹¨í•´-ë³´ì´ëŠ”-ê¸°ëŠ¥ë„-ê°„ë‹¨í•˜ì§€-ì•Šë‹¤">â€œê°„ë‹¨í•´ ë³´ì´ëŠ” ê¸°ëŠ¥ë„ ê°„ë‹¨í•˜ì§€ ì•Šë‹¤â€</h3>

<p>â€œë§¤ì¹­ ë²„íŠ¼ í•˜ë‚˜ë©´ ë˜ëŠ” ê±° ì•„ë‹ˆì•¼?â€</p>

<p>ì•„ë‹ˆì—ˆë‹¤. ì •ë§ ì•„ë‹ˆì—ˆë‹¤.</p>

<ul>
  <li>íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬</li>
  <li>ì¤‘ë³µ ë°©ì§€</li>
  <li>ì•Œë¦¼ ë°œì†¡</li>
  <li>ë™ì‹œì„± ì œì–´</li>
  <li>ë°ì´í„° ì¼ê´€ì„±</li>
  <li>ì„œë²„ ì¬ì‹œì‘ ëŒ€ì‘</li>
  <li>â€¦</li>
</ul>

<p>í•˜ë‚˜í•˜ë‚˜ ë‹¤ ì‹ ê²½ ì¨ì•¼ í•  ê²Œ ìˆì—ˆë‹¤.</p>

<h3 id="ì™„ë²½ì€-ì—†ë‹¤">â€œì™„ë²½ì€ ì—†ë‹¤â€</h3>

<p>ì²˜ìŒì—” â€œì™„ë²½í•˜ê²Œ ë§Œë“¤ì–´ì•¼ì§€!â€ ë¼ê³  ìƒê°í–ˆë‹¤.</p>

<p>DBì™€ Redisê°€ í•­ìƒ ì¼ì¹˜í•´ì•¼ í•˜ê³ , ì•Œë¦¼ì´ ì ˆëŒ€ ë¹ ì§€ë©´ ì•ˆ ë˜ê³ , ë§¤ì¹­ì´ 1ì´ˆ ë§Œì— ë˜ì–´ì•¼ í•˜ê³ â€¦</p>

<p>ê·¸ëŸ°ë° í˜„ì‹¤ì€:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- RedisëŠ” ê°€ë” ì—°ê²°ì´ ëŠê¸´ë‹¤
- ì•Œë¦¼ì€ ê°€ë” ì‹¤íŒ¨í•œë‹¤
- ë„¤íŠ¸ì›Œí¬ëŠ” ì–¸ì œë‚˜ ë¶ˆì•ˆì •í•˜ë‹¤
</code></pre></div></div>

<p>ì™„ë²½ì„ ì¶”êµ¬í•˜ë‹¤ê°€ ì˜ì›íˆ ëª» ëë‚¼ ë»”í–ˆë‹¤.</p>

<p><strong>ëŒ€ì‹  ì´ë ‡ê²Œ ì ‘ê·¼í–ˆë‹¤:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ… ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì˜ ì‘ë™í•˜ë©´ OK
âœ… ì‹¤íŒ¨í•´ë„ ë³µêµ¬í•  ìˆ˜ ìˆìœ¼ë©´ OK
âœ… ì‚¬ìš©ìê°€ í¬ê²Œ ë¶ˆí¸í•˜ì§€ ì•Šìœ¼ë©´ OK
</code></pre></div></div>

<h3 id="ë¬¸ì œëŠ”-ìš´ì˜í•˜ë©´ì„œ-ë°œê²¬ëœë‹¤">â€œë¬¸ì œëŠ” ìš´ì˜í•˜ë©´ì„œ ë°œê²¬ëœë‹¤â€</h3>

<p>ë¡œì»¬ì—ì„œëŠ” ëª°ëë˜ ë¬¸ì œë“¤:</p>

<ul>
  <li>ë™ì‹œì„± ì´ìŠˆ</li>
  <li>íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬</li>
  <li>ë©”ëª¨ë¦¬ ê´€ë¦¬</li>
  <li>ë„¤íŠ¸ì›Œí¬ ì§€ì—°</li>
</ul>

<p>ë‹¤ ìš´ì˜í•˜ë©´ì„œ ë§Œë‚¬ë‹¤.</p>

<p>ê·¸ë¦¬ê³  í•˜ë‚˜ì”© í•´ê²°í–ˆë‹¤.</p>

<h3 id="ì„¤ê³„ë³´ë‹¤-ì¤‘ìš”í•œ-ê±´-ê°œì„ ">â€œì„¤ê³„ë³´ë‹¤ ì¤‘ìš”í•œ ê±´ ê°œì„ â€</h3>

<p>ì²˜ìŒ ì„¤ê³„ê°€ ì™„ë²½í•  ìˆœ ì—†ë‹¤.</p>

<p>ì¤‘ìš”í•œ ê±´:</p>

<ul>
  <li>ë¬¸ì œë¥¼ ë¹¨ë¦¬ ë°œê²¬í•˜ê³ </li>
  <li>ë¹¨ë¦¬ ê³ ì¹˜ê³ </li>
  <li>ë‹¤ì‹œ ë°°í¬í•˜ëŠ” ê²ƒ</li>
</ul>

<p>ì´ ì‚¬ì´í´ì„ ë¹ ë¥´ê²Œ ëŒë¦¬ëŠ” ê²Œ í•µì‹¬ì´ì—ˆë‹¤.</p>

<h3 id="ê²€ìƒ‰ê³¼-ì‹œë„ì˜-í˜">â€œê²€ìƒ‰ê³¼ ì‹œë„ì˜ í˜â€</h3>

<p>ì´ ê³¼ì •ì—ì„œ ìƒˆë¡œ ë°°ìš´ ê²ƒë“¤:</p>

<ul>
  <li>Redis ZSET</li>
  <li>WebSocketê³¼ STOMP</li>
  <li>íŠ¸ëœì­ì…˜ ë™ê¸°í™”</li>
  <li>SETNX (ì›ìì  ì—°ì‚°)</li>
  <li>REQUIRES_NEW ì „íŒŒ ì†ì„±</li>
</ul>

<p>í•˜ë‚˜ë„ ëª°ëë‹¤. ë‹¤ ê²€ìƒ‰í•˜ê³ , ë¸”ë¡œê·¸ ì½ê³ , ì‹œë„í•˜ê³ , ì‹¤íŒ¨í•˜ê³ , ë‹¤ì‹œ í•´ë³´ë©´ì„œ ë°°ì› ë‹¤.</p>

<p>â€œëª¨ë¥´ëŠ” ê²Œ ë¶€ë„ëŸ¬ìš´ ê²Œ ì•„ë‹ˆë¼, ë°°ìš°ì§€ ì•ŠëŠ” ê²Œ ë¶€ë„ëŸ¬ìš´ ê²ƒâ€ì´ë¼ëŠ” ê±¸ ë‹¤ì‹œ í•œë²ˆ ëŠê¼ˆë‹¤.</p>

<hr />

<h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</h2>

<p>6ê°œì›” ì „ â€œë§¤ì¹­ ê¸°ëŠ¥ ë§Œë“¤ì–´ì•¼ì§€!â€ ë¼ê³  ìƒê°í–ˆì„ ë•ŒëŠ” ëª°ëë‹¤.</p>

<p>ì´ë ‡ê²Œ ë§ì€ ê³ ë¯¼ê³¼ ì‚½ì§ˆì´ í•„ìš”í•  ì¤„.</p>

<p>í•˜ì§€ë§Œ ëŒì•„ë³´ë‹ˆ, ì´ ê³¼ì •ì—ì„œ ì •ë§ ë§ì´ ë°°ì› ë‹¤.</p>

<ul>
  <li>Redisì˜ ë‹¤ì–‘í•œ ìë£Œêµ¬ì¡°</li>
  <li>WebSocket ì‹¤ì‹œê°„ í†µì‹ </li>
  <li>ë™ì‹œì„± ì œì–´</li>
  <li>ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì–´ë ¤ì›€</li>
  <li>ì™„ë²½í•¨ë³´ë‹¤ ì‹¤ìš©ì„±</li>
</ul>

<p>ê·¸ë¦¬ê³  ê°€ì¥ ì¤‘ìš”í•œ ê²ƒ:</p>

<p><strong>â€œëª¨ë¥´ëŠ” ê±´ ë¶€ë„ëŸ¬ìš´ ê²Œ ì•„ë‹ˆë‹¤. ë°°ìš°ë©´ ëœë‹¤.â€</strong></p>

<p>í•˜ë‚˜ì”© ê²€ìƒ‰í•˜ê³ , ë¸”ë¡œê·¸ ì½ê³ , ì‹œë„í•´ë³´ê³ , ì‹¤íŒ¨í•˜ê³ , ë‹¤ì‹œ í•´ë³´ê³ .</p>

<p>ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì¡Œë‹¤.</p>

<p>ì™„ë²½í•˜ì§„ ì•Šì§€ë§Œ, ì‘ë™í•œë‹¤.</p>

<p>ê·¸ë¦¬ê³  ê³„ì† ê°œì„ í•˜ê³  ìˆë‹¤.</p>

<hr />

<p>ë‹¤ìŒ í¸ì—ì„œëŠ” ì´ ì‹œìŠ¤í…œì„ ìš´ì˜í•˜ë©´ì„œ ë§Œë‚œ <strong>ì§„ì§œ ë¬¸ì œë“¤</strong>ì„ ì´ì•¼ê¸°í•´ë³´ë ¤ê³  í•œë‹¤.</p>

<ul>
  <li>Redis ë©”ëª¨ë¦¬ê°€ í„°ì¡Œë˜ ë‚ </li>
  <li>WebSocketì´ ë‹¤ ëŠì–´ì¡Œë˜ ë‚ </li>
  <li>ë§¤ì¹­ì´ ì•ˆ ë˜ëŠ” ë²„ê·¸ë¥¼ 3ì¼ ë™ì•ˆ ì°¾ì•˜ë˜ ì´ì•¼ê¸°</li>
</ul>

<p>ê¸°ëŒ€í•´ì£¼ì‹œê¸¸!</p>

<hr />

<p><strong>ì‹œë¦¬ì¦ˆ:</strong></p>

<ol>
  <li><a href="https://nan0silver.github.io/projectdiary/2025-12-20-diary/">ì™œ ì´ ê¸°ìˆ ë“¤ì„ ì„ íƒí–ˆë‚˜</a></li>
  <li><strong>ì‹¤ì‹œê°„ ë§¤ì¹­ ì‹œìŠ¤í…œ, ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë˜ ì´ì•¼ê¸°</strong> â† í˜„ì¬ ê¸€</li>
</ol>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA["ë²„íŠ¼ í•˜ë‚˜ë©´ ë˜ëŠ” ê±° ì•„ëƒ?" ë¼ê³  ìƒê°í–ˆë˜ ë‚˜ì—ê²Œ í˜„ì‹¤ì´ ì•Œë ¤ì¤€ ê²ƒë“¤]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì 2025 íšŒê³ ] ì‹¤ì‹œê°„ ìŒì„± ë§¤ì¹­ ì„œë¹„ìŠ¤, ì™œ ì´ ê¸°ìˆ ë“¤ì„ ì„ íƒí–ˆë‚˜</title><link href="https://nan0silver.github.io/projectdiary/2025-12-20-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì 2025 íšŒê³ ] ì‹¤ì‹œê°„ ìŒì„± ë§¤ì¹­ ì„œë¹„ìŠ¤, ì™œ ì´ ê¸°ìˆ ë“¤ì„ ì„ íƒí–ˆë‚˜" /><published>2025-12-20T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-12-20-diary/"><![CDATA[<ul>
  <li><a href="#ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
  <li><a href="#1-ì „ì²´-ê·¸ë¦¼-ìš°ë¦¬-ì„œë¹„ìŠ¤ê°€-í•„ìš”í•œ-ê²ƒ">1. ì „ì²´ ê·¸ë¦¼: ìš°ë¦¬ ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²ƒ</a></li>
  <li><a href="#2-backend-spring-boot--webfluxë¥¼-ì„ íƒí•œ-ì´ìœ ">2. Backend: Spring Boot + WebFluxë¥¼ ì„ íƒí•œ ì´ìœ </a></li>
  <li><a href="#3-database-mysqlì„-ì„ íƒí•œ-ì´ìœ ">3. Database: MySQLì„ ì„ íƒí•œ ì´ìœ </a></li>
  <li><a href="#4-cache--queue-redisë¥¼-ì„ íƒí•œ-ì´ìœ ">4. Cache &amp; Queue: Redisë¥¼ ì„ íƒí•œ ì´ìœ </a></li>
  <li><a href="#5-webrtc-agoraë¥¼-ì„ íƒí•œ-ì´ìœ ">5. WebRTC: Agoraë¥¼ ì„ íƒí•œ ì´ìœ </a></li>
  <li><a href="#6-file-storage-firebase-storageë¥¼-ì„ íƒí•œ-ì´ìœ ">6. File Storage: Firebase Storageë¥¼ ì„ íƒí•œ ì´ìœ </a></li>
  <li><a href="#7-frontend-react--capacitorë¥¼-ì„ íƒí•œ-ì´ìœ ">7. Frontend: React + Capacitorë¥¼ ì„ íƒí•œ ì´ìœ </a></li>
  <li><a href="#8-ë°°í¬-í™˜ê²½-aws--vercel">8. ë°°í¬ í™˜ê²½: AWS + Vercel</a></li>
  <li><a href="#9-ê¸°ìˆ -ì„ íƒì˜-ì›ì¹™">9. ê¸°ìˆ  ì„ íƒì˜ ì›ì¹™</a></li>
  <li><a href="#10-ë§ˆì¹˜ë©°">10. ë§ˆì¹˜ë©°</a></li>
</ul>

<hr />

<h2 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</h2>

<p>â€œê´€ì‹¬ì‚¬ ê¸°ë°˜ 1:1 ëœë¤ ìŒì„± í†µí™”â€ë¼ëŠ” ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë ¸ì„ ë•Œ, ê°€ì¥ ë¨¼ì € ë“  ìƒê°ì€ â€œì–´ë–»ê²Œ êµ¬í˜„í•˜ì§€?â€ì˜€ë‹¤. í•™ë¶€ì™€ ì„ì‚¬ ê³¼ì •ì—ì„œ ë°°ìš´ ì´ë¡ ê³¼ í† ì´ í”„ë¡œì íŠ¸ ê²½í—˜ì€ ìˆì—ˆì§€ë§Œ, ì‹¤ì œ ì‚¬ìš©ìê°€ ì“¸ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ì²˜ìŒì´ì—ˆë‹¤.</p>

<p>ê¸°ìˆ  ìŠ¤íƒì„ ì„ íƒí•˜ëŠ” ê³¼ì •ì—ì„œ ìˆ˜ë§ì€ ë¸”ë¡œê·¸ ê¸€ì„ ì½ì—ˆê³ , ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ë¹„êµí–ˆë‹¤. í•˜ì§€ë§Œ ê²°êµ­ ê¹¨ë‹¬ì€ ê±´ <strong>â€œì •ë‹µì€ ì—†ë‹¤â€</strong>ëŠ” ê²ƒì´ì—ˆë‹¤. ê° ê¸°ìˆ ì€ ì¥ë‹¨ì ì´ ìˆê³ , ì¤‘ìš”í•œ ê±´ ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ ë§¥ë½ì—ì„œ ì–´ë–¤ ê²Œ ì í•©í•œê°€ì˜€ë‹¤.</p>

<p>ì´ ê¸€ì—ì„œëŠ” ë‚´ê°€ ì™œ ì´ëŸ° ì„ íƒì„ í–ˆëŠ”ì§€, ì–´ë–¤ ê³ ë¯¼ì„ í–ˆëŠ”ì§€ë¥¼ ì†”ì§í•˜ê²Œ ê³µìœ í•´ë³´ë ¤ í•œë‹¤.</p>

<hr />

<h2 id="1-ì „ì²´-ê·¸ë¦¼-ìš°ë¦¬-ì„œë¹„ìŠ¤ê°€-í•„ìš”í•œ-ê²ƒ">1. ì „ì²´ ê·¸ë¦¼: ìš°ë¦¬ ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ê²ƒ</h2>

<p>ê¸°ìˆ ì„ ì„ íƒí•˜ê¸° ì „ì—, ë¨¼ì € ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ íŠ¹ì„±ì„ ì •ë¦¬í–ˆë‹¤.</p>

<h3 id="í•µì‹¬-ìš”êµ¬ì‚¬í•­">í•µì‹¬ ìš”êµ¬ì‚¬í•­</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ì‹¤ì‹œê°„ì„±
   - ë§¤ì¹­ ëŒ€ê¸° ì‹œê°„ì„ ìµœì†Œí™” (ëª©í‘œ: 1ë¶„ ì´ë‚´)
   - ë§¤ì¹­ ì™„ë£Œ ì¦‰ì‹œ ì•Œë¦¼
   - ëŠê¹€ ì—†ëŠ” ìŒì„± í†µí™”

2. í™•ì¥ì„±
   - ì´ˆê¸°ì—” ì†Œê·œëª¨ì§€ë§Œ, ì‚¬ìš©ì ì¦ê°€ì— ëŒ€ì‘ ê°€ëŠ¥í•´ì•¼ í•¨
   - íŠ¸ë˜í”½ ê¸‰ì¦ ì‹œë‚˜ë¦¬ì˜¤ ê³ ë ¤

3. ìš´ì˜ í¸ì˜ì„±
   - ë¬¸ì œ ë°œìƒ ì‹œ ë¹ ë¥¸ íŒŒì•…ê³¼ ëŒ€ì‘
   - ëª¨ë‹ˆí„°ë§ê³¼ ë¡œê¹…
   - ë°°í¬ ìë™í™”

4. ë¹„ìš© íš¨ìœ¨ì„±
   - MVP ë‹¨ê³„ì—ì„œ ê³¼ë„í•œ ì¸í”„ë¼ ë¹„ìš© ì§€ì–‘
   - ì‚¬ìš©ëŸ‰ì— ë”°ë¥¸ íƒ„ë ¥ì  ë¹„ìš© êµ¬ì¡°
</code></pre></div></div>

<p>ì´ ë„¤ ê°€ì§€ ì¶•ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  ê¸°ìˆ  ì„ íƒì„ í‰ê°€í–ˆë‹¤.</p>

<hr />

<h2 id="2-backend-spring-boot--webfluxë¥¼-ì„ íƒí•œ-ì´ìœ ">2. Backend: Spring Boot + WebFluxë¥¼ ì„ íƒí•œ ì´ìœ </h2>

<h3 id="ì™œ-ë¹„ë™ê¸°ê°€-í•„ìš”í–ˆë‚˜">ì™œ ë¹„ë™ê¸°ê°€ í•„ìš”í–ˆë‚˜?</h3>

<p>ì²˜ìŒì—ëŠ” ìµìˆ™í•œ Spring MVCë¥¼ ì“¸ê¹Œ ê³ ë¯¼í–ˆë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ íŠ¹ì„±ì„ ìƒê°í•´ë³´ë‹ˆ WebFluxê°€ ë” ì í•©í•´ ë³´ì˜€ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì‹œë‚˜ë¦¬ì˜¤: í†µí™” ì¢…ë£Œ í›„ ë…¹ìŒ ì €ì¥</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">endCall</span><span class="o">(</span><span class="nc">Long</span> <span class="n">callId</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 1. í†µí™” ì¢…ë£Œ ì²˜ë¦¬</span>
    <span class="n">callService</span><span class="o">.</span><span class="na">endCall</span><span class="o">(</span><span class="n">callId</span><span class="o">);</span>

    <span class="c1">// 2. Agora API í˜¸ì¶œ (ì™¸ë¶€ API, 2-3ì´ˆ ì†Œìš”)</span>
    <span class="n">agoraService</span><span class="o">.</span><span class="na">stopRecording</span><span class="o">(</span><span class="n">callId</span><span class="o">);</span>  <span class="c1">// â† ì—¬ê¸°ì„œ ë¸”ë¡œí‚¹!</span>

    <span class="c1">// 3. í‰ê°€ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸</span>
    <span class="k">return</span> <span class="s">"redirect:/evaluation"</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë™ê¸° ë°©ì‹ì˜ ë¬¸ì œëŠ” Agora API ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” 2-3ì´ˆ ë™ì•ˆ ìŠ¤ë ˆë“œê°€ ë¸”ë¡œí‚¹ëœë‹¤ëŠ” ê±°ì˜€ë‹¤. 200ê°œ ìŠ¤ë ˆë“œë¡œ ë™ì‹œ 200ëª…ë§Œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ê³ , ëŒ€ê¸° ì‹œê°„ì´ ì¦ê°€í•˜ë©´ ì‚¬ìš©ì ê²½í—˜ì´ ì €í•˜ëœë‹¤.</p>

<p>ë¹„ë™ê¸° ë°©ì‹ì„ ì“°ë©´:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">Void</span><span class="o">&gt;</span> <span class="nf">endCall</span><span class="o">(</span><span class="nc">Long</span> <span class="n">callId</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">callService</span><span class="o">.</span><span class="na">endCall</span><span class="o">(</span><span class="n">callId</span><span class="o">)</span>
        <span class="o">.</span><span class="na">then</span><span class="o">(</span><span class="n">agoraService</span><span class="o">.</span><span class="na">stopRecording</span><span class="o">(</span><span class="n">callId</span><span class="o">))</span>  <span class="c1">// ë…¼ë¸”ë¡œí‚¹</span>
        <span class="o">.</span><span class="na">then</span><span class="o">();</span>
    <span class="c1">// ìŠ¤ë ˆë“œê°€ ì¦‰ì‹œ ë‹¤ë¥¸ ìš”ì²­ ì²˜ë¦¬ ê°€ëŠ¥</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="ì‹¤ì œ-ê²½í—˜-webfluxì˜-í•™ìŠµ-ê³¡ì„ ">ì‹¤ì œ ê²½í—˜: WebFluxì˜ í•™ìŠµ ê³¡ì„ </h3>

<p>ì†”ì§íˆ ë§í•˜ë©´, WebFluxëŠ” ì‰½ì§€ ì•Šì•˜ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âŒ ì´ë ‡ê²Œ í•˜ë©´ ì•ˆ ë¨</span>
<span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">).</span><span class="na">block</span><span class="o">();</span>  <span class="c1">// ë¸”ë¡œí‚¹!</span>
    <span class="k">return</span> <span class="nc">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•</span>
<span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  <span class="c1">// ë…¼ë¸”ë¡œí‚¹ ì²´ì¸</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">block()</code>ì„ ì“°ëŠ” ìˆœê°„ ë¹„ë™ê¸°ì˜ ì˜ë¯¸ê°€ ì‚¬ë¼ì§„ë‹¤. â€œReactiveí•˜ê²Œ ìƒê°í•˜ê¸°â€ê¹Œì§€ ì‹œê°„ì´ í•„ìš”í–ˆì§€ë§Œ, ìµìˆ™í•´ì§€ë‹ˆ ì™¸ë¶€ API í˜¸ì¶œì´ ë§ì€ ìš°ë¦¬ ì„œë¹„ìŠ¤ì— ë”± ë§ì•˜ë‹¤.</p>

<h3 id="ì–¸ì œ-webfluxë¥¼-ì“°ë©´-ì¢‹ì„ê¹Œ">ì–¸ì œ WebFluxë¥¼ ì“°ë©´ ì¢‹ì„ê¹Œ?</h3>

<p>ë‚´ ê²½í—˜ìƒ ì´ëŸ° ê²½ìš° WebFluxê°€ ì í•©í•˜ë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ… WebFlux ì¶”ì²œ:
- ì™¸ë¶€ API í˜¸ì¶œì´ ë§ì€ ì„œë¹„ìŠ¤
- WebSocket ë“± ì‹¤ì‹œê°„ í†µì‹  í•„ìš”
- I/O ëŒ€ê¸° ì‹œê°„ì´ ê¸´ ì‘ì—…
- ë™ì‹œ ì ‘ì†ìê°€ ë§ì€ ì„œë¹„ìŠ¤

âŒ WebFlux ë¹„ì¶”ì²œ:
- CPU ì§‘ì•½ì  ì‘ì—… (ì´ë¯¸ì§€ ì²˜ë¦¬, ì•”í˜¸í™” ë“±)
- ê°„ë‹¨í•œ CRUD ì¤‘ì‹¬ ì„œë¹„ìŠ¤
- íŒ€ì´ Spring MVCì— ìµìˆ™í•˜ê³ , í•™ìŠµ ì‹œê°„ì´ ë¶€ì¡±í•œ ê²½ìš°
</code></pre></div></div>

<hr />

<h2 id="3-database-mysqlì„-ì„ íƒí•œ-ì´ìœ ">3. Database: MySQLì„ ì„ íƒí•œ ì´ìœ </h2>

<h3 id="mysql-vs-nosql-ê³ ë¯¼">MySQL vs NoSQL ê³ ë¯¼</h3>

<p>â€œìš”ì¦˜ íŠ¸ë Œë“œëŠ” NoSQL ì•„ë‹Œê°€?â€ë¼ëŠ” ìƒê°ë„ í–ˆë‹¤. MongoDBë¥¼ ì“¸ê¹Œ ì§„ì§€í•˜ê²Œ ê³ ë¯¼í–ˆë‹¤.</p>

<p>ìš°ë¦¬ ë°ì´í„°ì˜ íŠ¹ì„±ì„ ë¶„ì„í•´ë´¤ë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User â†â†’ Friendships â†â†’ User
  â†“
Calls â†â†’ CallRecordings
  â†“
CallEvaluations
</code></pre></div></div>

<p>ì¹œêµ¬ ê´€ê³„ëŠ” ì–‘ë°©í–¥ì´ê³  ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤ (ìš”ì²­ì¤‘/ìˆ˜ë½/ì°¨ë‹¨). í†µí™” ì´ë ¥ì€ ë‘ ì‚¬ìš©ì ê°„ì˜ ì—°ê²°ì´ê³ , í‰ê°€ëŠ” í†µí™”ì™€ 1:1 ê´€ê³„ë‹¤.</p>

<p>ì´ëŸ° êµ¬ì¡°ë¥¼ ë³´ë‹ˆ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ê°€ ë” ìì—°ìŠ¤ëŸ¬ì› ë‹¤.</p>

<h3 id="ë°ì´í„°-ì¼ê´€ì„±ì˜-ì¤‘ìš”ì„±">ë°ì´í„° ì¼ê´€ì„±ì˜ ì¤‘ìš”ì„±</h3>

<p>íŠ¹íˆ ì¹œêµ¬ ê´€ê³„ì—ì„œ ì¼ê´€ì„±ì´ ì¤‘ìš”í–ˆë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ì¹œêµ¬ ìš”ì²­ì€ ë°˜ë“œì‹œ ì–‘ìª½ ëª¨ë‘ ì €ì¥ë˜ì–´ì•¼ í•¨</span>
<span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">friendships</span> <span class="p">(</span><span class="n">user_a_id</span><span class="p">,</span> <span class="n">user_b_id</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'PENDING'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">friendships</span> <span class="p">(</span><span class="n">user_b_id</span><span class="p">,</span> <span class="n">user_a_id</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'REQUESTED'</span><span class="p">);</span>
<span class="k">COMMIT</span><span class="p">;</span>

<span class="c1">-- í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ë¡¤ë°±</span>
</code></pre></div></div>

<p>NoSQLì—ì„œëŠ” ì´ëŸ° íŠ¸ëœì­ì…˜ ë³´ì¥ì´ ìƒëŒ€ì ìœ¼ë¡œ ì•½í•˜ë‹¤.</p>

<h3 id="ì¿¼ë¦¬-ë³µì¡ë„">ì¿¼ë¦¬ ë³µì¡ë„</h3>

<p>í†µí™” ì´ë ¥ ì¡°íšŒ ê°™ì€ ê²½ìš°, JOINì´ í•„ìš”í–ˆë‹¤:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ë‚´ í†µí™” ì´ë ¥ + ìƒëŒ€ë°© ì •ë³´ + ì¹œêµ¬ ìƒíƒœ</span>
<span class="k">SELECT</span>
    <span class="k">c</span><span class="p">.</span><span class="o">*</span><span class="p">,</span>
    <span class="n">u</span><span class="p">.</span><span class="n">nickname</span> <span class="k">as</span> <span class="n">partner_name</span><span class="p">,</span>
    <span class="n">f</span><span class="p">.</span><span class="n">status</span> <span class="k">as</span> <span class="n">friend_status</span>
<span class="k">FROM</span> <span class="n">calls</span> <span class="k">c</span>
<span class="k">JOIN</span> <span class="n">users</span> <span class="n">u</span> <span class="k">ON</span> <span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">user_a_id</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span> <span class="k">OR</span> <span class="k">c</span><span class="p">.</span><span class="n">user_b_id</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">AND</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span> <span class="o">!=</span> <span class="p">:</span><span class="n">myId</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">friendships</span> <span class="n">f</span> <span class="k">ON</span> <span class="n">f</span><span class="p">.</span><span class="n">friend_id</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span> <span class="k">AND</span> <span class="n">f</span><span class="p">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">myId</span>
<span class="k">WHERE</span> <span class="k">c</span><span class="p">.</span><span class="n">user_a_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">myId</span> <span class="k">OR</span> <span class="k">c</span><span class="p">.</span><span class="n">user_b_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">myId</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="k">c</span><span class="p">.</span><span class="n">created_at</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>

<p>NoSQLì—ì„œ ì´ëŸ° ì¿¼ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ì—¬ëŸ¬ ë²ˆ ì¡°íšŒí•´ì•¼ í•œë‹¤.</p>

<h3 id="ê·¸ëŸ¼-nosqlì€-ì–¸ì œ">ê·¸ëŸ¼ NoSQLì€ ì–¸ì œ?</h3>

<p>ë‚´ê°€ ìƒê°í•˜ëŠ” NoSQL ì í•© ì¼€ì´ìŠ¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ… NoSQL ì¶”ì²œ:
- ìŠ¤í‚¤ë§ˆê°€ ìì£¼ ë³€í•˜ëŠ” ê²½ìš°
- ë‹¨ìˆœ Key-Value ì¡°íšŒê°€ ëŒ€ë¶€ë¶„
- ëŒ€ìš©ëŸ‰ ë¡œê·¸/ì´ë²¤íŠ¸ ë°ì´í„°
- ìˆ˜í‰ í™•ì¥ì´ í•„ìˆ˜ì ì¸ ê²½ìš°

âŒ NoSQL ë¹„ì¶”ì²œ:
- ë³µì¡í•œ ê´€ê³„ì™€ íŠ¸ëœì­ì…˜ í•„ìš”
- JOIN ì¿¼ë¦¬ê°€ ë§ì€ ê²½ìš°
- ë°ì´í„° ì¼ê´€ì„±ì´ ì¤‘ìš”í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
</code></pre></div></div>

<p>ê²°ë¡ ì€ MySQLë¡œ ì‹œì‘í•˜ê³ , í•„ìš”ì‹œ ìºì‹œ(Redis)ì™€ ì¡°í•©í•˜ê¸°ë¡œ í–ˆë‹¤.</p>

<hr />

<h2 id="4-cache--queue-redisë¥¼-ì„ íƒí•œ-ì´ìœ ">4. Cache &amp; Queue: Redisë¥¼ ì„ íƒí•œ ì´ìœ </h2>

<h3 id="redisì˜-ì„¸-ê°€ì§€-ì—­í• ">Redisì˜ ì„¸ ê°€ì§€ ì—­í• </h3>

<p>ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ì„œ RedisëŠ” ë‹¨ìˆœ ìºì‹œë¥¼ ë„˜ì–´ ì„¸ ê°€ì§€ ì—­í• ì„ í•œë‹¤:</p>

<ol>
  <li><strong>ë§¤ì¹­ ëŒ€ê¸°ì—´</strong> - ì¹´í…Œê³ ë¦¬ë³„ë¡œ ëŒ€ê¸° ì¤‘ì¸ ì‚¬ìš©ì ê´€ë¦¬</li>
  <li><strong>ì‹¤ì‹œê°„ ì„¸ì…˜ ê´€ë¦¬</strong> - WebSocket ì—°ê²° ì •ë³´</li>
  <li><strong>ìºì‹œ</strong> - ìì£¼ ì¡°íšŒë˜ëŠ” ì¹´í…Œê³ ë¦¬ ì •ë³´</li>
</ol>

<h3 id="ìë£Œêµ¬ì¡°-ì„ íƒ-zset-vs-set-vs-list">ìë£Œêµ¬ì¡° ì„ íƒ: ZSET vs SET vs List</h3>

<p>ë§¤ì¹­ ëŒ€ê¸°ì—´ì„ ì–´ë–¤ ìë£Œêµ¬ì¡°ë¡œ êµ¬í˜„í• ì§€ ê³ ë¯¼ì´ ë§ì•˜ë‹¤.</p>

<h4 id="ì‹œë„-1-list-lpushrpop">ì‹œë„ 1: List (LPUSH/RPOP)</h4>

<pre><code class="language-redis"># ì…ì¥
LPUSH wait:music userId_101

# ë§¤ì¹­ (2ëª… ì¶”ì¶œ)
RPOP wait:music  # userId_101
RPOP wait:music  # userId_205
</code></pre>

<p>ë¬¸ì œì ì€ ëŒ€ê¸° ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ë§Œ, íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ê°€ ì–´ë µê³  ëœë¤ ë§¤ì¹­ì´ ë¶ˆê°€ëŠ¥í–ˆë‹¤.</p>

<h4 id="ì‹œë„-2-set-saddspop">ì‹œë„ 2: Set (SADD/SPOP)</h4>

<pre><code class="language-redis"># ì…ì¥
SADD wait:music userId_101

# ë§¤ì¹­ (ëœë¤ 2ëª…)
SPOP wait:music 2
</code></pre>

<p>ëœë¤ì€ ì‰½ì§€ë§Œ ëŒ€ê¸° ìˆœì„œë¥¼ ì•Œ ìˆ˜ ì—†ì–´ì„œ ê³µì •ì„±ì´ ì—†ì—ˆë‹¤.</p>

<h4 id="ìµœì¢…-ì„ íƒ-zset-sorted-set">ìµœì¢… ì„ íƒ: ZSET (Sorted Set)</h4>

<pre><code class="language-redis"># ì…ì¥ (ì ìˆ˜ = ëŒ€ê¸° ì‹œì‘ ì‹œê°)
ZADD wait:music 1725430000456 userId_101
ZADD wait:music 1725430001234 userId_205

# ëŒ€ê¸°ìˆœ ë§¤ì¹­
ZPOPMIN wait:music 2

# ëœë¤ ë§¤ì¹­
ZRANDMEMBER wait:music 2
</code></pre>

<p>ì¥ì ì´ ëª…í™•í–ˆë‹¤:</p>

<ul>
  <li>ëŒ€ê¸° ì‹œê°„ ê¸°ì¤€ ì •ë ¬ âœ…</li>
  <li>ëŒ€ê¸°ìˆœ/ëœë¤ ëª¨ë‘ ê°€ëŠ¥ âœ…</li>
  <li>íƒ€ì„ì•„ì›ƒ ì‰¬ì›€ (ì ìˆ˜ ê¸°ì¤€ ì‚­ì œ) âœ…</li>
</ul>

<h3 id="ì™œ-ë³„ë„ì˜-ë©”ì‹œì§€-íë¥¼-ì•ˆ-ì¼ë‚˜">ì™œ ë³„ë„ì˜ ë©”ì‹œì§€ íë¥¼ ì•ˆ ì¼ë‚˜?</h3>

<p>RabbitMQ, Kafka ê°™ì€ ì „ë¬¸ ë©”ì‹œì§€ íë„ ê³ ë ¤í–ˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th>í•­ëª©</th>
      <th>Redis</th>
      <th>RabbitMQ</th>
      <th>Kafka</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>í•™ìŠµ ê³¡ì„ </td>
      <td>ë‚®ìŒ</td>
      <td>ì¤‘ê°„</td>
      <td>ë†’ìŒ</td>
    </tr>
    <tr>
      <td>ìš´ì˜ ë³µì¡ë„</td>
      <td>ë‚®ìŒ</td>
      <td>ì¤‘ê°„</td>
      <td>ë†’ìŒ</td>
    </tr>
    <tr>
      <td>ì„±ëŠ¥ (ìš°ë¦¬ ê·œëª¨)</td>
      <td>ì¶©ë¶„</td>
      <td>ì¶©ë¶„</td>
      <td>ê³¼í•¨</td>
    </tr>
    <tr>
      <td>ë¹„ìš©</td>
      <td>ë‚®ìŒ</td>
      <td>ì¤‘ê°„</td>
      <td>ë†’ìŒ</td>
    </tr>
  </tbody>
</table>

<p>ì´ˆê¸° ë‹¨ê³„ì—ì„œëŠ” Redisë¡œ ì¶©ë¶„í•˜ë‹¤ê³  íŒë‹¨í–ˆë‹¤. íŠ¸ë˜í”½ì´ ëŠ˜ë©´ ê·¸ë•Œ ì „í™˜ì„ ê³ ë ¤í•˜ê¸°ë¡œ í–ˆë‹¤. â€œê³¼ë„í•œ ì—”ì§€ë‹ˆì–´ë§â€ì„ ê²½ê³„í•´ì•¼ í•œë‹¤ê³  ìƒê°í–ˆë‹¤.</p>

<hr />

<h2 id="5-webrtc-agoraë¥¼-ì„ íƒí•œ-ì´ìœ ">5. WebRTC: Agoraë¥¼ ì„ íƒí•œ ì´ìœ </h2>

<h3 id="ì§ì ‘-êµ¬í˜„-vs-saas">ì§ì ‘ êµ¬í˜„ vs SaaS</h3>

<p>WebRTCë¥¼ ì§ì ‘ êµ¬í˜„í• ì§€, SaaSë¥¼ ì“¸ì§€ ê³ ë¯¼í–ˆë‹¤.</p>

<p>ì§ì ‘ êµ¬í˜„ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒê°í•´ë³´ë‹ˆ:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>í•„ìš”í•œ ê²ƒ:
- STUN/TURN ì„œë²„ êµ¬ì¶• ë° ìš´ì˜
- Signaling ì„œë²„ ê°œë°œ
- NAT Traversal ì²˜ë¦¬
- í†µí™” í’ˆì§ˆ ëª¨ë‹ˆí„°ë§
- ë…¹ìŒ ê¸°ëŠ¥ êµ¬í˜„

ì˜ˆìƒ ê°œë°œ ì‹œê°„: 2-3ê°œì›”
ì˜ˆìƒ ìš´ì˜ ë¶€ë‹´: ë†’ìŒ
</code></pre></div></div>

<p>SaaS ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>í•„ìš”í•œ ê²ƒ:
- SDK í†µí•© (1-2ì£¼)
- ì„¤ì • ë° í…ŒìŠ¤íŠ¸

ì˜ˆìƒ ê°œë°œ ì‹œê°„: 2ì£¼
ì˜ˆìƒ ìš´ì˜ ë¶€ë‹´: ë‚®ìŒ
</code></pre></div></div>

<p>MVPëŠ” ë¹ ë¥´ê²Œ ê²€ì¦í•˜ëŠ” ê²Œ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•´ì„œ SaaSë¥¼ ì„ íƒí–ˆë‹¤.</p>

<h3 id="agora-vs-twilio-vs-daily">Agora vs Twilio vs Daily</h3>

<p>WebRTC SaaSë¥¼ ë¹„êµ ë¶„ì„í–ˆë‹¤.</p>

<p>ë¹„êµ ê¸°ì¤€:</p>

<ol>
  <li><strong>í†µí™” í’ˆì§ˆ</strong> - ëª¨ë‘ ìš°ìˆ˜í•œ ìˆ˜ì¤€, í•œêµ­ ë¦¬ì „ ì§€ì› ì—¬ë¶€ê°€ ì¤‘ìš”</li>
  <li><strong>Cloud Recording</strong> - ìš°ë¦¬ ì„œë¹„ìŠ¤ì— í•„ìˆ˜ ê¸°ëŠ¥</li>
  <li><strong>ê°€ê²©</strong> - ì´ˆê¸° ë‹¨ê³„ë¼ ë¹„ìš© ë¯¼ê°</li>
  <li><strong>ë¬¸ì„œ ë° ì»¤ë®¤ë‹ˆí‹°</strong> - ë¬¸ì œ í•´ê²°ì´ ì‰¬ìš´ê°€</li>
</ol>

<p>ìµœì¢…ì ìœ¼ë¡œ Agoraë¥¼ ì„ íƒí•œ ì´ìœ :</p>

<ul>
  <li>Cloud Recording ê¸°ëŠ¥ì´ ê°•ë ¥ (Individual Mode ì§€ì›)</li>
  <li>Firebase Storage ì§ì ‘ ì—°ë™ ê°€ëŠ¥</li>
  <li>ê°€ê²© ê²½ìŸë ¥</li>
  <li>í•œêµ­ì–´ ë¬¸ì„œì™€ í•œêµ­ ë¦¬ì „ ì§€ì›</li>
</ul>

<p>ë‹¤ë§Œ Twilioë³´ë‹¤ ì»¤ë®¤ë‹ˆí‹°ê°€ ì‘ê³ , ì¼ë¶€ ê³ ê¸‰ ê¸°ëŠ¥ì€ Twilioê°€ ìš°ì„¸í•˜ë‹¤ëŠ” ì ì€ ê³ ë ¤ì‚¬í•­ì´ì—ˆë‹¤.</p>

<h3 id="ì‹¤ì œ-ì‚¬ìš©-í›„ê¸°">ì‹¤ì œ ì‚¬ìš© í›„ê¸°</h3>

<p>Agoraë¥¼ 6ê°œì›”ê°„ ì‚¬ìš©í•œ ê²½í—˜ì„ ì •ë¦¬í•˜ë©´:</p>

<p>ë§Œì¡±ìŠ¤ëŸ¬ìš´ ì :</p>

<ul>
  <li>SDK í†µí•©ì´ ìƒê°ë³´ë‹¤ ì‰¬ì›€</li>
  <li>ë…¹ìŒ ê¸°ëŠ¥ì´ ì•ˆì •ì </li>
  <li>í†µí™” í’ˆì§ˆ ì¢‹ìŒ</li>
</ul>

<p>ì•„ì‰¬ìš´ ì :</p>

<ul>
  <li>ì¼ë¶€ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ë¶ˆì¹œì ˆ</li>
  <li>ê³ ê¸‰ ì„¤ì • ì‹œ ì˜ì–´ ë¬¸ì„œ ì˜ì¡´ë„ ë†’ìŒ</li>
</ul>

<hr />

<h2 id="6-file-storage-firebase-storageë¥¼-ì„ íƒí•œ-ì´ìœ ">6. File Storage: Firebase Storageë¥¼ ì„ íƒí•œ ì´ìœ </h2>

<h3 id="ì™œ-aws-s3ê°€-ì•„ë‹Œê°€">ì™œ AWS S3ê°€ ì•„ë‹Œê°€?</h3>

<p>í†µí™” ë…¹ìŒ íŒŒì¼ì„ ì €ì¥í•  ê³³ì´ í•„ìš”í–ˆë‹¤. ê°€ì¥ ë¨¼ì € ë– ì˜¤ë¥¸ ê±´ AWS S3ì˜€ë‹¤.</p>

<p>ê³ ë¯¼í•œ ì :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AWS S3:
âœ… ì—…ê³„ í‘œì¤€
âœ… ë§ì€ ë ˆí¼ëŸ°ìŠ¤
âœ… ê°•ë ¥í•œ ê¸°ëŠ¥

Firebase Storage:
âœ… ì´ë¯¸ í”„ë¡œí•„ ì´ë¯¸ì§€ì— ì‚¬ìš© ì¤‘
âœ… GCS ê¸°ë°˜ (Agoraì™€ í˜¸í™˜ì„± ì¢‹ìŒ)
âœ… Firebase ìƒíƒœê³„ í™œìš© ê°€ëŠ¥
</code></pre></div></div>

<h3 id="ì‹¤ìš©ì -íŒë‹¨">ì‹¤ìš©ì  íŒë‹¨</h3>

<p>ê²°ì •ì ì´ì—ˆë˜ ê±´ <strong>ì´ë¯¸ ì‚¬ìš©í•˜ê³  ìˆë‹¤</strong>ëŠ” ì ì´ì—ˆë‹¤.</p>

<p>ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë„ì…í•˜ë©´:</p>

<ul>
  <li>í•™ìŠµ ì‹œê°„</li>
  <li>ì„¤ì • ë° í…ŒìŠ¤íŠ¸</li>
  <li>ìš´ì˜ ë…¸í•˜ìš° ì¶•ì </li>
  <li>ë¬¸ì œ í•´ê²° ê²½í—˜</li>
</ul>

<p>ì´ ëª¨ë“  ë¹„ìš©ì´ ë“ ë‹¤.</p>

<p>ê¸°ì¡´ ê¸°ìˆ ì„ í™œìš©í•˜ë©´:</p>

<ul>
  <li>ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥</li>
  <li>ì´ë¯¸ ìµìˆ™í•¨</li>
  <li>í†µí•© ê´€ë¦¬ í¸í•¨</li>
</ul>

<p>â€œìµœì‹ /ìœ ëª… != ìš°ë¦¬ì—ê²Œ ìµœì„ â€ì´ë¼ëŠ” ê±¸ ë‹¤ì‹œ í•œë²ˆ ê¹¨ë‹¬ì•˜ë‹¤.</p>

<h3 id="agoraì™€ì˜-í†µí•©">Agoraì™€ì˜ í†µí•©</h3>

<p>íŠ¹íˆ Agora Cloud Recordingì´ GCS(Google Cloud Storage)ì™€ ì§ì ‘ ì—°ë™ëœë‹¤ëŠ” ì ì´ ì¢‹ì•˜ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Agora â†’ Firebase Storage (GCS ê¸°ë°˜)
- HMAC ì¸ì¦ìœ¼ë¡œ ì§ì ‘ ì—…ë¡œë“œ
- ë³„ë„ì˜ íŒŒì¼ ì „ì†¡ ì„œë²„ ë¶ˆí•„ìš”
- ìë™ ì—…ë¡œë“œ (15ì´ˆë§ˆë‹¤ segment)
</code></pre></div></div>

<hr />

<h2 id="7-frontend-react--capacitorë¥¼-ì„ íƒí•œ-ì´ìœ ">7. Frontend: React + Capacitorë¥¼ ì„ íƒí•œ ì´ìœ </h2>

<h3 id="ì›¹ì¸ê°€-ì•±ì¸ê°€">ì›¹ì¸ê°€, ì•±ì¸ê°€?</h3>

<p>ì²˜ìŒë¶€í„° ëª¨ë°”ì¼ ì•±ì„ ëª©í‘œë¡œ í–ˆë‹¤. ìŒì„± í†µí™” íŠ¹ì„±ìƒ ì•±ì´ ë” ìì—°ìŠ¤ëŸ½ë‹¤ê³  íŒë‹¨í–ˆë‹¤.</p>

<p>ì„ íƒì§€ë¥¼ ì •ë¦¬í•˜ë©´:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ì›¹ (React)ë§Œ ê°œë°œ
   â†’ ë¹ ë¥´ì§€ë§Œ ì ‘ê·¼ì„± ë‚®ìŒ

2. React Native
   â†’ ë„¤ì´í‹°ë¸Œ ì„±ëŠ¥, ì›¹ ì½”ë“œ ì¬ì‚¬ìš© ë¶ˆê°€

3. Flutter
   â†’ ì„±ëŠ¥ ì¢‹ìŒ, Dart ìƒˆë¡œ í•™ìŠµ í•„ìš”

4. Capacitor (ì„ íƒ!)
   â†’ ì›¹ ì½”ë“œ 100% ì¬ì‚¬ìš©, WebView ê¸°ë°˜
</code></pre></div></div>

<h3 id="capacitorì˜-ì¥ì ">Capacitorì˜ ì¥ì </h3>

<p>ê°€ì¥ í° ì¥ì ì€ ë¹ ë¥¸ ê°œë°œì´ì—ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ê¸°ì¡´ React ì›¹ ì½”ë“œ</span>
<span class="kd">const</span> <span class="nx">CallPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">channel</span><span class="p">,</span> <span class="nx">setChannel</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="c1">// Agora WebRTC ë¡œì§</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Capacitor ì¶”ê°€ í›„</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="p">@</span><span class="nd">capacitor</span><span class="sr">/cor</span><span class="err">e
</span><span class="nx">npx</span> <span class="nx">cap</span> <span class="nx">add</span> <span class="nx">android</span> <span class="nx">ios</span>

<span class="c1">// ì•± ë¹Œë“œ ì™„ë£Œ!</span>
</code></pre></div></div>

<p>ë‹¨ì¼ ì½”ë“œë² ì´ìŠ¤ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒë„ í° ì¥ì ì´ì—ˆë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src/
  components/
    CallPage.tsx      â† ì›¹, Android, iOS ëª¨ë‘ ì‚¬ìš©
    MatchingButton.tsx
  lib/
    agora.ts          â† í•œ ë²ˆë§Œ ì‘ì„±
    websocket.ts
</code></pre></div></div>

<h3 id="ë„¤ì´í‹°ë¸Œ-ê¸°ëŠ¥-ì ‘ê·¼">ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ ì ‘ê·¼</h3>

<p>Capacitor í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ë„ ì‚¬ìš© ê°€ëŠ¥í–ˆë‹¤:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì¹´ì¹´ì˜¤ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">KakaoLoginPlugin</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">capacitor-kakao-login-plugin</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">KakaoLoginPlugin</span><span class="p">.</span><span class="nx">goLogin</span><span class="p">();</span>

<span class="c1">// êµ¬ê¸€ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GoogleAuth</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@codetrix-studio/capacitor-google-auth</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">GoogleAuth</span><span class="p">.</span><span class="nx">signIn</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="í•œê³„ì™€-íŠ¸ë ˆì´ë“œì˜¤í”„">í•œê³„ì™€ íŠ¸ë ˆì´ë“œì˜¤í”„</h3>

<p>WebView ì œì•½ì´ ìˆë‹¤:</p>

<ul>
  <li>ë„¤ì´í‹°ë¸Œ ì•±ë³´ë‹¤ ì„±ëŠ¥ ë–¨ì–´ì§</li>
  <li>ì¼ë¶€ ë¸Œë¼ìš°ì € ì œì•½ (CORS, Cookie ë“±)</li>
  <li>í”Œë«í¼ë³„ ì°¨ì´ (iOS vs Android)</li>
</ul>

<p>ê·¸ëŸ¼ì—ë„ ì„ íƒí•œ ì´ìœ ëŠ”:</p>

<ul>
  <li><strong>ì†ë„:</strong> 2-3ê°œì›” ë‹¨ì¶•</li>
  <li><strong>ìœ ì§€ë³´ìˆ˜:</strong> í•˜ë‚˜ì˜ ì½”ë“œë² ì´ìŠ¤</li>
  <li><strong>ê²€ì¦:</strong> MVP ë¹ ë¥´ê²Œ ì¶œì‹œ</li>
</ul>

<p>ì´ˆê¸°ì—ëŠ” Capacitorë¡œ ì‹œì‘í•˜ê³ , ì„±ì¥í•˜ë©´ ë¶€ë¶„ì ìœ¼ë¡œ ë„¤ì´í‹°ë¸Œ ì „í™˜ì„ ê³ ë ¤í•˜ê¸°ë¡œ í–ˆë‹¤.</p>

<hr />

<h2 id="8-ë°°í¬-í™˜ê²½-aws--vercel">8. ë°°í¬ í™˜ê²½: AWS + Vercel</h2>

<h3 id="backend-aws-ec2">Backend: AWS EC2</h3>

<p>â€œì™œ ì»¨í…Œì´ë„ˆ(ECS, EKS)ê°€ ì•„ë‹Œê°€?â€ë¼ëŠ” ì§ˆë¬¸ì„ ë°›ì„ ìˆ˜ ìˆëŠ”ë°:</p>

<p>ìš°ë¦¬ ìƒí™©:</p>

<ul>
  <li>ë‹¨ì¼ ì„œë²„ë¡œ ì¶©ë¶„</li>
  <li>ì˜¤í†  ìŠ¤ì¼€ì¼ë§ ì•„ì§ ë¶ˆí•„ìš”</li>
  <li>ìš´ì˜ ë³µì¡ë„ ìµœì†Œí™”</li>
</ul>

<p>ì„ íƒ:</p>

<ul>
  <li>EC2 ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤</li>
  <li>Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</li>
  <li>Letâ€™s Encrypt SSL</li>
</ul>

<p>ë¹„ìš©ë„ ê³ ë ¤í–ˆë‹¤. ECS/EKSëŠ” ì¶”ê°€ ë¹„ìš©ì´ ë“¤ê³ , Elastic Load Balancerë„ ê³ ì • ë¹„ìš©ì´ ë“ ë‹¤. EC2 ë‹¨ë…ì´ ê°€ì¥ ê²½ì œì ì´ì—ˆë‹¤.</p>

<h3 id="frontend-vercel">Frontend: Vercel</h3>

<p>ì™œ Vercelì¸ê°€?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âœ… ì¥ì :
- Git push â†’ ìë™ ë°°í¬
- HTTPS ê¸°ë³¸ ì œê³µ
- CDN ìë™ ì„¤ì •
- ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì¶©ë¶„

vs

AWS S3 + CloudFront:
- ì§ì ‘ ì„¤ì • í•„ìš”
- ë¹„ìš© ë°œìƒ
- CI/CD ì§ì ‘ êµ¬ì¶•
</code></pre></div></div>

<p>í”„ë¡ íŠ¸ì—”ë“œëŠ” ì •ì  íŒŒì¼ì´ë¯€ë¡œ Vercelì´ í›¨ì”¬ í¸í–ˆë‹¤.</p>

<hr />

<h2 id="9-ê¸°ìˆ -ì„ íƒì˜-ì›ì¹™">9. ê¸°ìˆ  ì„ íƒì˜ ì›ì¹™</h2>

<p>6ê°œì›”ê°„ì˜ ê²½í—˜ì„ ëŒì•„ë³´ë‹ˆ, ë‚´ê²ŒëŠ” ëª‡ ê°€ì§€ ì›ì¹™ì´ ìƒê²¼ë‹¤.</p>

<h3 id="ì›ì¹™-1-ë§¥ë½ì´-ê°€ì¥-ì¤‘ìš”í•˜ë‹¤">ì›ì¹™ 1: â€œë§¥ë½â€ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âŒ "ìš”ì¦˜ Aê°€ ëŒ€ì„¸ë‹ˆê¹Œ Aë¥¼ ì¨ì•¼ì§€"
âœ… "ìš°ë¦¬ ìƒí™©ì—ì„œëŠ” Bê°€ ë” ì í•©í•´"
</code></pre></div></div>

<p>ì˜ˆì‹œ:</p>

<ul>
  <li>KafkaëŠ” ê°•ë ¥í•˜ì§€ë§Œ ìš°ë¦¬ ê·œëª¨ì—ëŠ” ê³¼í•¨ â†’ Redis ì„ íƒ</li>
  <li>React NativeëŠ” ì¢‹ì§€ë§Œ ì›¹ ì½”ë“œ ì¬ì‚¬ìš© ì¤‘ìš” â†’ Capacitor ì„ íƒ</li>
</ul>

<h3 id="ì›ì¹™-2-mvpëŠ”-ë¹ ë¥´ê²Œ-í™•ì¥ì€-ì ì§„ì ìœ¼ë¡œ">ì›ì¹™ 2: MVPëŠ” ë¹ ë¥´ê²Œ, í™•ì¥ì€ ì ì§„ì ìœ¼ë¡œ</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì²˜ìŒë¶€í„° ì™„ë²½í•œ ì„¤ê³„ (X)
ë¹ ë¥¸ ê²€ì¦ â†’ ì ì§„ì  ê°œì„  (O)
</code></pre></div></div>

<p>ì‹¤ì œ ì ìš©:</p>

<ul>
  <li>ë‹¨ì¼ EC2ë¡œ ì‹œì‘ â†’ íŠ¸ë˜í”½ ì¦ê°€ ì‹œ í™•ì¥ ê³ ë ¤</li>
  <li>Redis ëŒ€ê¸°ì—´ â†’ í•„ìš”ì‹œ Kafka ì „í™˜</li>
  <li>Capacitor â†’ ì„±ì¥í•˜ë©´ ë¶€ë¶„ ë„¤ì´í‹°ë¸Œ</li>
</ul>

<h3 id="ì›ì¹™-3-ìµìˆ™í•¨ë„-ì¤‘ìš”í•œ-ê°€ì¹˜">ì›ì¹™ 3: â€œìµìˆ™í•¨â€ë„ ì¤‘ìš”í•œ ê°€ì¹˜</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ìƒˆë¡œìš´ ê¸°ìˆ  í•™ìŠµ ë¹„ìš© vs ìµìˆ™í•œ ê¸°ìˆ  í™œìš©

í•™ë¶€/ì„ì‚¬ì—ì„œ Spring ì‚¬ìš© ê²½í—˜
â†’ Spring Boot ì„ íƒì´ ìì—°ìŠ¤ëŸ¬ì›€
</code></pre></div></div>

<h3 id="ì›ì¹™-4-ë¹„ìš©ì€-í˜„ì‹¤ì -ì œì•½">ì›ì¹™ 4: ë¹„ìš©ì€ í˜„ì‹¤ì  ì œì•½</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì´ˆê¸° ë‹¨ê³„ì˜ ì¸í”„ë¼ ë¹„ìš©:
- EC2, RDS, Redis, Agora, Firebase
â†’ ì›” ìˆ˜ì‹­ ë‹¬ëŸ¬ ìˆ˜ì¤€ìœ¼ë¡œ í†µì œ

vs

ì´ìƒì  ì•„í‚¤í…ì²˜:
- ECS, ELB, CloudFront, Kafka...
â†’ ì›” ìˆ˜ë°± ë‹¬ëŸ¬
</code></pre></div></div>

<p>ì„œë¹„ìŠ¤ ê²€ì¦ì´ ìš°ì„ ì´ê³ , ì¸í”„ë¼ëŠ” í•„ìš” ì‹œ í™•ì¥í•˜ê¸°ë¡œ í–ˆë‹¤.</p>

<hr />

<h2 id="10-ë§ˆì¹˜ë©°">10. ë§ˆì¹˜ë©°</h2>

<p>ê¸°ìˆ  ì„ íƒì€ íŠ¸ë ˆì´ë“œì˜¤í”„ì˜ ì—°ì†ì´ì—ˆë‹¤.</p>

<ul>
  <li>ì„±ëŠ¥ vs ê°œë°œ ì†ë„</li>
  <li>ì´ìƒ vs í˜„ì‹¤</li>
  <li>ìµœì‹  ê¸°ìˆ  vs ìµìˆ™í•œ ê¸°ìˆ </li>
  <li>ë¹„ìš© vs í™•ì¥ì„±</li>
</ul>

<p>ì¤‘ìš”í•œ ê±´ â€œì •ë‹µâ€ì„ ì°¾ëŠ” ê²Œ ì•„ë‹ˆë¼, â€œìš°ë¦¬ì—ê²Œ ë§ëŠ” ë‹µâ€ì„ ì°¾ëŠ” ê²ƒì´ì—ˆë‹¤.</p>

<p>6ê°œì›”ê°„ ì´ ê¸°ìˆ ë“¤ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ìš´ì˜í•˜ë©° ì •ë§ ë§ì´ ë°°ì› ë‹¤.
ì„ íƒì´ ì™„ë²½í•˜ì§„ ì•Šì•˜ì§€ë§Œ, í›„íšŒëŠ” ì—†ë‹¤.
ê° ì„ íƒì˜ ì´ìœ ë¥¼ ëª…í™•íˆ ì•Œê³  ìˆê³ , í•„ìš”í•˜ë©´ ì–¸ì œë“  ë°”ê¿€ ìˆ˜ ìˆë‹¤ëŠ” í™•ì‹ ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤!</p>

<p><strong>â€œì™œ?â€ë¼ëŠ” ì§ˆë¬¸ì„ ëŠì„ì—†ì´ ë˜ì§€ì. ê·¸ ë‹µì´ ìŒ“ì´ë©´, ê·¸ê²Œ ë°”ë¡œ ìš°ë¦¬ì˜ ê¸°ìˆ  ì² í•™ì´ ëœë‹¤.</strong></p>

<hr />

<p><strong>ì‹œë¦¬ì¦ˆ:</strong></p>

<ol>
  <li><strong>ì™œ ì´ ê¸°ìˆ ë“¤ì„ ì„ íƒí–ˆë‚˜</strong> â† í˜„ì¬ ê¸€</li>
  <li><a href="https://nan0silver.github.io/projectdiary/2025-12-25-diary/">ì‹¤ì‹œê°„ ë§¤ì¹­ ì‹œìŠ¤í…œ ì„¤ê³„</a></li>
</ol>

<hr />

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://docs.spring.io/spring-framework/reference/web/webflux.html">Spring WebFlux ê³µì‹ ë¬¸ì„œ</a></li>
  <li><a href="https://redis.io/docs/data-types/">Redis ìë£Œêµ¬ì¡° ê°€ì´ë“œ</a></li>
  <li><a href="https://docs.agora.io/en/cloud-recording">Agora Cloud Recording</a></li>
  <li><a href="https://capacitorjs.com/docs">Capacitor ê³µì‹ ë¬¸ì„œ</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì»´í“¨í„°ê³µí•™ ì„ì‚¬ ì¶œì‹  ê°œë°œìê°€ ì²« ì‹¤ì „ í”„ë¡œì íŠ¸ì—ì„œ ë§ˆì£¼í•œ ê¸°ìˆ  ì„ íƒì˜ ê¸°ë¡]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Agora Cloud Recordingê³¼ Firebase Storageë¡œ ìŒì„± í†µí™” ë…¹ìŒ êµ¬í˜„í•˜ê¸°</title><link href="https://nan0silver.github.io/projectdiary/2025-11-24-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Agora Cloud Recordingê³¼ Firebase Storageë¡œ ìŒì„± í†µí™” ë…¹ìŒ êµ¬í˜„í•˜ê¸°" /><published>2025-11-24T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-24-diary/"><![CDATA[<p>â€˜ì¹œêµ¬í•˜ìâ€™ë¥¼ ê°œë°œí•˜ë©° í†µí™” ë…¹ìŒ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í–ˆë‹¤. AI ê°œë°œê³¼ í†µí™” ë¶„ì„ ë“± ì¶”í›„ ê¸°ëŠ¥ë“¤ì„ ìœ„í•´ í†µí™”ë¥¼ ë…¹ìŒí•˜ëŠ” ê²ƒì„ ì „ì œë¡œ êµ¬í˜„ì„ ì‹œì‘í–ˆë‹¤.</p>

<p>ì²˜ìŒì—ëŠ” ë‹¨ìˆœí•  ì¤„ ì•Œì•˜ëŠ”ë°, ìƒê°ë³´ë‹¤ ì—ëŸ¬ë„ ë§ì´ ë‚˜ê³  ì‹œí–‰ì°©ì˜¤ê°€ ë§ì•„ì„œ MVPì—ì„œ ì œì™¸í•˜ê³  ê°œë°œí–ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì–´ë–¤ ë¬¸ì œë“¤ì„ ê²ªì—ˆê³ , ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ë¥¼ ì •ë¦¬í•˜ë ¤ê³  í•œë‹¤.</p>

<h2 id="ëª©ì°¨">ëª©ì°¨</h2>

<ul>
  <li><a href="#1-ê¸°ìˆ -ìŠ¤íƒ-ì„ íƒ">1. ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ</a></li>
  <li><a href="#2-êµ¬í˜„-ê³¼ì •ì—ì„œ-ë§Œë‚œ-ë¬¸ì œë“¤">2. êµ¬í˜„ ê³¼ì •ì—ì„œ ë§Œë‚œ ë¬¸ì œë“¤</a></li>
  <li><a href="#3-ìµœì¢…-êµ¬ì¡°">3. ìµœì¢… êµ¬ì¡°</a></li>
  <li><a href="#4-ë°°ìš´-ì ">4. ë°°ìš´ ì </a></li>
  <li><a href="#5-ìš´ì˜-ì§€í‘œ">5. ìš´ì˜ ì§€í‘œ</a></li>
  <li><a href="#6-ë§ˆì¹˜ë©°">6. ë§ˆì¹˜ë©°</a></li>
  <li><a href="#ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</a></li>
</ul>

<hr />

<h2 id="1-ê¸°ìˆ -ìŠ¤íƒ-ì„ íƒ">1. ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ</h2>

<h3 id="11-ì™œ-agora-cloud-recordingì„-ì„ íƒí–ˆë‚˜">1.1. ì™œ Agora Cloud Recordingì„ ì„ íƒí–ˆë‚˜?</h3>

<p>ì²˜ìŒì— WebRTC ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•˜ê¸°ì— ì•ì„œ Recording êµ¬í˜„ì„ ê³ ë ¤í–ˆë‹¤. WebRTC ì¤‘ì—ëŠ” recordingì„ ì§€ì›í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ ìˆê³ , ì•„ë‹Œ ì„œë¹„ìŠ¤ê°€ ìˆì—ˆë‹¤. ê·¸ì¤‘ AgoraëŠ” Recording ì§€ì›ì´ ê°€ì¥ ë‹¤ì–‘í–ˆê³ , ê°€ê²©ë„ ì €ë ´í–ˆë‹¤.</p>

<p>Recordingì„ ì €ì¥í•˜ëŠ” ê²ƒì—ë„ ë§ì€ ì„ íƒì§€ê°€ ìˆì—ˆë‹¤:</p>

<ol>
  <li><strong>Agora ë°±ì—… ì €ì¥ì†Œ</strong>
    <ul>
      <li>ì œ3ì ìŠ¤í† ë¦¬ì§€ ì„¤ì •ì´ ì‹¤íŒ¨í•˜ë©´ ë°±ì—… ì„œë²„ì— <strong>24ì‹œê°„ ë™ì•ˆë§Œ</strong> ì„ì‹œ ì €ì¥</li>
      <li>ìš´ì˜ìš©ì´ ì•„ë‹ˆë¯€ë¡œ ë°˜ë“œì‹œ ì™¸ë¶€ ì €ì¥ì†Œ ì—°ë™ í•„ìš”</li>
    </ul>
  </li>
  <li><strong>AWS S3 ì§ì ‘ ì—°ë™</strong>
    <ul>
      <li>ê°€ì¥ ì¼ë°˜ì ì´ê³  ì•ˆì •ì ì¸ ë°©ë²•</li>
    </ul>
  </li>
  <li><strong>Firebase Storage (GCS ê¸°ë°˜)</strong>
    <ul>
      <li>ì´ë¯¸ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘ (í”„ë¡œí•„ ì´ë¯¸ì§€ ë“±)</li>
    </ul>
  </li>
</ol>

<p>ê³ ë¯¼ ëì— <strong>Firebase Storage</strong>ë¥¼ ì„ íƒí–ˆë‹¤:</p>

<ul>
  <li>ì´ë¯¸ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘ì´ì–´ì„œ ìµìˆ™í•¨</li>
  <li>GCS(Google Cloud Storage) ê¸°ë°˜ì´ë¼ Agoraì™€ í˜¸í™˜ì„±ì´ ì¢‹ìŒ</li>
  <li>Firebaseì˜ ë‹¤ë¥¸ ê¸°ëŠ¥ë“¤ê³¼ë„ ì˜ í†µí•©ë¨</li>
  <li>AWS S3ì™€ ë¹„ìš©ì´ ë¹„ìŠ·í•œ ìˆ˜ì¤€ (ì›” 1,000ë¶„ í†µí™” ê¸°ì¤€ ì•½ 80ì› ì°¨ì´)</li>
</ul>

<h3 id="12-individual-recording-mode-ì„ íƒ">1.2. Individual Recording Mode ì„ íƒ</h3>

<p>Agora Cloud Recordingì—ëŠ” ì—¬ëŸ¬ ëª¨ë“œê°€ ìˆë‹¤:</p>

<ul>
  <li><strong>Composite Mode</strong>: ëª¨ë“  ì‚¬ëŒì˜ ìŒì„±ì„ í•˜ë‚˜ë¡œ í•©ì¹¨</li>
  <li><strong>Individual Mode</strong>: ê° ì‚¬ìš©ìë³„ë¡œ ë³„ë„ ë…¹ìŒ</li>
</ul>

<p>ë‚˜ëŠ” <strong>Individual Mode</strong>ë¥¼ ì„ íƒí–ˆë‹¤. ì¶”í›„ ê° ì‚¬ìš©ìì˜ ìŒì„±ì„ ë”°ë¡œ ë¶„ì„í•  ìˆ˜ë„ ìˆê³ , ë” ìœ ì—°í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<h2 id="2-êµ¬í˜„-ê³¼ì •ì—ì„œ-ë§Œë‚œ-ë¬¸ì œë“¤">2. êµ¬í˜„ ê³¼ì •ì—ì„œ ë§Œë‚œ ë¬¸ì œë“¤</h2>

<h3 id="21-ë¹„ë™ê¸°-ì²˜ë¦¬-ì„¤ì •-ë¬¸ì œ">2.1. ë¹„ë™ê¸° ì²˜ë¦¬ ì„¤ì • ë¬¸ì œ</h3>

<p>ë…¹ìŒ ì‹œì‘/ì¤‘ì§€ëŠ” ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•´ì•¼ í–ˆë‹¤. ê·¸ëŸ°ë° Springì—ì„œ ì´ëŸ° ê²½ê³ ê°€ ë–´ë‹¤:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>More than one TaskExecutor bean found within the context,
and none is named <span class="s1">'taskExecutor'</span>
</code></pre></div></div>

<p><strong>ë¬¸ì œ:</strong></p>

<p><code class="language-plaintext highlighter-rouge">@Async</code>ë§Œ ì“°ë©´ Springì´ <code class="language-plaintext highlighter-rouge">SimpleAsyncTaskExecutor</code>ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ëŠ” ë§¤ë²ˆ ìƒˆ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë‹¤.</p>

<p>ë‚´ ê²½ìš°, ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ì— ì´ë¯¸ ì—¬ëŸ¬ ê°œì˜ <code class="language-plaintext highlighter-rouge">TaskExecutor</code> ë¹ˆì´ ì¡´ì¬í–ˆëŠ”ë° (<code class="language-plaintext highlighter-rouge">recordingTaskExecutor</code>, <code class="language-plaintext highlighter-rouge">matchingTaskExecutor</code> ë“±), ì–´ëŠ ê²ƒë„ <code class="language-plaintext highlighter-rouge">taskExecutor</code>ë¼ëŠ” ì´ë¦„ì„ ê°€ì§€ê³  ìˆì§€ ì•Šì•˜ë‹¤. Executorë¥¼ ì§€ì •í•˜ì§€ ì•Šê³  <code class="language-plaintext highlighter-rouge">@Async</code>ë§Œ ì‘ì„±í•˜ë‹ˆ Springì—ì„œ ê²½ê³ ë¥¼ ë³´ëƒˆë‹¤.</p>

<p><strong>í•´ê²°:</strong></p>

<p>ìš©ë„ë³„ë¡œ Executorë¥¼ ë¶„ë¦¬í•˜ê³ , ê¸°ë³¸ <code class="language-plaintext highlighter-rouge">taskExecutor</code>ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í–ˆë‹¤:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@EnableAsync</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AsyncConfig</span> <span class="kd">implements</span> <span class="nc">AsyncConfigurer</span> <span class="o">{</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"taskExecutor"</span><span class="o">)</span>
    <span class="nd">@Primary</span>
    <span class="kd">public</span> <span class="nc">Executor</span> <span class="nf">taskExecutor</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ThreadPoolTaskExecutor</span> <span class="n">executor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPoolTaskExecutor</span><span class="o">();</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setCorePoolSize</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setMaxPoolSize</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setQueueCapacity</span><span class="o">(</span><span class="mi">25</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setThreadNamePrefix</span><span class="o">(</span><span class="s">"Async-"</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">initialize</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">executor</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span><span class="o">(</span><span class="s">"recordingTaskExecutor"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Executor</span> <span class="nf">recordingTaskExecutor</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ThreadPoolTaskExecutor</span> <span class="n">executor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPoolTaskExecutor</span><span class="o">();</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setCorePoolSize</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setMaxPoolSize</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setQueueCapacity</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setThreadNamePrefix</span><span class="o">(</span><span class="s">"Recording-"</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">initialize</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">executor</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤ë ˆë“œ í’€ì„ ì¬ì‚¬ìš©í•´ì„œ ì„±ëŠ¥ì´ í›¨ì”¬ ì¢‹ì•„ì§„ë‹¤:</p>

<ul>
  <li>ìŠ¤ë ˆë“œ ìƒì„± ë¹„ìš©: ~1-2ms â†’ ~0.01ms</li>
  <li>ë¦¬ì†ŒìŠ¤ ì œí•œ: ë¬´ì œí•œ â†’ ìµœëŒ€ 5ê°œë¡œ ì œì–´</li>
</ul>

<h3 id="22-firebase-storage-ì €ì¥-ì‹¤íŒ¨">2.2. Firebase Storage ì €ì¥ ì‹¤íŒ¨</h3>

<p>ë“œë””ì–´ ë…¹ìŒì´ ì‹œì‘ë˜ì—ˆë‹¤! ë¡œê·¸ì—ë„ ì„±ê³µ ë©”ì‹œì§€ê°€ ë–´ë‹¤. ê·¸ëŸ°ë° Firebase Storageë¥¼ í™•ì¸í•´ë³´ë‹ˆâ€¦ íŒŒì¼ì´ ì—†ì—ˆë‹¤. ğŸ˜±</p>

<p><strong>ë¬¸ì œì˜ í•µì‹¬: <code class="language-plaintext highlighter-rouge">uploadingStatus=backuped</code></strong></p>

<p><code class="language-plaintext highlighter-rouge">uploadingStatus</code>ì—ëŠ” ë‘ ê°€ì§€ ê°’ì´ ìˆë‹¤:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">uploaded</code></strong>: ì œ3ì ìŠ¤í† ë¦¬ì§€(Firebase)ì— ì—…ë¡œë“œ ì„±ê³µ</li>
  <li><strong><code class="language-plaintext highlighter-rouge">backuped</code></strong>: Agora ìì²´ ë°±ì—… ì„œë²„ì— ì €ì¥ (24ì‹œê°„ í›„ ì‚­ì œ)</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">backuped</code>ê°€ ë‚˜ì™”ë‹¤ëŠ” ê±´ Firebaseì— ì—…ë¡œë“œê°€ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ì˜ë¯¸ì˜€ë‹¤.</p>

<p><strong>ì›ì¸: HMAC í‚¤ê°€ ì—†ì—ˆë‹¤!</strong></p>

<p>Agoraê°€ GCS(Google Cloud Storage)ì— íŒŒì¼ì„ ì˜¬ë¦¬ë ¤ë©´ <strong>HMAC ì¸ì¦ í‚¤</strong>ê°€ í•„ìš”í•˜ë‹¤. Firebase Console â†’ Storage â†’ Settings â†’ Interoperabilityë¥¼ í™•ì¸í•´ë³´ë‹ˆ ì•„ë¬´ê²ƒë„ ì—†ì—ˆë‹¤.</p>

<p><strong>í•´ê²° ê³¼ì •:</strong></p>

<ol>
  <li>
    <p><strong>Google Cloud Console ì ‘ì†</strong></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cloud Console â†’ Storage â†’ Settings â†’ Interoperability
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>HMAC í‚¤ ìƒì„±</strong></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Service account HMAC ì„¹ì…˜
â†’ Create a key for a service account
â†’ firebase-adminsdk-xxxxx@í”„ë¡œì íŠ¸ëª….iam.gserviceaccount.com ì„ íƒ
â†’ CREATE KEY
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Access Keyì™€ Secret ë³µì‚¬</strong></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Access Key: GOOG1E...ë¡œ ì‹œì‘í•˜ëŠ” ê¸´ ë¬¸ìì—´
Secret: í•œ ë²ˆë§Œ ë³´ì—¬ì£¼ë‹ˆ ì¦‰ì‹œ ë³µì‚¬!
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>application.yml ì„¤ì •</strong></p>
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">app</span><span class="pi">:</span>
  <span class="na">agora</span><span class="pi">:</span>
    <span class="na">recording-region</span><span class="pi">:</span> <span class="m">0</span> <span class="c1"># GCS Multi-region US</span>
    <span class="na">recording-storage-vendor</span><span class="pi">:</span> <span class="s2">"</span><span class="s">6"</span> <span class="c1"># 6 = GCS</span>
    <span class="na">recording-storage-bucket</span><span class="pi">:</span> <span class="s">í”„ë¡œì íŠ¸ëª….appspot.com</span>
    <span class="na">recording-storage-access-key</span><span class="pi">:</span> <span class="s">${AGORA_STORAGE_ACCESS_KEY}</span>
    <span class="na">recording-storage-secret-key</span><span class="pi">:</span> <span class="s">${AGORA_STORAGE_SECRET_KEY}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>ì´ë ‡ê²Œ ì„¤ì •í•˜ê³  ë‹¤ì‹œ ë…¹ìŒì„ ì‹œì‘í–ˆë”ë‹ˆâ€¦ ë“œë””ì–´ ì„±ê³µ! ğŸ‰</p>

<h2 id="3-ìµœì¢…-êµ¬ì¡°">3. ìµœì¢… êµ¬ì¡°</h2>

<p>ëª¨ë“  ì‚½ì§ˆì„ ë§ˆì¹˜ê³  ì™„ì„±ëœ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:</p>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-24-pic1.png?raw=true" alt="ì´ë¯¸ì§€1" /></p>

<h3 id="31-ì£¼ìš”-íŠ¹ì§•">3.1. ì£¼ìš” íŠ¹ì§•</h3>

<ol>
  <li><strong>Individual Recording Mode</strong>: ê° ì‚¬ìš©ìë³„ë¡œ ë³„ë„ ë…¹ìŒ</li>
  <li><strong>Audio Only</strong>: ë¹„ìš© ì ˆê° (ë¹„ë””ì˜¤ ì—†ìŒ)</li>
  <li><strong>ìë™ ì—…ë¡œë“œ</strong>: Agora â†’ Firebase Storage ì§ì ‘ ì €ì¥</li>
  <li><strong>íŒŒì¼ êµ¬ì¡°í™”</strong>: ë‚ ì§œ/Call IDë³„ í´ë” ì •ë¦¬</li>
  <li><strong>ë¹„ë™ê¸° ì²˜ë¦¬</strong>: ë…¹ìŒ ì‹œì‘/ì¤‘ì§€ê°€ ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•ŠìŒ</li>
</ol>

<h2 id="4-ë°°ìš´-ì ">4. ë°°ìš´ ì </h2>

<h3 id="41-ê³µì‹-ë¬¸ì„œë¥¼-ê¼¼ê¼¼íˆ-ì½ì">4.1. ê³µì‹ ë¬¸ì„œë¥¼ ê¼¼ê¼¼íˆ ì½ì</h3>

<p>Agora ê³µì‹ ë¬¸ì„œì— Individual Modeì™€ Composite Modeì˜ ì°¨ì´ê°€ ëª…í™•í•˜ê²Œ ë‚˜ì™€ ìˆì—ˆë‹¤. ì²˜ìŒë¶€í„° ì œëŒ€ë¡œ ì½ì—ˆìœ¼ë©´ ë¶ˆí•„ìš”í•œ ì‹œí–‰ì°©ì˜¤ë¥¼ ì¤„ì¼ ìˆ˜ ìˆì—ˆì„ ê²ƒì´ë‹¤.</p>

<h3 id="42-í´ë¼ìš°ë“œ-ì„œë¹„ìŠ¤ëŠ”-ì¸ì¦ì´-í•µì‹¬">4.2. í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ëŠ” ì¸ì¦ì´ í•µì‹¬</h3>

<p>Firebase Storageì— íŒŒì¼ì´ ì•ˆ ì˜¬ë¼ê°€ëŠ” ì´ìœ ê°€ HMAC í‚¤ ë•Œë¬¸ì´ì—ˆë‹¤. í´ë¼ìš°ë“œ ê°„ ì—°ë™ì—ì„œëŠ” í•­ìƒ <strong>ì¸ì¦ ì„¤ì •ì„ ë¨¼ì € í™•ì¸</strong>í•´ì•¼ í•œë‹¤.</p>

<h3 id="43-ë¹„ë™ê¸°-ì²˜ë¦¬ëŠ”-ì œëŒ€ë¡œ-ì„¤ì •í•˜ì">4.3. ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” ì œëŒ€ë¡œ ì„¤ì •í•˜ì</h3>

<p><code class="language-plaintext highlighter-rouge">@Async</code>ë§Œ ì“°ê³  ë„˜ì–´ê°€ë©´ ì•ˆ ëœë‹¤. ì œëŒ€ë¡œ ëœ <code class="language-plaintext highlighter-rouge">ThreadPoolTaskExecutor</code>ë¥¼ ì„¤ì •í•´ì•¼ ìš´ì˜ì—ì„œ ì•ˆì •ì ì´ë‹¤.</p>

<h2 id="5-ìš´ì˜-ì§€í‘œ">5. ìš´ì˜ ì§€í‘œ</h2>

<p>í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ì‹œìŠ¤í…œì˜ ì£¼ìš” ì§€í‘œ:</p>

<ul>
  <li><strong>ë…¹ìŒ ì‹œì‘ ì‹œê°„</strong>: í‰ê·  2-3ì´ˆ</li>
  <li><strong>íŒŒì¼ ì—…ë¡œë“œ</strong>: Agoraê°€ ìë™ ì²˜ë¦¬ (15ì´ˆë§ˆë‹¤)</li>
  <li><strong>DB ì €ì¥</strong>: ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ë©”ì¸ ë¡œì§ì— ì˜í–¥ ì—†ìŒ</li>
  <li><strong>ìŠ¤ë ˆë“œ í’€</strong>: ìµœëŒ€ 5ê°œ ìŠ¤ë ˆë“œë¡œ ì œí•œë˜ì–´ ì•ˆì •ì </li>
</ul>

<p><strong>ë¹„ìš© ìµœì í™”:</strong></p>

<ul>
  <li>Audio Onlyë¡œ ë¹„ë””ì˜¤ ëŒ€ë¹„ ë¹„ìš© 1/5 ìˆ˜ì¤€</li>
  <li>maxIdleTime ì„¤ì •ìœ¼ë¡œ 30ì´ˆ ë¬´ìŒ ì‹œ ìë™ ì¢…ë£Œ</li>
  <li>streamMode: standard (Agora ê¶Œì¥)</li>
</ul>

<h2 id="6-ë§ˆì¹˜ë©°">6. ë§ˆì¹˜ë©°</h2>

<p>ì²˜ìŒì—” â€œê·¸ëƒ¥ ë…¹ìŒë§Œ í•˜ë©´ ë˜ëŠ” ê±° ì•„ë‹ˆì•¼?â€ë¼ê³  ì‰½ê²Œ ìƒê°í–ˆëŠ”ë°, ì‹¤ì œë¡œëŠ” ì •ë§ ë§ì€ í•¨ì •ì´ ìˆì—ˆë‹¤:</p>

<ul>
  <li>Individual vs Composite Mode ì´í•´</li>
  <li>HMAC í‚¤ ì„¤ì •</li>
  <li>ë¹„ë™ê¸° ì²˜ë¦¬ êµ¬ì„±</li>
  <li>ì—ëŸ¬ í•¸ë“¤ë§</li>
</ul>

<p>í•˜ë‚˜í•˜ë‚˜ í•´ê²°í•˜ë©´ì„œ ë§ì´ ë°°ì› ë‹¤. íŠ¹íˆ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ê°„ ì—°ë™ì—ì„œ <strong>ì¸ì¦ê³¼ ê¶Œí•œ ì„¤ì •</strong>ì´ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ ê¹¨ë‹¬ì•˜ë‹¤.</p>

<p>ì´ ê¸€ì´ Agora Cloud Recordingê³¼ Firebase Storageë¥¼ ì—°ë™í•˜ë ¤ëŠ” ëˆ„êµ°ê°€ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤. ğŸ˜…</p>

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://docs.agora.io/en/cloud-recording/develop/individual-mode">Agora Individual Recording ê³µì‹ ë¬¸ì„œ</a></li>
  <li><a href="https://docs.agora.io/en/cloud-recording/reference/region-vendor">Agora Cloud Storage ì„¤ì •</a></li>
  <li><a href="https://cloud.google.com/storage/docs/authentication/hmackeys">Google Cloud HMAC í‚¤ ìƒì„±</a></li>
  <li><a href="https://spring.io/guides/gs/async-method">Spring Async ì„¤ì •</a></li>
</ul>

<hr />]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Agora Cloud Recordingì„ í†µí•œ í†µí™” ë…¹ìŒê³¼ ì´ë¥¼ Firebase Storageì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´ì„œ ê²½í—˜í•œ ê²ƒê³¼ ëŠë‚€ ì ì„ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitor ì•± Custom Splash Screen êµ¬í˜„í•˜ê¸°</title><link href="https://nan0silver.github.io/projectdiary/2025-11-20-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitor ì•± Custom Splash Screen êµ¬í˜„í•˜ê¸°" /><published>2025-11-20T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-20-diary/"><![CDATA[<ul>
  <li>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„  Capacitorë¡œ ë¹Œë“œí•œ ì•±ì—ì„œ ì—¬ëŸ¬ ì•„ì´ì½˜ì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í–ˆë‹¤.</li>
  <li>ì™œ Custom splash screenì´ í•„ìš”í–ˆë‚˜?
    <ul>
      <li>Capacitorì˜ ê¸°ë³¸ splash screenì€ ë‹¨ì¼ ì •ì  ì´ë¯¸ì§€ë§Œ ì§€ì›í•œë‹¤.<a href="https://capacitorjs.com/docs/apis/splash-screen">ğŸ”—ë§í¬</a></li>
      <li>ë‚˜ëŠ” ì—¬ëŸ¬ ì•„ì´ì½˜ì„ ìˆœì°¨ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•˜ê³  ì‹¶ì–´ React ì»´í¬ë„ŒíŠ¸ë¡œ ì§ì ‘ êµ¬í˜„í•˜ì˜€ë‹¤!</li>
    </ul>
  </li>
</ul>

<h2 id="ëª©ì°¨">ëª©ì°¨</h2>

<ul>
  <li><a href="#1-í•„ìš”í•œ-íŒ¨í‚¤ì§€-ì„¤ì¹˜">1. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜</a></li>
  <li><a href="#2-capacitor-ì„¤ì •">2. Capacitor ì„¤ì •</a></li>
  <li><a href="#3-ì»¤ìŠ¤í…€-ìŠ¤í”Œë˜ì‹œ-ìŠ¤í¬ë¦°-ì»´í¬ë„ŒíŠ¸-ìƒì„±">3. ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì»´í¬ë„ŒíŠ¸ ìƒì„±</a></li>
  <li><a href="#4-apptsxì—-í†µí•©">4. App.tsxì— í†µí•©</a></li>
  <li><a href="#í•µì‹¬-êµ¬í˜„-í¬ì¸íŠ¸">í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸</a></li>
  <li><a href="#ì£¼ì˜ì‚¬í•­">ì£¼ì˜ì‚¬í•­</a></li>
  <li><a href="#ì°¸ê³ -ë¬¸í—Œ">ì°¸ê³  ë¬¸í—Œ</a></li>
</ul>

<hr />

<h2 id="1-í•„ìš”í•œ-íŒ¨í‚¤ì§€-ì„¤ì¹˜">1. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜</h2>

<p>ë¨¼ì € ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ê´€ë ¨ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì.</p>

<blockquote>
  <p>ë‚˜ëŠ” pnpmì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìœ¼ë¯€ë¡œ pnpmìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pnpm add @capacitor/splash-screen
pnpm add <span class="nt">-D</span> @capacitor/assets
</code></pre></div></div>

<h2 id="2-capacitor-ì„¤ì •">2. Capacitor ì„¤ì •</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">capacitor.config.ts</code> íŒŒì¼ì— ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì„¤ì •ì„ ì¶”ê°€í•˜ì.</li>
  <li>â€¼ï¸ ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œëŠ” ìµœì†Œí™”!</li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;reference types="@capacitor/splash-screen" /&gt;</span>

<span class="k">import</span> <span class="kd">type</span> <span class="p">{</span> <span class="nx">CapacitorConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@capacitor/cli</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">CapacitorConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// ... ê¸°íƒ€ ì„¤ì •</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">SplashScreen</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">launchShowDuration</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ 0ìœ¼ë¡œ ì„¤ì •</span>
      <span class="na">launchAutoHide</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ìë™ìœ¼ë¡œ ìˆ¨ê¸¸ì§€ ì—¬ë¶€</span>
      <span class="na">launchFadeOutDuration</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// í˜ì´ë“œ ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ (ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œì—ì„œ ì²˜ë¦¬)</span>
      <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#ffffff</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// ë°°ê²½ìƒ‰ (hex í˜•ì‹) - ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œì™€ ë™ì¼í•˜ê²Œ ì„¤ì •</span>
      <span class="c1">// ... ê¸°íƒ€ ì„¤ì •</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">config</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="3-ì»¤ìŠ¤í…€-ìŠ¤í”Œë˜ì‹œ-ìŠ¤í¬ë¦°-ì»´í¬ë„ŒíŠ¸-ìƒì„±">3. ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì»´í¬ë„ŒíŠ¸ ìƒì„±</h2>

<p><code class="language-plaintext highlighter-rouge">client/components/CustomSplashScreen.tsx</code> íŒŒì¼ì„ ìƒì„±í•œë‹¤.</p>

<h3 id="props-ì •ì˜">Props ì •ì˜</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">CustomSplashScreenProps</span> <span class="p">{</span>
  <span class="nl">onComplete</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span> <span class="c1">// ìŠ¤í”Œë˜ì‹œ ì™„ë£Œ ì‹œ ì½œë°±</span>
  <span class="nl">icons</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span> <span class="c1">// í‘œì‹œí•  ì•„ì´ì½˜ ë°°ì—´</span>
  <span class="nl">iconDuration</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// ê° ì•„ì´ì½˜ í‘œì‹œ ì‹œê°„(ms)</span>
  <span class="nl">minDisplayDuration</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// ìµœì†Œ í‘œì‹œ ì‹œê°„(ms)</span>
  <span class="nl">animationType</span><span class="p">?:</span> <span class="dl">"</span><span class="s2">slide-up</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">fade</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
  <span class="nl">backgroundColor</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="í•µì‹¬-ë¡œì§">í•µì‹¬ ë¡œì§</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">CustomSplashScreen</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">onComplete</span><span class="p">,</span>
  <span class="nx">icons</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="nx">iconDuration</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nx">minDisplayDuration</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
  <span class="nx">animationType</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">slide-up</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">backgroundColor</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">#ffffff</span><span class="dl">"</span><span class="p">,</span>
<span class="p">}:</span> <span class="nx">CustomSplashScreenProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">currentIconIndex</span><span class="p">,</span> <span class="nx">setCurrentIconIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isVisible</span><span class="p">,</span> <span class="nx">setIsVisible</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="c1">// 1. ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì¦‰ì‹œ ìˆ¨ê¸°ê¸°</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">hideNativeSplash</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">SplashScreen</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ì›¹ í™˜ê²½ì—ì„œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¬´ì‹œ</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">hideNativeSplash</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// 2. ì•„ì´ì½˜ ìˆœì°¨ í‘œì‹œ ë¡œì§</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">icons</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setIsVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
      <span class="p">},</span> <span class="nx">minDisplayDuration</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ì•„ì´ì½˜ ì „í™˜ ì¸í„°ë²Œ</span>
    <span class="kd">const</span> <span class="nx">iconInterval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setCurrentIconIndex</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span> <span class="o">&lt;</span> <span class="nx">icons</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">prev</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">},</span> <span class="nx">iconDuration</span><span class="p">);</span>

    <span class="c1">// ì´ í‘œì‹œ ì‹œê°„ ê³„ì‚°</span>
    <span class="kd">const</span> <span class="nx">totalAnimationDuration</span> <span class="o">=</span> <span class="nx">icons</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="nx">iconDuration</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">actualDuration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">totalAnimationDuration</span><span class="p">,</span> <span class="nx">minDisplayDuration</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">completeTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setIsVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">actualDuration</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">iconInterval</span><span class="p">);</span>
      <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">completeTimer</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">icons</span><span class="p">,</span> <span class="nx">iconDuration</span><span class="p">,</span> <span class="nx">minDisplayDuration</span><span class="p">,</span> <span class="nx">onComplete</span><span class="p">]);</span>

  <span class="c1">// ... ë Œë”ë§ ë¡œì§</span>
<span class="p">};</span>
</code></pre></div></div>

<ul>
  <li>ì•„ì´ì½˜ ìŠ¬ë¼ì´ë“œ ì• ë‹ˆë©”ì´ì…˜ê³¼ í…ìŠ¤íŠ¸ ì¶”ê°€ ë“± ê°œì¸ì˜ ë””ìì¸ì— ë§ê²Œ React ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ ê¾¸ë©°ì£¼ë©´ ëœë‹¤!!</li>
</ul>

<h2 id="4-apptsxì—-í†µí•©">4. App.tsxì— í†µí•©</h2>

<p>ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸ì— ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°ì„ í†µí•©í•©ë‹ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">CustomSplashScreen</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/CustomSplashScreen</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AppRoutes</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">showSplash</span><span class="p">,</span> <span class="nx">setShowSplash</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="c1">// ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°ì— í‘œì‹œí•  ì•„ì´ì½˜ë“¤</span>
  <span class="kd">const</span> <span class="nx">splashIcons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">/splash-icons/icon1.png</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">/splash-icons/icon2.png</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">/splash-icons/icon3.png</span><span class="dl">"</span><span class="p">,</span>
    <span class="c1">// ... ë” ë§ì€ ì•„ì´ì½˜</span>
  <span class="p">];</span>

  <span class="kd">const</span> <span class="nx">handleSplashComplete</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setShowSplash</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">showSplash</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">CustomSplashScreen</span>
        <span class="nx">onComplete</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSplashComplete</span><span class="p">}</span>
        <span class="nx">icons</span><span class="o">=</span><span class="p">{</span><span class="nx">splashIcons</span><span class="p">}</span>
        <span class="nx">iconDuration</span><span class="o">=</span><span class="p">{</span><span class="mi">400</span><span class="p">}</span>
        <span class="nx">minDisplayDuration</span><span class="o">=</span><span class="p">{</span><span class="mi">2000</span><span class="p">}</span>
        <span class="nx">animationType</span><span class="o">=</span><span class="dl">"</span><span class="s2">slide-up</span><span class="dl">"</span>
      <span class="o">/&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// ... ë‚˜ë¨¸ì§€ ì•± ë¡œì§</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-í•µì‹¬-êµ¬í˜„-í¬ì¸íŠ¸-">ğŸ í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸ ğŸ</h2>

<h3 id="1-ë„¤ì´í‹°ë¸Œ-ìŠ¤í”Œë˜ì‹œì™€-ì»¤ìŠ¤í…€-ìŠ¤í”Œë˜ì‹œ-ë¶„ë¦¬">1. ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œì™€ ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ë¶„ë¦¬</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">launchShowDuration: 0</code>ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œë¥¼ ì¦‰ì‹œ ìˆ¨ê¹€</li>
  <li><code class="language-plaintext highlighter-rouge">SplashScreen.hide()</code>ë¥¼ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í˜¸ì¶œ</li>
</ul>

<h3 id="2-í…ìŠ¤íŠ¸-ê¹œë¹¡ì„-ë°©ì§€">2. í…ìŠ¤íŠ¸ ê¹œë¹¡ì„ ë°©ì§€</h3>

<p>ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ë¥¼ ë³„ë„ì˜ <code class="language-plaintext highlighter-rouge">div</code>ë¡œ ë Œë”ë§í•˜ì—¬ ì•„ì´ì½˜ì´ ë³€ê²½ë  ë•Œ í…ìŠ¤íŠ¸ê°€ ê¹œë¹¡ì´ì§€ ì•Šë„ë¡ êµ¬í˜„</p>

<h3 id="3-ë¶€ë“œëŸ¬ìš´-ì• ë‹ˆë©”ì´ì…˜">3. ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜</h3>

<p>CSS <code class="language-plaintext highlighter-rouge">transition</code>ê³¼ <code class="language-plaintext highlighter-rouge">cubic-bezier</code> íƒ€ì´ë° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ íš¨ê³¼ êµ¬í˜„</p>

<h3 id="4-ìµœì†Œ-í‘œì‹œ-ì‹œê°„-ë³´ì¥">4. ìµœì†Œ í‘œì‹œ ì‹œê°„ ë³´ì¥</h3>

<p><code class="language-plaintext highlighter-rouge">minDisplayDuration</code>ì„ ì„¤ì •í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ì´ ë„ˆë¬´ ë¹¨ë¦¬ ëë‚˜ë„ ìµœì†Œ ì‹œê°„ì€ ë³´ì¥</p>

<h3 id="5-ì´ë¯¸ì§€-ì¤€ë¹„">5. ì´ë¯¸ì§€ ì¤€ë¹„</h3>

<p>ì•„ì´ì½˜ ì´ë¯¸ì§€ëŠ” <code class="language-plaintext highlighter-rouge">public/splash-icons/</code> ë””ë ‰í† ë¦¬ì— ì €ì¥í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public/
  splash-icons/
    icon1.png
    icon2.png
    icon3.png
</code></pre></div></div>

<h2 id="ï¸-ì£¼ì˜ì‚¬í•­">â€¼ï¸ ì£¼ì˜ì‚¬í•­</h2>

<ul>
  <li>ì´ë¯¸ì§€ëŠ” ë°˜ë“œì‹œ <code class="language-plaintext highlighter-rouge">public</code> í´ë”ì— ì €ì¥ (ë¹Œë“œ ì‹œ ìë™ í¬í•¨)</li>
  <li>ì›¹ í™˜ê²½ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">SplashScreen.hide()</code>ê°€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ try-catch ì²˜ë¦¬ í•„ìš”</li>
  <li>Android 12 ì´ìƒì—ì„œëŠ” ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œ APIê°€ ê°•ì œ ì ìš©ë˜ë¯€ë¡œ ì´ˆê¸° 0.5ì´ˆëŠ” ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œê°€ ë³´ì¼ ìˆ˜ ìˆìŒ</li>
</ul>

<h2 id="-ì°¸ê³ -ë¬¸í—Œ">ğŸ€ ì°¸ê³  ë¬¸í—Œ</h2>

<ul>
  <li><a href="https://github.com/ionic-team/capacitor-assets">Capacitor assets github page</a></li>
  <li><a href="https://capacitorjs.com/docs/apis/splash-screen">@capacitor/splash-screen DOCS</a></li>
  <li><a href="https://capacitorjs.com/docs/guides/splash-screens-and-icons">Splash Screens and Icons DOCS</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ ì•±ì—ì„œ Splash Screenì„ Reactë¡œ ì§ì ‘ êµ¬í˜„í•œ ë‚´ìš©ì— ëŒ€í•´ ë‹¤ë£¹ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] SockJS Transportì™€ JSONP: 2025ë…„ì— ë§Œë‚œ ë ˆê±°ì‹œ ê¸°ìˆ </title><link href="https://nan0silver.github.io/projectdiary/2025-11-18-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] SockJS Transportì™€ JSONP: 2025ë…„ì— ë§Œë‚œ ë ˆê±°ì‹œ ê¸°ìˆ " /><published>2025-11-18T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-18-diary/"><![CDATA[<ul>
  <li>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œ WebSocket í†µì‹  ì¤‘ ë°œìƒí•œ JSONP ì—ëŸ¬ì— ëŒ€í•´ ë‹¤ë£¨ì—ˆë‹¤.</li>
  <li>í•´ê²°í•˜ëŠ” ê³¼ì •ì—ì„œ ê³µë¶€í•œ ë‚´ìš©ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ë‹¤.</li>
</ul>

<h2 id="ëª©ì°¨">ëª©ì°¨</h2>

<ul>
  <li><a href="#ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
  <li><a href="#ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</a></li>
  <li><a href="#jsonpë€-ë¬´ì—‡ì¸ê°€">JSONPë€ ë¬´ì—‡ì¸ê°€?</a></li>
  <li><a href="#sockjsì—ì„œ-jsonpê°€-í•„ìš”í–ˆë˜-ì´ìœ ">SockJSì—ì„œ JSONPê°€ í•„ìš”í–ˆë˜ ì´ìœ </a></li>
  <li><a href="#ì™œ-í˜„ëŒ€-ì›¹ì—ì„œëŠ”-ì‚¬ìš©í•˜ì§€-ì•ŠëŠ”ê°€">ì™œ í˜„ëŒ€ ì›¹ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê°€?</a></li>
  <li><a href="#ë‚´-í”„ë¡œì íŠ¸ì—ì„œì˜-ë¬¸ì œ">ë‚´ í”„ë¡œì íŠ¸ì—ì„œì˜ ë¬¸ì œ</a></li>
  <li><a href="#í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</a></li>
  <li><a href="#êµí›ˆ">ê²°ë¡ </a></li>
  <li><a href="#ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</a></li>
</ul>

<h2 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</h2>

<p>Capacitor ê¸°ë°˜ Android ì•±ì—ì„œ WebSocket ì—°ê²°ì„ êµ¬í˜„í•˜ë˜ ì¤‘, ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ë¥¼ ë§Œë‚¬ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âŒ Refused to execute script from 'https://silverld.site/ws/270/s4swngca/jsonp?c=_jp.a050t2f'
   because its MIME type ('') is not executable
</code></pre></div></div>

<p>JSONP? ë¶„ëª… WebSocketì„ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë° ì™œ ê°‘ìê¸° JSONPê°€ ë“±ì¥í–ˆì„ê¹Œ?</p>

<hr />

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<p>ë¡œê·¸ë¥¼ ë¶„ì„í•´ë³´ë‹ˆ SockJSê°€ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ì—°ê²°ì„ ì‹œë„í•˜ê³  ìˆì—ˆë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. WebSocket â†’ ì‹¤íŒ¨
2. xhr-streaming â†’ ì‘ë‹µ ì—†ìŒ
3. xhr-polling â†’ ë¶€ë¶„ ì„±ê³µ
4. jsonp â†’ MIME type ì—ëŸ¬ ë°œìƒ!
5. Connection closed â†’ 5ì´ˆ í›„ ì¬ì—°ê²° ì‹œë„
</code></pre></div></div>

<p>WebSocket ì—°ê²°ì´ ì‹¤íŒ¨í•˜ì SockJSê°€ <strong>fallback ë©”ì»¤ë‹ˆì¦˜</strong>ì„ í†µí•´ JSONPê¹Œì§€ ì‹œë„í•œ ê²ƒì´ì—ˆë‹¤.</p>

<hr />

<h2 id="jsonpë€-ë¬´ì—‡ì¸ê°€">JSONPë€ ë¬´ì—‡ì¸ê°€?</h2>

<h3 id="íƒ„ìƒ-ë°°ê²½">íƒ„ìƒ ë°°ê²½</h3>

<p>JSONP(JSON with Padding)ëŠ” <strong>2000ë…„ëŒ€ ì¤‘ë°˜</strong>, CORSê°€ í‘œì¤€í™”ë˜ê¸° ì „ì— ë“±ì¥í•œ í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µì‹  ê¸°ë²•ì´ë‹¤.</p>

<p>ë‹¹ì‹œ ì›¹ ê°œë°œìë“¤ì€ <strong>ê°™ì€ ì¶œì²˜ ì •ì±…(Same-Origin Policy)</strong> ë•Œë¬¸ì— ë‹¤ë¥¸ ë„ë©”ì¸ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì—ˆë‹¤:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âŒ ë‹¤ë¥¸ ë„ë©”ì¸ AJAX ìš”ì²­ â†’ ì°¨ë‹¨ë¨</span>
<span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.example.com/data</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="c1">// Error: CORS policy ìœ„ë°˜!</span>
</code></pre></div></div>

<h3 id="ì‘ë™-ì›ë¦¬">ì‘ë™ ì›ë¦¬</h3>

<p>JSONPëŠ” <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> íƒœê·¸ê°€ <strong>CORS ì œì•½ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤</strong>ëŠ” ì ì„ í™œìš©í•œë‹¤:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- âœ… script íƒœê·¸ëŠ” ë‹¤ë¥¸ ë„ë©”ì¸ ë¡œë“œ ê°€ëŠ¥ --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://api.example.com/data?callback=handleData"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<p><strong>ì„œë²„ ì‘ë‹µ:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">handleData</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div></div>

<p><strong>í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¯¸ë¦¬ ì •ì˜:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">handleData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// { name: "John", age: 30 }</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ ì„œë²„ê°€ <strong>ì½œë°± í•¨ìˆ˜ë¡œ ë°ì´í„°ë¥¼ ê°ì‹¸ì„œ</strong> ë°˜í™˜í•˜ë©´, ë¸Œë¼ìš°ì €ê°€ ì´ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ëŠ” ë°©ì‹ì´ë‹¤.</p>

<hr />

<h2 id="sockjsì—ì„œ-jsonpê°€-í•„ìš”í–ˆë˜-ì´ìœ ">SockJSì—ì„œ JSONPê°€ í•„ìš”í–ˆë˜ ì´ìœ </h2>

<p><strong>SockJS</strong>ëŠ” WebSocketì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” êµ¬í˜• ë¸Œë¼ìš°ì €(IE8/9 ë“±)ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.</p>

<p>ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ fallback ì „ëµì„ ì‚¬ìš©í•œë‹¤:</p>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-18-pic1.png?raw=true" alt="ì´ë¯¸ì§€1" /></p>

<p>JSONPëŠ” <strong>ê°€ì¥ ì˜¤ë˜ëœ ë¸Œë¼ìš°ì €ë„ ì§€ì›</strong>í•˜ê¸° ìœ„í•œ ìµœí›„ì˜ ìˆ˜ë‹¨!</p>

<hr />

<h2 id="ì™œ-í˜„ëŒ€-ì›¹ì—ì„œëŠ”-ì‚¬ìš©í•˜ì§€-ì•ŠëŠ”ê°€">ì™œ í˜„ëŒ€ ì›¹ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê°€?</h2>

<h3 id="1-corsì˜-ë“±ì¥">1. CORSì˜ ë“±ì¥</h3>

<p>2014ë…„ CORS(Cross-Origin Resource Sharing)ê°€ í‘œì¤€í™”ë˜ë©´ì„œ ì•ˆì „í•˜ê²Œ í¬ë¡œìŠ¤ ë„ë©”ì¸ í†µì‹ ì´ ê°€ëŠ¥í•´ì¡Œë‹¤:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// í˜„ëŒ€ì ì¸ ë°©ë²•</span>
<span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.example.com/data</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// âœ… POST, PUT, DELETE ëª¨ë‘ ê°€ëŠ¥</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="2-ë³´ì•ˆ-ì·¨ì•½ì ">2. ë³´ì•ˆ ì·¨ì•½ì </h3>

<p>JSONPëŠ” ì‹¬ê°í•œ ë³´ì•ˆ ë¬¸ì œë¥¼ ê°–ê³  ìˆë‹¤:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âŒ XSS ê³µê²©ì— ì·¨ì•½</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">https://malicious.com/data?callback=alert('hacked!')</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="c1">// âŒ CSRF ê³µê²© ê°€ëŠ¥ (GET ìš”ì²­ë§Œ ê°€ëŠ¥í•˜ë¯€ë¡œ)</span>
<span class="c1">// âŒ ì¸ì¦ í† í° ë…¸ì¶œ ìœ„í—˜</span>
</code></pre></div></div>

<h3 id="3-ê¸°ëŠ¥-ì œí•œ">3. ê¸°ëŠ¥ ì œí•œ</h3>

<ul>
  <li><strong>GET ìš”ì²­ë§Œ ê°€ëŠ¥</strong> (POST, PUT, DELETE ë¶ˆê°€)</li>
  <li><strong>ì—ëŸ¬ í•¸ë“¤ë§ ì–´ë ¤ì›€</strong> (HTTP ìƒíƒœ ì½”ë“œ í™•ì¸ ë¶ˆê°€)</li>
  <li><strong>íƒ€ì„ì•„ì›ƒ ì œì–´ ì–´ë ¤ì›€</strong></li>
</ul>

<hr />

<h2 id="ë‚´-í”„ë¡œì íŠ¸ì—ì„œì˜-ë¬¸ì œ">ë‚´ í”„ë¡œì íŠ¸ì—ì„œì˜ ë¬¸ì œ</h2>

<p>Capacitor ì•±ì—ì„œ WebSocket ì—°ê²°ì´ ì‹¤íŒ¨í•˜ì, SockJSê°€ JSONPê¹Œì§€ fallbackì„ ì‹œë„í–ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ë°±ì—”ë“œ(Spring Boot)ê°€ <strong>JSONP ì‘ë‹µì— ì˜¬ë°”ë¥¸ MIME type í—¤ë”ë¥¼ ë³´ë‚´ì§€ ì•Šì•„</strong> ë¸Œë¼ìš°ì €ê°€ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì„ ê±°ë¶€í•œ ê²ƒì´ë‹¤:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>âŒ MIME type ('') is not executable
</code></pre></div></div>

<p><strong>ê·¼ë³¸ ì›ì¸:</strong></p>

<ul>
  <li>Capacitor ì•±ì—ì„œëŠ” JSONPê°€ <strong>ì „í˜€ í•„ìš” ì—†ìŒ</strong> (ìµœì‹  WebView ì‚¬ìš©)</li>
  <li>í•˜ì§€ë§Œ SockJSê°€ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ JSONPë¥¼ í¬í•¨í•˜ê³  ìˆì—ˆìŒ</li>
</ul>

<hr />

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<p>SockJS ì´ˆê¸°í™” ì‹œ <strong>ì‚¬ìš©í•  transportë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì œí•œ</strong>í–ˆë‹¤:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sockJSOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">transports</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">websocket</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// ìµœìš°ì„ </span>
    <span class="dl">"</span><span class="s2">xhr-streaming</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 2ìˆœìœ„</span>
    <span class="dl">"</span><span class="s2">xhr-polling</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 3ìˆœìœ„</span>
    <span class="c1">// 'jsonp' ì œê±°! (ë ˆê±°ì‹œ transport)</span>
  <span class="p">],</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SockJS</span><span class="p">(</span><span class="nx">wsUrl</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">sockJSOptions</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>ê²°ê³¼:</strong></p>

<ul>
  <li>âœ… JSONP ì—ëŸ¬ í•´ê²°</li>
  <li>âœ… ë¶ˆí•„ìš”í•œ fallback ì‹œë„ ì œê±°</li>
  <li>âœ… ì—°ê²° ì†ë„ í–¥ìƒ</li>
</ul>

<hr />

<h2 id="êµí›ˆ">êµí›ˆ</h2>

<ol>
  <li>
    <p><strong>ë ˆê±°ì‹œ ì½”ë“œëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ê³³ì— ìˆ¨ì–´ìˆë‹¤</strong></p>

    <ul>
      <li>í˜„ëŒ€ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ì˜¤ë˜ëœ ê¸°ìˆ ì„ í¬í•¨</li>
    </ul>
  </li>
  <li>
    <p><strong>ê¸°ë³¸ ì„¤ì •ì„ ë§¹ì‹ í•˜ì§€ ë§ì</strong></p>

    <ul>
      <li>SockJSì˜ ê¸°ë³¸ transport ì„¤ì •ì€ IE8 ì‹œëŒ€ì˜ ìœ ì‚°</li>
      <li>í˜„ëŒ€ í™˜ê²½ì— ë§ê²Œ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•„ìš”</li>
    </ul>
  </li>
  <li>
    <p><strong>í”„ë ˆì„ì›Œí¬ì˜ ë™ì‘ ë°©ì‹ì„ ì´í•´í•˜ì</strong></p>
    <ul>
      <li>â€œì™œ WebSocketì„ ì“°ëŠ”ë° JSONPê°€?â€ë¼ëŠ” ì˜ë¬¸</li>
      <li>Fallback ë©”ì»¤ë‹ˆì¦˜ì„ ì´í•´í•˜ë‹ˆ í•´ê²° ë°©ë²•ë„ ëª…í™•í•´ì§</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</h2>

<p>JSONP ì—ëŸ¬ë¥¼ ì²˜ìŒ ë§ˆì£¼í–ˆë‹¤. í•˜ì§€ë§Œ ì›¹ì˜ ì—­ì‚¬ë¥¼ ì´í•´í•˜ê³ , í˜„ëŒ€ ê¸°ìˆ ì´ ì–´ë–»ê²Œ ë°œì „í•´ì™”ëŠ”ì§€ ê³µë¶€í•˜ëŠ” ì¢‹ì€ ê¸°íšŒê°€ ë˜ì—ˆë‹¤.</p>

<p>ì—¬ëŸ¬ë¶„ì˜ í”„ë¡œì íŠ¸ì—ì„œë„ SockJSë¥¼ ì‚¬ìš©í•œë‹¤ë©´, transport ì„¤ì •ì„ í™•ì¸í•´ë³´ì‹œê¸¸ ì¶”ì²œí•©ë‹ˆë‹¤!
ë¶ˆí•„ìš”í•œ ë ˆê±°ì‹œ ì½”ë“œë¥¼ ì œê±°í•˜ë©´ ì„±ëŠ¥ê³¼ ì•ˆì •ì„± ëª¨ë‘ í–¥ìƒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ˜Š</p>

<hr />

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html">SockJS Protocol</a></li>
  <li><a href="https://en.wikipedia.org/wiki/JSONP">JSONPì˜ ì‘ë™ ì›ë¦¬ì™€ ë³´ì•ˆ ì´ìŠˆ</a></li>
  <li><a href="https://stackoverflow.com/questions/2067472/what-is-jsonp-and-why-was-it-created">CORS vs JSONP</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œì˜ ì›¹ì†Œì¼“ ì˜¤ë¥˜ ì¤‘ X-Frame-Options ì—ëŸ¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ ë‹¤ë£¹ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitor Android ì•± X-Frame-Options ì—ëŸ¬ í•´ê²°</title><link href="https://nan0silver.github.io/projectdiary/2025-11-17-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitor Android ì•± X-Frame-Options ì—ëŸ¬ í•´ê²°" /><published>2025-11-17T00:00:00+00:00</published><updated>2026-01-20T07:36:29+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-17-diary/"><![CDATA[<ul>
  <li>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œ WebSocket í†µì‹  ì¤‘ ë°œìƒí•œ X-Frame-Options ì—ëŸ¬ì— ëŒ€í•´ ë‹¤ë£¨ì—ˆë‹¤.</li>
  <li>í•´ê²°í•˜ëŠ” ê³¼ì •ì—ì„œ ê³µë¶€í•œ ë‚´ìš©ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ë‹¤.</li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>ì›¹ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë˜ <strong>ë§¤ì¹­ ì™„ë£Œ -&gt; WebSocket ë©”ì‹œì§€ ìˆ˜ì‹  -&gt; í†µí™” ì‹œì‘ í˜ì´ì§€ ì´ë™</strong> ë¡œì§ì´ Android ì•±ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ë¡œ ì‹¤íŒ¨í–ˆë‹¤.</li>
</ul>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic1.png?raw=true" alt="ì—ëŸ¬ ì´ë¯¸ì§€1" /></p>

<ul>
  <li>ğŸ”¥ ì´ ë¬¸ì œëŠ” <strong>Capacitorì˜ WebView í™˜ê²½ê³¼ Spring Securityì˜ ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •ì´ ì¶©ëŒ</strong>í•˜ë©´ì„œ ë°œìƒ! ğŸ”¥</li>
  <li>WebSocket ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ SockJSê°€ fallback ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ iframeì„ ì‚¬ìš©í•˜ë ¤ í–ˆì§€ë§Œ, ì„œë²„ê°€ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì´ë¥¼ ì°¨ë‹¨í–ˆê¸° ë•Œë¬¸ì´ë‹¤.</li>
  <li>ì´ ê¸€ì—ì„œëŠ” X-Frame-Optionsê°€ ë¬´ì—‡ì¸ì§€, iframeì´ ë¬´ì—‡ì¸ì§€, ê·¸ë¦¬ê³  ì™œ ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí–‡ëŠ”ì§€ë¥¼ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</li>
</ul>

<h2 id="1-iframe-ì´ë€">1. iframe ì´ë€?</h2>

<ul>
  <li><strong>iframe (inline frame)</strong>ì€ HTML ë¬¸ì„œ ì•ˆì—ì„œ ë‹¤ë¥¸ HTML ë¬¸ì„œë¥¼ ì‚½ì…í•˜ëŠ” íƒœê·¸ì´ë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- ì˜ˆì‹œ: ìœ íŠœë¸Œ ì˜ìƒ ì‚½ì… --&gt;
&lt;iframe
    src="https://www.youtube.com/embed/VIDEO_ID"
    width="560"
    height="315"&gt;
&lt;/iframe&gt;
</code></pre></div></div>

<p><strong>ì‹œê°ì  êµ¬ì¡°:</strong>
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic2.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€1" /></p>

<ul>
  <li>ì‹¤ìƒí™œ ì˜ˆì‹œ : ìœ íŠœë¸Œ ì˜ìƒ ì‚½ì…, êµ¬ê¸€ ì§€ë„ ì‚½ì…, í˜ì´ìŠ¤ë¶ â€œì¢‹ì•„ìš”â€ ë²„íŠ¼ ë“±</li>
</ul>

<h2 id="2-x-frame-options-ì´ë€">2. X-Frame-Options ì´ë€?</h2>

<ul>
  <li>
    <p><strong>X-Frame-Options</strong>ëŠ” HTTP ì‘ë‹µ í—¤ë”ë¡œ, ë‚´ ì›¹ì‚¬ì´íŠ¸ê°€ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì˜ iframeì•ˆì— í‘œì‹œë˜ëŠ” ê²ƒì„ ì œì–´í•˜ëŠ” ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜</p>
  </li>
  <li>
    <p>í—¤ë” ê°’ 3ê°€ì§€:</p>
    <ul>
      <li>X-Frame-Options: DENY
        <ul>
          <li>ì–´ë–¤ ì‚¬ì´íŠ¸ë“  iframeìœ¼ë¡œ ë‚´ í˜ì´ì§€ë¥¼ ë¡œë“œí•  ìˆ˜ ì—†ìŒ</li>
        </ul>
      </li>
      <li>X-Frame-Options: SAMEORIGIN
        <ul>
          <li>ê°™ì€ ë„ë©”ì¸ì—ì„œë§Œ iframeìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥</li>
        </ul>
      </li>
      <li>X-Frame-Options: ALLOW-FROM https://example.com
        <ul>
          <li>íŠ¹ì • ë„ë©”ì¸ì—ì„œë§Œ iframeìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥ (deprecated)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ì™œ-x-frame-optionsê°€-í•„ìš”í•œê°€">ì™œ X-Frame-Optionsê°€ í•„ìš”í•œê°€?</h3>

<ul>
  <li><strong>Clickjacking ê³µê²© ë°©ì§€</strong>
    <ul>
      <li>ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ê°€ íˆ¬ëª…í•œ iframeì„ í†µí•´ ì‚¬ìš©ìë¥¼ ì†ì—¬ ì›í•˜ì§€ ì•ŠëŠ” í–‰ë™ì„ í•˜ê²Œ ë§Œë“œëŠ” ê³µê²©</li>
    </ul>
  </li>
</ul>

<p><strong>ê³µê²© ì‹œë‚˜ë¦¬ì˜¤:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ê³µê²©ìê°€ ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° (evil.com)

2. íˆ¬ëª…í•œ iframeìœ¼ë¡œ ì€í–‰ ì‚¬ì´íŠ¸ë¥¼ ìˆ¨ê¹€
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ evil.com                        â”‚
   â”‚                                 â”‚
   â”‚ [ë¬´ë£Œ iPhone ë°›ê¸°!] ë²„íŠ¼           â”‚
   â”‚        â†‘                        â”‚
   â”‚        ì‹¤ì œë¡œëŠ” íˆ¬ëª…í•œ iframe       â”‚
   â”‚        ì€í–‰ ì†¡ê¸ˆ ë²„íŠ¼ì´ ìœ„ì¹˜         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ì‚¬ìš©ìê°€ "ë¬´ë£Œ iPhone ë°›ê¸°!" í´ë¦­
   â†’ ì‹¤ì œë¡œëŠ” ì€í–‰ì˜ "ì†¡ê¸ˆ ìŠ¹ì¸" ë²„íŠ¼ í´ë¦­
   â†’ ëˆì´ ê³µê²©ìì—ê²Œ ì „ì†¡ë¨ ğŸ¥²
</code></pre></div></div>

<p><strong>X-Frame-Options: DENYê°€ ë§‰ëŠ” ë°©ë²•:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ evil.com                        â”‚
â”‚                                 â”‚
â”‚ &lt;iframe src="bank.com"&gt;         â”‚
â”‚   âŒ ë¸Œë¼ìš°ì €ê°€ ë¡œë“œ ê±°ë¶€!           â”‚
â”‚   "X-Frame-Options: DENY"       â”‚
â”‚ &lt;/iframe&gt;                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div>

<h2 id="ï¸-capacitorë¡œ-ë¹Œë“œí•œ-ì•±ì—ì„œ-ì´-ë¬¸ì œê°€-ë°œìƒí•œ-ì´ìœ ">â€¼ï¸ Capacitorë¡œ ë¹Œë“œí•œ ì•±ì—ì„œ ì´ ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ </h2>

<ul>
  <li>CapacitorëŠ” <strong>í•˜ì´ë¸Œë¦¬ë“œ ì•±</strong>ì„ ë§Œë“œëŠ” í”„ë ˆì„ì›Œí¬ì´ë‹¤.</li>
</ul>

<p><strong>í•˜ì´ë¸Œë¦¬ë“œ ì•± êµ¬ì¡°</strong>
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic3.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€2" /></p>

<ul>
  <li>WebViewëŠ” ë³¸ì§ˆì ìœ¼ë¡œ iframeê³¼ ìœ ì‚¬í•˜ë‹¤!</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ë„¤ì´í‹°ë¸Œ ì•± (Android/iOS)
    â””â”€â”€ WebView â‰ˆ iframe
         â””â”€â”€ React ì•± (https://localhost)
              â””â”€â”€ WebSocket ì—°ê²° ì‹œë„ â†’ ë°±ì—”ë“œ (https://backend.domain)
</code></pre></div></div>

<h3 id="sockjsì˜-iframe-transport"><strong>SockJSì˜ iframe Transport</strong></h3>

<p><strong>SockJS</strong>ëŠ” WebSocketì´ ì•ˆ ë  ë•Œë¥¼ ëŒ€ë¹„í•œ ì—¬ëŸ¬ fallback ë°©ë²•ì„ ì œê³µí•œë‹¤.</p>

<p><strong>SockJS Transport ìˆœì„œ:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. WebSocket (ê°€ì¥ ë¹ ë¥´ê³  íš¨ìœ¨ì )
   â†“ ì‹¤íŒ¨
2. xhr-streaming (HTTP ìŠ¤íŠ¸ë¦¬ë°)
   â†“ ì‹¤íŒ¨
3. xhr-polling (HTTP í´ë§)
   â†“ ì‹¤íŒ¨
4. iframe-based transports (ë ˆê±°ì‹œ ë¸Œë¼ìš°ì €ìš©)
   â†“ ì‹¤íŒ¨
5. jsonp-polling (ìµœí›„ì˜ ìˆ˜ë‹¨)
</code></pre></div></div>

<ul>
  <li>iframe-based transportê°€ í•˜ëŠ” ì¼:</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- SockJSê°€ ë‚´ë¶€ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìˆ¨ê²¨ì§„ iframe --&gt;</span>
<span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"https://backend.domain/ws/iframe.html"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/iframe&gt;</span>
</code></pre></div></div>

<h3 id="ë¬¸ì œ-ë°œìƒ-ì‹œë‚˜ë¦¬ì˜¤"><strong>ë¬¸ì œ ë°œìƒ ì‹œë‚˜ë¦¬ì˜¤:</strong></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. Capacitor ì•± (WebView) ì‹œì‘
   Origin: capacitor://localhost

2. WebSocket ì—°ê²° ì‹œë„ (ì¹œêµ¬í•˜ì í”„ë¡œì íŠ¸ì˜ ê²½ìš°, í†µí™” ë§¤ì¹­ì‹œ ì‚¬ìš© ì¤‘)
   â†’ https://backend.domain/ws

3. SockJSê°€ iframe transport ì‹œë„
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Capacitor WebView               â”‚
   â”‚ (capacitor://localhost)         â”‚
   â”‚                                 â”‚
   â”‚ &lt;iframe src="backend.domain/ws"&gt; â”‚
   â”‚   âŒ ì°¨ë‹¨ë¨!                     â”‚
   â”‚   "X-Frame-Options: DENY"       â”‚
   â”‚ &lt;/iframe&gt;                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. ì—ëŸ¬ ë©”ì‹œì§€:
   "Refused to display 'https://backend.domain/'
    in a frame because it set 'X-Frame-Options' to 'deny'"
</code></pre></div></div>

<h3 id="ì™œ-spring-securityê°€-ê¸°ë³¸ì ìœ¼ë¡œ-denyë¥¼-ì„¤ì •í• ê¹Œ">ì™œ Spring Securityê°€ ê¸°ë³¸ì ìœ¼ë¡œ Denyë¥¼ ì„¤ì •í• ê¹Œ?</h3>

<ul>
  <li>Spring Securityì˜ ë³´ì•ˆ ìš°ì„  ì² í•™ :
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic4.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€3" /></li>
</ul>

<p><strong>ì´ìœ </strong></p>

<ol>
  <li><strong>ë³´ì•ˆ ìš°ì„ ì£¼ì˜</strong>: ì•ˆì „í•˜ì§€ ì•Šì€ ê²ƒë³´ë‹¤ ì•ˆì „í•œ ê²ƒì´ ë‚«ë‹¤</li>
  <li><strong>Clickjacking ë°©ì§€</strong>: ëŒ€ë¶€ë¶„ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ iframeì— ë¡œë“œë  í•„ìš” ì—†ìŒ</li>
  <li><strong>ëª…ì‹œì  í—ˆìš©</strong>: ê°œë°œìê°€ í•„ìš”í•˜ë©´ ëª…ì‹œì ìœ¼ë¡œ ë³€ê²½í•˜ë„ë¡ ìœ ë„</li>
</ol>

<p><strong>ì¼ë°˜ì ì¸ ì›¹ì‚¬ì´íŠ¸ëŠ” DENYê°€ ë§ë‹¤:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì€í–‰, ì‡¼í•‘ëª°, ê´€ë¦¬ì í˜ì´ì§€ ë“±
â†’ iframeì— ë¡œë“œë  ì´ìœ ê°€ ì—†ìŒ
â†’ DENYë¡œ ë³´ì•ˆ ê°•í™”
</code></pre></div></div>

<p><strong>í•˜ì§€ë§Œ ìš°ë¦¬ì˜ ê²½ìš°:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Capacitor í•˜ì´ë¸Œë¦¬ë“œ ì•±
â†’ WebViewëŠ” iframeê³¼ ìœ ì‚¬í•œ í™˜ê²½
â†’ DENYë©´ ì•± ìì²´ê°€ ì‘ë™ ì•ˆ í•¨
â†’ SAMEORIGIN ë˜ëŠ” íŠ¹ì • origin í—ˆìš© í•„ìš”
</code></pre></div></div>

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<h3 id="ë°©ë²•-1-frameoptionssameorigin-ìš´ì˜-í™˜ê²½-ê¶Œì¥">ë°©ë²• 1: frameOptions().sameOrigin() (ìš´ì˜ í™˜ê²½ ê¶Œì¥)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span> <span class="o">-&gt;</span> <span class="n">headers</span>
    <span class="o">.</span><span class="na">frameOptions</span><span class="o">(</span><span class="n">frameOptions</span> <span class="o">-&gt;</span> <span class="n">frameOptions</span><span class="o">.</span><span class="na">sameOrigin</span><span class="o">())</span>
<span class="o">)</span>
</code></pre></div></div>

<p><strong>ì˜ë¯¸:</strong></p>

<ul>
  <li>ê°™ì€ ë„ë©”ì¸ì—ì„œë§Œ iframe í—ˆìš©</li>
  <li><code class="language-plaintext highlighter-rouge">https://backend.domain</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">https://backend.domain</code>ë¥¼ iframeìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥</li>
  <li>Capacitor WebViewëŠ” <code class="language-plaintext highlighter-rouge">capacitor://localhost</code>ì´ì§€ë§Œ, WebView ìì²´ê°€ íŠ¹ìˆ˜ ì²˜ë¦¬ë¨</li>
</ul>

<p><strong>ì™œ ì´ê²Œ Capacitorì—ì„œ ì‘ë™í•˜ë‚˜?</strong>
WebViewëŠ” ë¸Œë¼ìš°ì € ì—”ì§„ì˜ íŠ¹ìˆ˜ ëª¨ë“œ
â†’ origin ê²€ì‚¬ê°€ ì¼ë°˜ ì›¹ê³¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ë¨
â†’ SAMEORIGINì´ì–´ë„ WebView ë‚´ë¶€ ì»¨í…ìŠ¤íŠ¸ì—ì„œëŠ” í—ˆìš©</p>

<h3 id="ë°©ë²•-2-content-security-policy-ì¶”ê°€-ìµœê³ -ë³´ì•ˆ">ë°©ë²• 2: Content-Security-Policy ì¶”ê°€ (ìµœê³  ë³´ì•ˆ)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span> <span class="o">-&gt;</span> <span class="n">headers</span>
    <span class="o">.</span><span class="na">frameOptions</span><span class="o">(</span><span class="n">frameOptions</span> <span class="o">-&gt;</span> <span class="n">frameOptions</span><span class="o">.</span><span class="na">sameOrigin</span><span class="o">())</span>
    <span class="o">.</span><span class="na">contentSecurityPolicy</span><span class="o">(</span><span class="n">csp</span> <span class="o">-&gt;</span> <span class="n">csp</span>
        <span class="o">.</span><span class="na">policyDirectives</span><span class="o">(</span><span class="s">"frame-ancestors 'self' capacitor://localhost http://localhost https://localhost"</span><span class="o">)</span>
    <span class="o">)</span>
<span class="o">)</span>
</code></pre></div></div>

<p><strong>ì˜ë¯¸:</strong></p>

<ul>
  <li>í˜„ëŒ€ì ì¸ ë³´ì•ˆ í—¤ë” (X-Frame-Optionsì˜ í›„ì†)</li>
  <li>ë” ì„¸ë°€í•œ ì œì–´ ê°€ëŠ¥</li>
  <li>íŠ¹ì • originë§Œ ëª…ì‹œì ìœ¼ë¡œ í—ˆìš©</li>
</ul>

<h2 id="ê²°ë¡ ">ê²°ë¡ </h2>

<ul>
  <li>Capacitorë¡œ ì•±ì„ ë¹Œë“œí•œ ë‹¤ìŒì— ì›¹ì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ” ì—ëŸ¬ë“¤ì´ ìƒê²¨ì„œ ì°¾ì•„ë³´ê³ , ê³µë¶€í•˜ê³ , í•´ê²°í•˜ëŠ” ì¬ë¯¸ê°€ ìˆë‹¤.</li>
  <li>ì´ì œ í†µí™”ì—°ê²°ê¹Œì§€ ì•±ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤!!</li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œì˜ ì›¹ì†Œì¼“ ì˜¤ë¥˜ ì¤‘ X-Frame-Options ì—ëŸ¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ ë‹¤ë£¹ë‹ˆë‹¤.]]></summary></entry></feed>