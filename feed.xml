<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="ko-KR, en-US"><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="https://nan0silver.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://nan0silver.github.io/" rel="alternate" type="text/html" hreflang="ko-KR, en-US" /><updated>2025-11-21T02:05:22+00:00</updated><id>https://nan0silver.github.io/feed.xml</id><title type="html">NAHYUN BLOG</title><subtitle>Nahyunâ€™s Development Blog
Hi, Iâ€™m Nahyun Eun, a student from South Korea studying backend development with Java.  In this blog, I organize and share my learning journey in programming, with notes and insights on backend concepts and practical examples.
 Follow along as I dive into the world of coding!
</subtitle><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitor ì•± Custom Splash Screen êµ¬í˜„í•˜ê¸°</title><link href="https://nan0silver.github.io/projectdiary/2025-11-20-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitor ì•± Custom Splash Screen êµ¬í˜„í•˜ê¸°" /><published>2025-11-20T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-20-diary/"><![CDATA[<ul>
  <li>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„  Capacitorë¡œ ë¹Œë“œí•œ ì•±ì—ì„œ ì—¬ëŸ¬ ì•„ì´ì½˜ì´ ìˆœì°¨ì ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í•´ ë³´ì•˜ë‹¤..</li>
  <li>ì™œ Custom splash screenì´ í•„ìš”í–ˆë‚˜?
    <ul>
      <li>Capacitorì˜ ê¸°ë³¸ splash screenì€ ë‹¨ì¼ ì •ì  ì´ë¯¸ì§€ë§Œ ì§€ì›í•œë‹¤.<a href="https://capacitorjs.com/docs/apis/splash-screen">ğŸ”—ë§í¬</a></li>
      <li>ë‚˜ëŠ” ì—¬ëŸ¬ ì•„ì´ì½˜ì„ ìˆœì°¨ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•˜ê³  ì‹¶ì–´ React ì»´í¬ë„ŒíŠ¸ë¡œ ì§ì ‘ êµ¬í˜„í•˜ì˜€ë‹¤!</li>
    </ul>
  </li>
</ul>

<h2 id="ëª©ì°¨">ëª©ì°¨</h2>

<ul>
  <li><a href="#1-í•„ìš”í•œ-íŒ¨í‚¤ì§€-ì„¤ì¹˜">1. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜</a></li>
  <li><a href="#2-capacitor-ì„¤ì •">2. Capacitor ì„¤ì •</a></li>
  <li><a href="#3-ì»¤ìŠ¤í…€-ìŠ¤í”Œë˜ì‹œ-ìŠ¤í¬ë¦°-ì»´í¬ë„ŒíŠ¸-ìƒì„±">3. ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì»´í¬ë„ŒíŠ¸ ìƒì„±</a></li>
  <li><a href="#4-apptsxì—-í†µí•©">4. App.tsxì— í†µí•©</a></li>
  <li><a href="#í•µì‹¬-êµ¬í˜„-í¬ì¸íŠ¸">í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸</a></li>
  <li><a href="#ì£¼ì˜ì‚¬í•­">ì£¼ì˜ì‚¬í•­</a></li>
  <li><a href="#ì°¸ê³ -ë¬¸í—Œ">ì°¸ê³  ë¬¸í—Œ</a></li>
</ul>

<hr />

<h2 id="1-í•„ìš”í•œ-íŒ¨í‚¤ì§€-ì„¤ì¹˜">1. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜</h2>

<p>ë¨¼ì € ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ê´€ë ¨ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì.</p>

<blockquote>
  <p>ë‚˜ëŠ” pnpmì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìœ¼ë¯€ë¡œ pnpmìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pnpm add @capacitor/splash-screen
pnpm add <span class="nt">-D</span> @capacitor/assets
</code></pre></div></div>

<h2 id="2-capacitor-ì„¤ì •">2. Capacitor ì„¤ì •</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">capacitor.config.ts</code> íŒŒì¼ì— ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì„¤ì •ì„ ì¶”ê°€í•˜ì.</li>
  <li>â€¼ï¸ ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œëŠ” ìµœì†Œí™”!</li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;reference types="@capacitor/splash-screen" /&gt;</span>

<span class="k">import</span> <span class="kd">type</span> <span class="p">{</span> <span class="nx">CapacitorConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@capacitor/cli</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">config</span><span class="p">:</span> <span class="nx">CapacitorConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// ... ê¸°íƒ€ ì„¤ì •</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">SplashScreen</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">launchShowDuration</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ 0ìœ¼ë¡œ ì„¤ì •</span>
      <span class="na">launchAutoHide</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ìë™ìœ¼ë¡œ ìˆ¨ê¸¸ì§€ ì—¬ë¶€</span>
      <span class="na">launchFadeOutDuration</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// í˜ì´ë“œ ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ (ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œì—ì„œ ì²˜ë¦¬)</span>
      <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#ffffff</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// ë°°ê²½ìƒ‰ (hex í˜•ì‹) - ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œì™€ ë™ì¼í•˜ê²Œ ì„¤ì •</span>
      <span class="c1">// ... ê¸°íƒ€ ì„¤ì •</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">config</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="3-ì»¤ìŠ¤í…€-ìŠ¤í”Œë˜ì‹œ-ìŠ¤í¬ë¦°-ì»´í¬ë„ŒíŠ¸-ìƒì„±">3. ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì»´í¬ë„ŒíŠ¸ ìƒì„±</h2>

<p><code class="language-plaintext highlighter-rouge">client/components/CustomSplashScreen.tsx</code> íŒŒì¼ì„ ìƒì„±í•œë‹¤.</p>

<h3 id="props-ì •ì˜">Props ì •ì˜</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">CustomSplashScreenProps</span> <span class="p">{</span>
  <span class="nl">onComplete</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span> <span class="c1">// ìŠ¤í”Œë˜ì‹œ ì™„ë£Œ ì‹œ ì½œë°±</span>
  <span class="nl">icons</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span> <span class="c1">// í‘œì‹œí•  ì•„ì´ì½˜ ë°°ì—´</span>
  <span class="nl">iconDuration</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// ê° ì•„ì´ì½˜ í‘œì‹œ ì‹œê°„(ms)</span>
  <span class="nl">minDisplayDuration</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// ìµœì†Œ í‘œì‹œ ì‹œê°„(ms)</span>
  <span class="nl">animationType</span><span class="p">?:</span> <span class="dl">"</span><span class="s2">slide-up</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">fade</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
  <span class="nl">backgroundColor</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="í•µì‹¬-ë¡œì§">í•µì‹¬ ë¡œì§</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">CustomSplashScreen</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">onComplete</span><span class="p">,</span>
  <span class="nx">icons</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="nx">iconDuration</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nx">minDisplayDuration</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
  <span class="nx">animationType</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">slide-up</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">backgroundColor</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">#ffffff</span><span class="dl">"</span><span class="p">,</span>
<span class="p">}:</span> <span class="nx">CustomSplashScreenProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">currentIconIndex</span><span class="p">,</span> <span class="nx">setCurrentIconIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isVisible</span><span class="p">,</span> <span class="nx">setIsVisible</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="c1">// 1. ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° ì¦‰ì‹œ ìˆ¨ê¸°ê¸°</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">hideNativeSplash</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">SplashScreen</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ì›¹ í™˜ê²½ì—ì„œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¬´ì‹œ</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">hideNativeSplash</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// 2. ì•„ì´ì½˜ ìˆœì°¨ í‘œì‹œ ë¡œì§</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">icons</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setIsVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
      <span class="p">},</span> <span class="nx">minDisplayDuration</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ì•„ì´ì½˜ ì „í™˜ ì¸í„°ë²Œ</span>
    <span class="kd">const</span> <span class="nx">iconInterval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setCurrentIconIndex</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span> <span class="o">&lt;</span> <span class="nx">icons</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">prev</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">},</span> <span class="nx">iconDuration</span><span class="p">);</span>

    <span class="c1">// ì´ í‘œì‹œ ì‹œê°„ ê³„ì‚°</span>
    <span class="kd">const</span> <span class="nx">totalAnimationDuration</span> <span class="o">=</span> <span class="nx">icons</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="nx">iconDuration</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">actualDuration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">totalAnimationDuration</span><span class="p">,</span> <span class="nx">minDisplayDuration</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">completeTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setIsVisible</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">onComplete</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">actualDuration</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">iconInterval</span><span class="p">);</span>
      <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">completeTimer</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">icons</span><span class="p">,</span> <span class="nx">iconDuration</span><span class="p">,</span> <span class="nx">minDisplayDuration</span><span class="p">,</span> <span class="nx">onComplete</span><span class="p">]);</span>

  <span class="c1">// ... ë Œë”ë§ ë¡œì§</span>
<span class="p">};</span>
</code></pre></div></div>

<ul>
  <li>ì•„ì´ì½˜ ìŠ¬ë¼ì´ë“œ ì• ë‹ˆë©”ì´ì…˜ê³¼ í…ìŠ¤íŠ¸ ì¶”ê°€ ë“± ê°œì¸ì˜ ë””ìì¸ì— ë§ê²Œ React ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ ê¾¸ë©°ì£¼ë©´ ëœë‹¤!!</li>
</ul>

<h2 id="4-apptsxì—-í†µí•©">4. App.tsxì— í†µí•©</h2>

<p>ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸ì— ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°ì„ í†µí•©í•©ë‹ˆë‹¤.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">CustomSplashScreen</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/CustomSplashScreen</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AppRoutes</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">showSplash</span><span class="p">,</span> <span class="nx">setShowSplash</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="c1">// ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°ì— í‘œì‹œí•  ì•„ì´ì½˜ë“¤</span>
  <span class="kd">const</span> <span class="nx">splashIcons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">/splash-icons/icon1.png</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">/splash-icons/icon2.png</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">/splash-icons/icon3.png</span><span class="dl">"</span><span class="p">,</span>
    <span class="c1">// ... ë” ë§ì€ ì•„ì´ì½˜</span>
  <span class="p">];</span>

  <span class="kd">const</span> <span class="nx">handleSplashComplete</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setShowSplash</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">showSplash</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">CustomSplashScreen</span>
        <span class="nx">onComplete</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSplashComplete</span><span class="p">}</span>
        <span class="nx">icons</span><span class="o">=</span><span class="p">{</span><span class="nx">splashIcons</span><span class="p">}</span>
        <span class="nx">iconDuration</span><span class="o">=</span><span class="p">{</span><span class="mi">400</span><span class="p">}</span>
        <span class="nx">minDisplayDuration</span><span class="o">=</span><span class="p">{</span><span class="mi">2000</span><span class="p">}</span>
        <span class="nx">animationType</span><span class="o">=</span><span class="dl">"</span><span class="s2">slide-up</span><span class="dl">"</span>
      <span class="o">/&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// ... ë‚˜ë¨¸ì§€ ì•± ë¡œì§</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-í•µì‹¬-êµ¬í˜„-í¬ì¸íŠ¸-">ğŸ í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸ ğŸ</h2>

<h3 id="1-ë„¤ì´í‹°ë¸Œ-ìŠ¤í”Œë˜ì‹œì™€-ì»¤ìŠ¤í…€-ìŠ¤í”Œë˜ì‹œ-ë¶„ë¦¬">1. ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œì™€ ì»¤ìŠ¤í…€ ìŠ¤í”Œë˜ì‹œ ë¶„ë¦¬</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">launchShowDuration: 0</code>ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œë¥¼ ì¦‰ì‹œ ìˆ¨ê¹€</li>
  <li><code class="language-plaintext highlighter-rouge">SplashScreen.hide()</code>ë¥¼ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í˜¸ì¶œ</li>
</ul>

<h3 id="2-í…ìŠ¤íŠ¸-ê¹œë¹¡ì„-ë°©ì§€">2. í…ìŠ¤íŠ¸ ê¹œë¹¡ì„ ë°©ì§€</h3>

<p>ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ë¥¼ ë³„ë„ì˜ <code class="language-plaintext highlighter-rouge">div</code>ë¡œ ë Œë”ë§í•˜ì—¬ ì•„ì´ì½˜ì´ ë³€ê²½ë  ë•Œ í…ìŠ¤íŠ¸ê°€ ê¹œë¹¡ì´ì§€ ì•Šë„ë¡ êµ¬í˜„</p>

<h3 id="3-ë¶€ë“œëŸ¬ìš´-ì• ë‹ˆë©”ì´ì…˜">3. ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜</h3>

<p>CSS <code class="language-plaintext highlighter-rouge">transition</code>ê³¼ <code class="language-plaintext highlighter-rouge">cubic-bezier</code> íƒ€ì´ë° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ íš¨ê³¼ êµ¬í˜„</p>

<h3 id="4-ìµœì†Œ-í‘œì‹œ-ì‹œê°„-ë³´ì¥">4. ìµœì†Œ í‘œì‹œ ì‹œê°„ ë³´ì¥</h3>

<p><code class="language-plaintext highlighter-rouge">minDisplayDuration</code>ì„ ì„¤ì •í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ì´ ë„ˆë¬´ ë¹¨ë¦¬ ëë‚˜ë„ ìµœì†Œ ì‹œê°„ì€ ë³´ì¥</p>

<h3 id="5-ì´ë¯¸ì§€-ì¤€ë¹„">5. ì´ë¯¸ì§€ ì¤€ë¹„</h3>

<p>ì•„ì´ì½˜ ì´ë¯¸ì§€ëŠ” <code class="language-plaintext highlighter-rouge">public/splash-icons/</code> ë””ë ‰í† ë¦¬ì— ì €ì¥í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public/
  splash-icons/
    icon1.png
    icon2.png
    icon3.png
</code></pre></div></div>

<h2 id="ï¸-ì£¼ì˜ì‚¬í•­">â€¼ï¸ ì£¼ì˜ì‚¬í•­</h2>

<ul>
  <li>ì´ë¯¸ì§€ëŠ” ë°˜ë“œì‹œ <code class="language-plaintext highlighter-rouge">public</code> í´ë”ì— ì €ì¥ (ë¹Œë“œ ì‹œ ìë™ í¬í•¨)</li>
  <li>ì›¹ í™˜ê²½ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">SplashScreen.hide()</code>ê°€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ try-catch ì²˜ë¦¬ í•„ìš”</li>
  <li>Android 12 ì´ìƒì—ì„œëŠ” ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œ APIê°€ ê°•ì œ ì ìš©ë˜ë¯€ë¡œ ì´ˆê¸° 0.5ì´ˆëŠ” ë„¤ì´í‹°ë¸Œ ìŠ¤í”Œë˜ì‹œê°€ ë³´ì¼ ìˆ˜ ìˆìŒ</li>
</ul>

<h2 id="-ì°¸ê³ -ë¬¸í—Œ">ğŸ€ ì°¸ê³  ë¬¸í—Œ</h2>

<ul>
  <li><a href="https://github.com/ionic-team/capacitor-assets">Capacitor assets github page</a></li>
  <li><a href="https://capacitorjs.com/docs/apis/splash-screen">@capacitor/splash-screen DOCS</a></li>
  <li><a href="https://capacitorjs.com/docs/guides/splash-screens-and-icons">Splash Screens and Icons DOCS</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ ì•±ì—ì„œ Splash Screenì„ Reactë¡œ ì§ì ‘ êµ¬í˜„í•œ ë‚´ìš©ì— ëŒ€í•´ ë‹¤ë£¹ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitor Android ì•± X-Frame-Options ì—ëŸ¬ í•´ê²°</title><link href="https://nan0silver.github.io/projectdiary/2025-11-17-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitor Android ì•± X-Frame-Options ì—ëŸ¬ í•´ê²°" /><published>2025-11-17T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-17-diary/"><![CDATA[<ul>
  <li>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œ WebSocket í†µì‹  ì¤‘ ë°œìƒí•œ X-Frame-Options ì—ëŸ¬ì— ëŒ€í•´ ë‹¤ë£¨ì—ˆë‹¤.</li>
  <li>í•´ê²°í•˜ëŠ” ê³¼ì •ì—ì„œ ê³µë¶€í•œ ë‚´ìš©ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ë‹¤.</li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>ì›¹ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë˜ <strong>ë§¤ì¹­ ì™„ë£Œ -&gt; WebSocket ë©”ì‹œì§€ ìˆ˜ì‹  -&gt; í†µí™” ì‹œì‘ í˜ì´ì§€ ì´ë™</strong> ë¡œì§ì´ Android ì•±ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ë¡œ ì‹¤íŒ¨í–ˆë‹¤.</li>
</ul>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic1.png?raw=true" alt="ì—ëŸ¬ ì´ë¯¸ì§€1" /></p>

<ul>
  <li>ğŸ”¥ ì´ ë¬¸ì œëŠ” <strong>Capacitorì˜ WebView í™˜ê²½ê³¼ Spring Securityì˜ ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •ì´ ì¶©ëŒ</strong>í•˜ë©´ì„œ ë°œìƒ! ğŸ”¥</li>
  <li>WebSocket ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ SockJSê°€ fallback ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ iframeì„ ì‚¬ìš©í•˜ë ¤ í–ˆì§€ë§Œ, ì„œë²„ê°€ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì´ë¥¼ ì°¨ë‹¨í–ˆê¸° ë•Œë¬¸ì´ë‹¤.</li>
  <li>ì´ ê¸€ì—ì„œëŠ” X-Frame-Optionsê°€ ë¬´ì—‡ì¸ì§€, iframeì´ ë¬´ì—‡ì¸ì§€, ê·¸ë¦¬ê³  ì™œ ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí–‡ëŠ”ì§€ë¥¼ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</li>
</ul>

<h2 id="1-iframe-ì´ë€">1. iframe ì´ë€?</h2>

<ul>
  <li><strong>iframe (inline frame)</strong>ì€ HTML ë¬¸ì„œ ì•ˆì—ì„œ ë‹¤ë¥¸ HTML ë¬¸ì„œë¥¼ ì‚½ì…í•˜ëŠ” íƒœê·¸ì´ë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- ì˜ˆì‹œ: ìœ íŠœë¸Œ ì˜ìƒ ì‚½ì… --&gt;
&lt;iframe
    src="https://www.youtube.com/embed/VIDEO_ID"
    width="560"
    height="315"&gt;
&lt;/iframe&gt;
</code></pre></div></div>

<p><strong>ì‹œê°ì  êµ¬ì¡°:</strong>
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic2.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€1" /></p>

<ul>
  <li>ì‹¤ìƒí™œ ì˜ˆì‹œ : ìœ íŠœë¸Œ ì˜ìƒ ì‚½ì…, êµ¬ê¸€ ì§€ë„ ì‚½ì…, í˜ì´ìŠ¤ë¶ â€œì¢‹ì•„ìš”â€ ë²„íŠ¼ ë“±</li>
</ul>

<h2 id="2-x-frame-options-ì´ë€">2. X-Frame-Options ì´ë€?</h2>

<ul>
  <li>
    <p><strong>X-Frame-Options</strong>ëŠ” HTTP ì‘ë‹µ í—¤ë”ë¡œ, ë‚´ ì›¹ì‚¬ì´íŠ¸ê°€ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì˜ iframeì•ˆì— í‘œì‹œë˜ëŠ” ê²ƒì„ ì œì–´í•˜ëŠ” ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜</p>
  </li>
  <li>
    <p>í—¤ë” ê°’ 3ê°€ì§€:</p>
    <ul>
      <li>X-Frame-Options: DENY
        <ul>
          <li>ì–´ë–¤ ì‚¬ì´íŠ¸ë“  iframeìœ¼ë¡œ ë‚´ í˜ì´ì§€ë¥¼ ë¡œë“œí•  ìˆ˜ ì—†ìŒ</li>
        </ul>
      </li>
      <li>X-Frame-Options: SAMEORIGIN
        <ul>
          <li>ê°™ì€ ë„ë©”ì¸ì—ì„œë§Œ iframeìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥</li>
        </ul>
      </li>
      <li>X-Frame-Options: ALLOW-FROM https://example.com
        <ul>
          <li>íŠ¹ì • ë„ë©”ì¸ì—ì„œë§Œ iframeìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥ (deprecated)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ì™œ-x-frame-optionsê°€-í•„ìš”í•œê°€">ì™œ X-Frame-Optionsê°€ í•„ìš”í•œê°€?</h3>

<ul>
  <li><strong>Clickjacking ê³µê²© ë°©ì§€</strong>
    <ul>
      <li>ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ê°€ íˆ¬ëª…í•œ iframeì„ í†µí•´ ì‚¬ìš©ìë¥¼ ì†ì—¬ ì›í•˜ì§€ ì•ŠëŠ” í–‰ë™ì„ í•˜ê²Œ ë§Œë“œëŠ” ê³µê²©</li>
    </ul>
  </li>
</ul>

<p><strong>ê³µê²© ì‹œë‚˜ë¦¬ì˜¤:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. ê³µê²©ìê°€ ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸° (evil.com)

2. íˆ¬ëª…í•œ iframeìœ¼ë¡œ ì€í–‰ ì‚¬ì´íŠ¸ë¥¼ ìˆ¨ê¹€
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ evil.com                        â”‚
   â”‚                                 â”‚
   â”‚ [ë¬´ë£Œ iPhone ë°›ê¸°!] ë²„íŠ¼           â”‚
   â”‚        â†‘                        â”‚
   â”‚        ì‹¤ì œë¡œëŠ” íˆ¬ëª…í•œ iframe       â”‚
   â”‚        ì€í–‰ ì†¡ê¸ˆ ë²„íŠ¼ì´ ìœ„ì¹˜         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ì‚¬ìš©ìê°€ "ë¬´ë£Œ iPhone ë°›ê¸°!" í´ë¦­
   â†’ ì‹¤ì œë¡œëŠ” ì€í–‰ì˜ "ì†¡ê¸ˆ ìŠ¹ì¸" ë²„íŠ¼ í´ë¦­
   â†’ ëˆì´ ê³µê²©ìì—ê²Œ ì „ì†¡ë¨ ğŸ¥²
</code></pre></div></div>

<p><strong>X-Frame-Options: DENYê°€ ë§‰ëŠ” ë°©ë²•:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ evil.com                        â”‚
â”‚                                 â”‚
â”‚ &lt;iframe src="bank.com"&gt;         â”‚
â”‚   âŒ ë¸Œë¼ìš°ì €ê°€ ë¡œë“œ ê±°ë¶€!           â”‚
â”‚   "X-Frame-Options: DENY"       â”‚
â”‚ &lt;/iframe&gt;                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div>

<h2 id="ï¸-capacitorë¡œ-ë¹Œë“œí•œ-ì•±ì—ì„œ-ì´-ë¬¸ì œê°€-ë°œìƒí•œ-ì´ìœ ">â€¼ï¸ Capacitorë¡œ ë¹Œë“œí•œ ì•±ì—ì„œ ì´ ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ </h2>

<ul>
  <li>CapacitorëŠ” <strong>í•˜ì´ë¸Œë¦¬ë“œ ì•±</strong>ì„ ë§Œë“œëŠ” í”„ë ˆì„ì›Œí¬ì´ë‹¤.</li>
</ul>

<p><strong>í•˜ì´ë¸Œë¦¬ë“œ ì•± êµ¬ì¡°</strong>
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic3.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€2" /></p>

<ul>
  <li>WebViewëŠ” ë³¸ì§ˆì ìœ¼ë¡œ iframeê³¼ ìœ ì‚¬í•˜ë‹¤!</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ë„¤ì´í‹°ë¸Œ ì•± (Android/iOS)
    â””â”€â”€ WebView â‰ˆ iframe
         â””â”€â”€ React ì•± (https://localhost)
              â””â”€â”€ WebSocket ì—°ê²° ì‹œë„ â†’ ë°±ì—”ë“œ (https://backend.domain)
</code></pre></div></div>

<h3 id="sockjsì˜-iframe-transport"><strong>SockJSì˜ iframe Transport</strong></h3>

<p><strong>SockJS</strong>ëŠ” WebSocketì´ ì•ˆ ë  ë•Œë¥¼ ëŒ€ë¹„í•œ ì—¬ëŸ¬ fallback ë°©ë²•ì„ ì œê³µí•œë‹¤.</p>

<p><strong>SockJS Transport ìˆœì„œ:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. WebSocket (ê°€ì¥ ë¹ ë¥´ê³  íš¨ìœ¨ì )
   â†“ ì‹¤íŒ¨
2. xhr-streaming (HTTP ìŠ¤íŠ¸ë¦¬ë°)
   â†“ ì‹¤íŒ¨
3. xhr-polling (HTTP í´ë§)
   â†“ ì‹¤íŒ¨
4. iframe-based transports (ë ˆê±°ì‹œ ë¸Œë¼ìš°ì €ìš©)
   â†“ ì‹¤íŒ¨
5. jsonp-polling (ìµœí›„ì˜ ìˆ˜ë‹¨)
</code></pre></div></div>

<ul>
  <li>iframe-based transportê°€ í•˜ëŠ” ì¼:</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- SockJSê°€ ë‚´ë¶€ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìˆ¨ê²¨ì§„ iframe --&gt;</span>
<span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"https://backend.domain/ws/iframe.html"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/iframe&gt;</span>
</code></pre></div></div>

<h3 id="ë¬¸ì œ-ë°œìƒ-ì‹œë‚˜ë¦¬ì˜¤"><strong>ë¬¸ì œ ë°œìƒ ì‹œë‚˜ë¦¬ì˜¤:</strong></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. Capacitor ì•± (WebView) ì‹œì‘
   Origin: capacitor://localhost

2. WebSocket ì—°ê²° ì‹œë„ (ì¹œêµ¬í•˜ì í”„ë¡œì íŠ¸ì˜ ê²½ìš°, í†µí™” ë§¤ì¹­ì‹œ ì‚¬ìš© ì¤‘)
   â†’ https://backend.domain/ws

3. SockJSê°€ iframe transport ì‹œë„
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Capacitor WebView               â”‚
   â”‚ (capacitor://localhost)         â”‚
   â”‚                                 â”‚
   â”‚ &lt;iframe src="backend.domain/ws"&gt; â”‚
   â”‚   âŒ ì°¨ë‹¨ë¨!                     â”‚
   â”‚   "X-Frame-Options: DENY"       â”‚
   â”‚ &lt;/iframe&gt;                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. ì—ëŸ¬ ë©”ì‹œì§€:
   "Refused to display 'https://backend.domain/'
    in a frame because it set 'X-Frame-Options' to 'deny'"
</code></pre></div></div>

<h3 id="ì™œ-spring-securityê°€-ê¸°ë³¸ì ìœ¼ë¡œ-denyë¥¼-ì„¤ì •í• ê¹Œ">ì™œ Spring Securityê°€ ê¸°ë³¸ì ìœ¼ë¡œ Denyë¥¼ ì„¤ì •í• ê¹Œ?</h3>

<ul>
  <li>Spring Securityì˜ ë³´ì•ˆ ìš°ì„  ì² í•™ :
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-17-pic4.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€3" /></li>
</ul>

<p><strong>ì´ìœ </strong></p>

<ol>
  <li><strong>ë³´ì•ˆ ìš°ì„ ì£¼ì˜</strong>: ì•ˆì „í•˜ì§€ ì•Šì€ ê²ƒë³´ë‹¤ ì•ˆì „í•œ ê²ƒì´ ë‚«ë‹¤</li>
  <li><strong>Clickjacking ë°©ì§€</strong>: ëŒ€ë¶€ë¶„ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ iframeì— ë¡œë“œë  í•„ìš” ì—†ìŒ</li>
  <li><strong>ëª…ì‹œì  í—ˆìš©</strong>: ê°œë°œìê°€ í•„ìš”í•˜ë©´ ëª…ì‹œì ìœ¼ë¡œ ë³€ê²½í•˜ë„ë¡ ìœ ë„</li>
</ol>

<p><strong>ì¼ë°˜ì ì¸ ì›¹ì‚¬ì´íŠ¸ëŠ” DENYê°€ ë§ë‹¤:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì€í–‰, ì‡¼í•‘ëª°, ê´€ë¦¬ì í˜ì´ì§€ ë“±
â†’ iframeì— ë¡œë“œë  ì´ìœ ê°€ ì—†ìŒ
â†’ DENYë¡œ ë³´ì•ˆ ê°•í™”
</code></pre></div></div>

<p><strong>í•˜ì§€ë§Œ ìš°ë¦¬ì˜ ê²½ìš°:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Capacitor í•˜ì´ë¸Œë¦¬ë“œ ì•±
â†’ WebViewëŠ” iframeê³¼ ìœ ì‚¬í•œ í™˜ê²½
â†’ DENYë©´ ì•± ìì²´ê°€ ì‘ë™ ì•ˆ í•¨
â†’ SAMEORIGIN ë˜ëŠ” íŠ¹ì • origin í—ˆìš© í•„ìš”
</code></pre></div></div>

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<h3 id="ë°©ë²•-1-frameoptionssameorigin-ìš´ì˜-í™˜ê²½-ê¶Œì¥">ë°©ë²• 1: frameOptions().sameOrigin() (ìš´ì˜ í™˜ê²½ ê¶Œì¥)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span> <span class="o">-&gt;</span> <span class="n">headers</span>
    <span class="o">.</span><span class="na">frameOptions</span><span class="o">(</span><span class="n">frameOptions</span> <span class="o">-&gt;</span> <span class="n">frameOptions</span><span class="o">.</span><span class="na">sameOrigin</span><span class="o">())</span>
<span class="o">)</span>
</code></pre></div></div>

<p><strong>ì˜ë¯¸:</strong></p>

<ul>
  <li>ê°™ì€ ë„ë©”ì¸ì—ì„œë§Œ iframe í—ˆìš©</li>
  <li><code class="language-plaintext highlighter-rouge">https://backend.domain</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">https://backend.domain</code>ë¥¼ iframeìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥</li>
  <li>Capacitor WebViewëŠ” <code class="language-plaintext highlighter-rouge">capacitor://localhost</code>ì´ì§€ë§Œ, WebView ìì²´ê°€ íŠ¹ìˆ˜ ì²˜ë¦¬ë¨</li>
</ul>

<p><strong>ì™œ ì´ê²Œ Capacitorì—ì„œ ì‘ë™í•˜ë‚˜?</strong>
WebViewëŠ” ë¸Œë¼ìš°ì € ì—”ì§„ì˜ íŠ¹ìˆ˜ ëª¨ë“œ
â†’ origin ê²€ì‚¬ê°€ ì¼ë°˜ ì›¹ê³¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ë¨
â†’ SAMEORIGINì´ì–´ë„ WebView ë‚´ë¶€ ì»¨í…ìŠ¤íŠ¸ì—ì„œëŠ” í—ˆìš©</p>

<h3 id="ë°©ë²•-2-content-security-policy-ì¶”ê°€-ìµœê³ -ë³´ì•ˆ">ë°©ë²• 2: Content-Security-Policy ì¶”ê°€ (ìµœê³  ë³´ì•ˆ)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">headers</span><span class="o">(</span><span class="n">headers</span> <span class="o">-&gt;</span> <span class="n">headers</span>
    <span class="o">.</span><span class="na">frameOptions</span><span class="o">(</span><span class="n">frameOptions</span> <span class="o">-&gt;</span> <span class="n">frameOptions</span><span class="o">.</span><span class="na">sameOrigin</span><span class="o">())</span>
    <span class="o">.</span><span class="na">contentSecurityPolicy</span><span class="o">(</span><span class="n">csp</span> <span class="o">-&gt;</span> <span class="n">csp</span>
        <span class="o">.</span><span class="na">policyDirectives</span><span class="o">(</span><span class="s">"frame-ancestors 'self' capacitor://localhost http://localhost https://localhost"</span><span class="o">)</span>
    <span class="o">)</span>
<span class="o">)</span>
</code></pre></div></div>

<p><strong>ì˜ë¯¸:</strong></p>

<ul>
  <li>í˜„ëŒ€ì ì¸ ë³´ì•ˆ í—¤ë” (X-Frame-Optionsì˜ í›„ì†)</li>
  <li>ë” ì„¸ë°€í•œ ì œì–´ ê°€ëŠ¥</li>
  <li>íŠ¹ì • originë§Œ ëª…ì‹œì ìœ¼ë¡œ í—ˆìš©</li>
</ul>

<h2 id="ê²°ë¡ ">ê²°ë¡ </h2>

<ul>
  <li>Capacitorë¡œ ì•±ì„ ë¹Œë“œí•œ ë‹¤ìŒì— ì›¹ì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ” ì—ëŸ¬ë“¤ì´ ìƒê²¨ì„œ ì°¾ì•„ë³´ê³ , ê³µë¶€í•˜ê³ , í•´ê²°í•˜ëŠ” ì¬ë¯¸ê°€ ìˆë‹¤.</li>
  <li>ì´ì œ í†µí™”ì—°ê²°ê¹Œì§€ ì•±ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤!!</li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œì˜ ì›¹ì†Œì¼“ ì˜¤ë¥˜ ì¤‘ X-Frame-Options ì—ëŸ¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ ë‹¤ë£¹ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitor ì•±ì—ì„œ Kakao/Google ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ êµ¬í˜„ ì •ë¦¬</title><link href="https://nan0silver.github.io/projectdiary/2025-11-13-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitor ì•±ì—ì„œ Kakao/Google ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ êµ¬í˜„ ì •ë¦¬" /><published>2025-11-13T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-13-diary/"><![CDATA[<ul>
  <li>Capacitorë¡œ ë¹Œë“œí•œ React ì•±ì—ì„œ ì¹´ì¹´ì˜¤ì™€ êµ¬ê¸€ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í•´ ë³´ì•˜ë‹¤.</li>
  <li>ê´€ë ¨ë˜ì„œ ì •ë¦¬ë˜ì–´ìˆëŠ”ê²Œ ì—†ëŠ”ê²ƒ ê°™ì•„ì„œ.. ë‚´ê°€ ë‚˜ì¤‘ì— ì°¾ì•„ë³¼ ìˆ˜ ìˆê²Œ ì¼ë‹¨ ë¬¸ì„œë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.</li>
  <li>ì›¹ì—ì„œëŠ” ì¼ë°˜ OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ëª¨ë°”ì¼ ì•±ì—ì„œëŠ” <strong>ë„¤ì´í‹°ë¸Œ SDKë¥¼ ì§ì ‘ ì‚¬ìš©</strong>í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆë‹¤. (kakao, google)
    <ul>
      <li>kakao developerì—ëŠ” flutterë¬¸ì„œì—ì„œ í¬ë¡œìŠ¤ í”Œë«í¼ì—ì„œëŠ” ì»¤ìŠ¤í…€ URL ìŠ¤í‚´ì„ ì‚¬ìš©í•˜ë¼ê³  ê¶Œì¥í•œë‹¤. í•˜ì§€ë§Œ ë‚˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ë³´ì•˜ë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="ë„¤ì´í‹°ë¸Œ-sdk-ì§ì ‘-ì‚¬ìš©-êµ¬í—Œ-ë°©ì‹-ì¹´ì¹´ì˜¤-êµ¬ê¸€">ë„¤ì´í‹°ë¸Œ SDK ì§ì ‘ ì‚¬ìš© êµ¬í—Œ ë°©ì‹ (ì¹´ì¹´ì˜¤, êµ¬ê¸€)</h3>

<p><strong>ë„¤ì´í‹°ë¸Œ SDK ë¡œê·¸ì¸ ë°©ì‹ì´ë€?</strong></p>

<ul>
  <li>ì¹´ì¹´ì˜¤/êµ¬ê¸€ì´ ì œê³µí•˜ëŠ” Android/iOS ì „ìš© SDKë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ì¸ ë°©ì‹</li>
  <li>ì•± ê°„ í†µì‹  ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.
    <ul>
      <li>ì¦‰, ê¸°ê¸°ì— ì„¤ì¹˜ëœ ì¹´ì¹´ì˜¤í†¡/êµ¬ê¸€ ì•±ê³¼ ì§ì ‘ í†µì‹ í•˜ì—¬ ì¸ì¦í•œë‹¤.</li>
    </ul>
  </li>
  <li>WebViewë¥¼ ìš°íšŒí•˜ì—¬ ë¸Œë¼ìš°ì € ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ì´ ì•± ë ˆë²¨ì—ì„œ í† í°ì„ êµí™˜í•œë‹¤.</li>
</ul>

<p><strong>ì´ ë°©ì‹ì´ í•˜ì´ë¸Œë¦¬ë“œ ì•±ì—ì„œ ê°€ëŠ¥í•œ ì´ìœ </strong></p>

<ul>
  <li>â­ï¸<strong>Capacitorì˜ í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ</strong>â­ï¸ì´ í•µì‹¬!</li>
</ul>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-13-pic1.png?raw=true" alt="ì„¤ëª… ì´ë¯¸ì§€1" /></p>

<ul>
  <li>WebViewì˜ JavaScript ì½”ë“œê°€ ë„¤ì´í‹°ë¸Œ ì½”ë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•´ì¤Œ</li>
  <li><code class="language-plaintext highlighter-rouge">KakaoLoginPlugin.goLogin()</code>ì„ í†µí•´ ì‹¤ì œë¡œ Androidì˜ ì¹´ì¹´ì˜¤ SDK ì‹¤í–‰</li>
  <li>ê²°ê³¼ë¥¼ ë‹¤ì‹œ JavaScriptë¡œ ì „ë‹¬</li>
</ul>

<p>*<em>ì•± êµ¬ì¡° ë¹„êµ</em></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì•ˆë“œë¡œì´ë“œì—ì„œ ì‹¤í–‰ ì‹œ</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">Capacitor</span><span class="p">.</span><span class="nx">isNativePlatform</span><span class="p">())</span> <span class="p">{</span>
  <span class="c1">// âœ… ë„¤ì´í‹°ë¸Œ SDK ì‚¬ìš© (ì•±ê°„ í†µì‹ )</span>
  <span class="c1">// ì¹´ì¹´ì˜¤í†¡ ì•± â†’ ë‚´ ì•± (ë¹ ë¥´ê³  ì•ˆì •ì )</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">KakaoLoginPlugin</span><span class="p">.</span><span class="nx">goLogin</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ ì‹œ</span>
<span class="k">else</span> <span class="p">{</span>
  <span class="c1">// âœ… OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‚¬ìš© (ë¸Œë¼ìš°ì € ê¸°ë°˜)</span>
  <span class="c1">// ë¸Œë¼ìš°ì € â†’ ì¹´ì¹´ì˜¤ ì›¹ â†’ ì½œë°± URL</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://kauth.kakao.com/oauth/...</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ </strong></p>

<ul>
  <li>ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ì˜ ì¥ì :
    <ul>
      <li>ì‚¬ìš©ìê°€ ì¹´ì¹´ì˜¤í†¡ì´ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ ì•± ì „í™˜ë§Œìœ¼ë¡œ ì¦‰ì‹œ ë¡œê·¸ì¸</li>
      <li>ë¸Œë¼ìš°ì € ë¦¬ë‹¤ì´ë ‰íŠ¸ë³´ë‹¤ UXê°€ í›¨ì”¬ ë¶€ë“œëŸ¬ì›€</li>
      <li>DeepLink, Custom URL Scheme ë¬¸ì œ ì—†ìŒ</li>
    </ul>
  </li>
  <li>ì›¹ ë¡œê·¸ì¸:
    <ul>
      <li>ë¸Œë¼ìš°ì €ì—ì„œëŠ” ë„¤ì´í‹°ë¸Œ SDKë¥¼ ì“¸ ìˆ˜ ì—†ìœ¼ë‹ˆ ì „í†µì ì¸ OAuth ë°©ì‹ ì‚¬ìš©</li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="1-ì¹´ì¹´ì˜¤-ë„¤ì´í‹°ë¸Œ-ë¡œê·¸ì¸-êµ¬í˜„">1. ì¹´ì¹´ì˜¤ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ êµ¬í˜„</h2>

<h3 id="11-í”ŒëŸ¬ê·¸ì¸-ì„¤ì¹˜">1.1 í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pnpm add capacitor-kakao-login-plugin
npx cap <span class="nb">sync</span>
</code></pre></div></div>

<h3 id="12-android-ì„¤ì •">1.2 Android ì„¤ì •</h3>

<h4 id="121-kakao-sdk-ì˜ì¡´ì„±-ì¶”ê°€">1.2.1 Kakao SDK ì˜ì¡´ì„± ì¶”ê°€</h4>

<p><code class="language-plaintext highlighter-rouge">android/app/build.gradle</code>:</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">dependencies</span> <span class="o">{</span>
    <span class="c1">// ... ê¸°ì¡´ ì˜ì¡´ì„± ...</span>
    <span class="n">implementation</span> <span class="s2">"com.kakao.sdk:v2-common:2.20.1"</span>
    <span class="n">implementation</span> <span class="s2">"com.kakao.sdk:v2-auth:2.20.1"</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">android/build.gradle</code>:</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">allprojects</span> <span class="o">{</span>
    <span class="k">repositories</span> <span class="o">{</span>
        <span class="n">google</span><span class="o">()</span>
        <span class="n">mavenCentral</span><span class="o">()</span>
        <span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="s1">'https://devrepo.kakao.com/nexus/content/groups/public/'</span> <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="122-androidmanifestxml-ì„¤ì •">1.2.2 AndroidManifest.xml ì„¤ì •</h4>

<p><code class="language-plaintext highlighter-rouge">android/app/src/main/AndroidManifest.xml</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;application&gt;</span>
    <span class="c">&lt;!-- ì¹´ì¹´ì˜¤ SDK ë©”íƒ€ë°ì´í„° --&gt;</span>
    <span class="nt">&lt;meta-data</span>
        <span class="na">android:name=</span><span class="s">"com.kakao.sdk.AppKey"</span>
        <span class="na">android:value=</span><span class="s">"@string/kakao_app_key"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;activity</span>
        <span class="na">android:name=</span><span class="s">".MainActivity"</span>
        <span class="na">android:exported=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ --&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.VIEW"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.DEFAULT"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.BROWSABLE"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;data</span> <span class="na">android:host=</span><span class="s">"kakaolink"</span> <span class="na">android:scheme=</span><span class="s">"@string/kakao_scheme"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/activity&gt;</span>

    <span class="c">&lt;!-- ì¹´ì¹´ì˜¤ ì¸ì¦ ì½”ë“œ í•¸ë“¤ëŸ¬ --&gt;</span>
    <span class="nt">&lt;activity</span>
        <span class="na">android:name=</span><span class="s">"com.kakao.sdk.auth.AuthCodeHandlerActivity"</span>
        <span class="na">android:exported=</span><span class="s">"true"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.VIEW"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.DEFAULT"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.BROWSABLE"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;data</span> <span class="na">android:host=</span><span class="s">"oauth"</span> <span class="na">android:scheme=</span><span class="s">"@string/kakao_scheme"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/activity&gt;</span>
<span class="nt">&lt;/application&gt;</span>
</code></pre></div></div>

<h4 id="123-stringsxml-ì„¤ì •">1.2.3 strings.xml ì„¤ì •</h4>

<p><code class="language-plaintext highlighter-rouge">android/app/src/main/res/values/strings.xml</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"kakao_app_key"</span><span class="nt">&gt;</span>YOUR_KAKAO_NATIVE_APP_KEY<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"kakao_scheme"</span><span class="nt">&gt;</span>kakaoYOUR_KAKAO_NATIVE_APP_KEY<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<h4 id="124-mainactivityjava-ì´ˆê¸°í™”">1.2.4 MainActivity.java ì´ˆê¸°í™”</h4>

<p><code class="language-plaintext highlighter-rouge">android/app/src/main/java/com/yourpackage/app/MainActivity.java</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.kakao.sdk.common.KakaoSdk</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="nc">BridgeActivity</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="c1">// ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”</span>
        <span class="nc">KakaoSdk</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">kakao_app_key</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="13-ios-ì„¤ì •">1.3 iOS ì„¤ì •</h3>

<h4 id="131-infoplist-ì„¤ì •">1.3.1 Info.plist ì„¤ì •</h4>

<p><code class="language-plaintext highlighter-rouge">ios/App/App/Info.plist</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;key&gt;</span>KAKAO_APP_KEY<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>YOUR_KAKAO_NATIVE_APP_KEY<span class="nt">&lt;/string&gt;</span>

<span class="nt">&lt;key&gt;</span>CFBundleURLTypes<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>CFBundleURLSchemes<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;array&gt;</span>
            <span class="nt">&lt;string&gt;</span>kakaoYOUR_KAKAO_NATIVE_APP_KEY<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;string&gt;</span>com.yourapp.bundleid<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/array&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/array&gt;</span>

<span class="nt">&lt;key&gt;</span>LSApplicationQueriesSchemes<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
    <span class="nt">&lt;string&gt;</span>kakaoYOUR_KAKAO_NATIVE_APP_KEY<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>kakaokompassauth<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>storykompassauth<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>kakaolink<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>storylink<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>kakaotalk<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>kakaotalk-5.9.7<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string&gt;</span>kakaostory-2.9.0<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/array&gt;</span>
</code></pre></div></div>

<h4 id="132-appdelegateswift-ì´ˆê¸°í™”">1.3.2 AppDelegate.swift ì´ˆê¸°í™”</h4>

<p><code class="language-plaintext highlighter-rouge">ios/App/App/AppDelegate.swift</code>:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">KakaoSDKAuth</span>
<span class="kd">import</span> <span class="kt">KakaoSDKCommon</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span><span class="o">.</span><span class="kt">LaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">key</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">infoDictionary</span><span class="p">?[</span><span class="s">"KAKAO_APP_KEY"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">kakaoKey</span> <span class="o">=</span> <span class="n">key</span> <span class="p">{</span>
        <span class="kt">KakaoSDK</span><span class="o">.</span><span class="nf">initSDK</span><span class="p">(</span><span class="nv">appKey</span><span class="p">:</span> <span class="n">kakaoKey</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">app</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="kd">open</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span><span class="o">.</span><span class="kt">OpenURLOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:])</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="kt">AuthApi</span><span class="o">.</span><span class="nf">isKakaoTalkLoginUrl</span><span class="p">(</span><span class="n">url</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">AuthController</span><span class="o">.</span><span class="nf">handleOpenUrl</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kt">ApplicationDelegateProxy</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">application</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="nv">open</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="14-í”„ë¡ íŠ¸ì—”ë“œ-ì½”ë“œ">1.4 í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ</h3>

<p><code class="language-plaintext highlighter-rouge">client/lib/auth.ts</code>:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">KakaoLoginPlugin</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">capacitor-kakao-login-plugin</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">startSocialLogin</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span>
  <span class="nx">provider</span><span class="p">:</span> <span class="nx">OAuthProvider</span>
<span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">isMobile</span> <span class="o">=</span> <span class="nx">Capacitor</span><span class="p">.</span><span class="nx">isNativePlatform</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">isMobile</span> <span class="o">&amp;&amp;</span> <span class="nx">provider</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">kakao</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="c1">// ì¹´ì¹´ì˜¤ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ ì‹¤í–‰</span>
      <span class="kd">const</span> <span class="nx">kakaoResult</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">KakaoLoginPlugin</span><span class="p">.</span><span class="nx">goLogin</span><span class="p">();</span>

      <span class="c1">// ì¹´ì¹´ì˜¤ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°±ì—”ë“œë¡œ ì „ë‹¬</span>
      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">processKakaoNativeLogin</span><span class="p">(</span><span class="nx">kakaoResult</span><span class="p">.</span><span class="nx">accessToken</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span>
          <span class="k">new</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">oauth-login-success</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">detail</span><span class="p">:</span> <span class="p">{</span> <span class="na">userInfo</span><span class="p">:</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">user_info</span> <span class="p">},</span>
          <span class="p">})</span>
        <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">oauth-login-error</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">detail</span><span class="p">:</span> <span class="p">{</span> <span class="na">error</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="p">},</span>
        <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// ì›¹: ì¼ë°˜ OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">authorization_url</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// ë°±ì—”ë“œë¡œ ì¹´ì¹´ì˜¤ í† í° ì „ë‹¬</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">processKakaoNativeLogin</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span>
  <span class="nx">kakaoAccessToken</span><span class="p">:</span> <span class="kr">string</span>
<span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">OAuthLoginResponse</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">getApiUrl</span><span class="p">()}</span><span class="s2">/v1/auth/oauth/kakao/native`</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span> <span class="p">},</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
      <span class="na">kakao_access_token</span><span class="p">:</span> <span class="nx">kakaoAccessToken</span><span class="p">,</span>
      <span class="na">device_info</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
    <span class="p">}),</span>
    <span class="na">credentials</span><span class="p">:</span> <span class="dl">"</span><span class="s2">include</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="15-ì¹´ì¹´ì˜¤-ê°œë°œì-ì½˜ì†”-ì„¤ì •">1.5 ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†” ì„¤ì •</h3>

<ol>
  <li>
    <p><strong>í‚¤ í•´ì‹œ ë“±ë¡</strong> (Android)</p>

    <ul>
      <li>Android Studio Logcatì—ì„œ SHA-1, SHA-256 í‚¤ í•´ì‹œ í™•ì¸</li>
      <li>ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†” â†’ ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ í”Œë«í¼ â†’ Android â†’ í‚¤ í•´ì‹œ ë“±ë¡</li>
    </ul>
  </li>
  <li>
    <p><strong>ë¦¬ë‹¤ì´ë ‰íŠ¸ URI ì„¤ì •</strong></p>
    <ul>
      <li>Android: <code class="language-plaintext highlighter-rouge">kakao{NATIVE_APP_KEY}://oauth</code></li>
      <li>iOS: <code class="language-plaintext highlighter-rouge">kakao{NATIVE_APP_KEY}://oauth</code></li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="2-êµ¬ê¸€-ë„¤ì´í‹°ë¸Œ-ë¡œê·¸ì¸-êµ¬í˜„">2. êµ¬ê¸€ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ êµ¬í˜„</h2>

<h3 id="21-í”ŒëŸ¬ê·¸ì¸-ì„¤ì¹˜">2.1 í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pnpm add @codetrix-studio/capacitor-google-auth
npx cap <span class="nb">sync</span>
</code></pre></div></div>

<h3 id="22-google-console-ì„¤ì •">2.2 Google Console ì„¤ì •</h3>

<h4 id="221-ì›¹-í´ë¼ì´ì–¸íŠ¸-id-ìƒì„±">2.2.1 ì›¹ í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±</h4>

<ol>
  <li>Google Console â†’ API ë° ì„œë¹„ìŠ¤ â†’ ì‚¬ìš©ì ì¸ì¦ ì •ë³´</li>
  <li>
    <ul>
      <li>ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸° â†’ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID</li>
    </ul>
  </li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•: <strong>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜</strong></li>
  <li>ìƒì„±ëœ í´ë¼ì´ì–¸íŠ¸ IDë¥¼ ë³µì‚¬</li>
</ol>

<h4 id="222-android-í´ë¼ì´ì–¸íŠ¸-id-ìƒì„±">2.2.2 Android í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±</h4>

<ol>
  <li>
    <ul>
      <li>ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸° â†’ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID</li>
    </ul>
  </li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•: <strong>Android</strong></li>
  <li>íŒ¨í‚¤ì§€ ì´ë¦„: <code class="language-plaintext highlighter-rouge">com.yourapp.bundleid</code></li>
  <li><strong>SHA-1 ì¸ì¦ì„œ ì§€ë¬¸ ë“±ë¡</strong> (ì¤‘ìš”!)</li>
</ol>

<p><strong>SHA-1 ì§€ë¬¸ í™•ì¸ ë°©ë²•:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ë””ë²„ê·¸ í‚¤ìŠ¤í† ì–´</span>
keytool <span class="nt">-list</span> <span class="nt">-v</span> <span class="nt">-keystore</span> ~/.android/debug.keystore <span class="nt">-alias</span> androiddebugkey <span class="nt">-storepass</span> android <span class="nt">-keypass</span> android

<span class="c"># ë˜ëŠ” MainActivityì—ì„œ ë¡œê·¸ë¡œ í™•ì¸</span>
</code></pre></div></div>

<p>SHA-1 ì§€ë¬¸ì„ <strong>ì½œë¡  ì—†ì´</strong> ë“±ë¡</p>

<h4 id="223-ios-í´ë¼ì´ì–¸íŠ¸-id-ìƒì„±-ì„ íƒ">2.2.3 iOS í´ë¼ì´ì–¸íŠ¸ ID ìƒì„± (ì„ íƒ)</h4>

<ol>
  <li>
    <ul>
      <li>ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸° â†’ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID</li>
    </ul>
  </li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•: <strong>iOS</strong></li>
  <li>ë²ˆë“¤ ID: <code class="language-plaintext highlighter-rouge">com.yourapp.bundleid</code></li>
  <li><code class="language-plaintext highlighter-rouge">GoogleService.plist</code> íŒŒì¼ ë‹¤ìš´ë¡œë“œ</li>
</ol>

<h3 id="23-android-ì„¤ì •">2.3 Android ì„¤ì •</h3>

<h4 id="231-stringsxml-ì„¤ì •">2.3.1 strings.xml ì„¤ì •</h4>

<p><code class="language-plaintext highlighter-rouge">android/app/src/main/res/values/strings.xml</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;resources&gt;</span>
    <span class="c">&lt;!-- ì›¹ í´ë¼ì´ì–¸íŠ¸ ID (server_client_id) --&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"server_client_id"</span><span class="nt">&gt;</span>YOUR_WEB_CLIENT_ID.apps.googleusercontent.com<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<p><strong>ì°¸ê³ </strong>: Android í´ë¼ì´ì–¸íŠ¸ IDëŠ” ì½”ë“œì— ë„£ì„ í•„ìš” ì—†ìŠµë‹ˆë‹¤. í”ŒëŸ¬ê·¸ì¸ì´ ìë™ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<h4 id="232-androidmanifestxml-ê¶Œí•œ-ì¶”ê°€">2.3.2 AndroidManifest.xml ê¶Œí•œ ì¶”ê°€</h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.GET_ACCOUNTS"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<h4 id="233-capacitorconfigts-ì„¤ì •">2.3.3 capacitor.config.ts ì„¤ì •</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">GoogleAuth</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">scopes</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">profile</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">],</span>
      <span class="na">serverClientId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR_WEB_CLIENT_ID.apps.googleusercontent.com</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">forceCodeForRefreshToken</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="24-ios-ì„¤ì •">2.4 iOS ì„¤ì •</h3>

<h4 id="241-googleserviceplist-ì¶”ê°€">2.4.1 GoogleService.plist ì¶”ê°€</h4>

<ol>
  <li>Google Consoleì—ì„œ ë‹¤ìš´ë¡œë“œí•œ <code class="language-plaintext highlighter-rouge">GoogleService.plist</code> íŒŒì¼ì„</li>
  <li><code class="language-plaintext highlighter-rouge">ios/App/App/</code> í´ë”ì— ë³µì‚¬</li>
</ol>

<h4 id="242-infoplist-ì„¤ì •">2.4.2 Info.plist ì„¤ì •</h4>

<p><code class="language-plaintext highlighter-rouge">ios/App/App/Info.plist</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;key&gt;</span>CFBundleURLTypes<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>CFBundleURLSchemes<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;array&gt;</span>
            <span class="nt">&lt;string&gt;</span>com.yourapp.bundleid<span class="nt">&lt;/string&gt;</span>
            <span class="c">&lt;!-- GoogleService.plistì˜ REVERSED_CLIENT_ID ê°’ --&gt;</span>
            <span class="nt">&lt;string&gt;</span>YOUR_REVERSED_CLIENT_ID<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/array&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/array&gt;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">REVERSED_CLIENT_ID</code>ëŠ” <code class="language-plaintext highlighter-rouge">GoogleService.plist</code> íŒŒì¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="25-í”„ë¡ íŠ¸ì—”ë“œ-ì½”ë“œ">2.5 í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ</h3>

<p><code class="language-plaintext highlighter-rouge">client/lib/auth.ts</code>:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">GoogleAuth</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@codetrix-studio/capacitor-google-auth</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">startSocialLogin</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span>
  <span class="nx">provider</span><span class="p">:</span> <span class="nx">OAuthProvider</span>
<span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">isMobile</span> <span class="o">=</span> <span class="nx">Capacitor</span><span class="p">.</span><span class="nx">isNativePlatform</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">isMobile</span> <span class="o">&amp;&amp;</span> <span class="nx">provider</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">google</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="c1">// êµ¬ê¸€ í”ŒëŸ¬ê·¸ì¸ ì´ˆê¸°í™” (scopes í¬í•¨)</span>
      <span class="k">await</span> <span class="nx">GoogleAuth</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
        <span class="na">scopes</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">profile</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">],</span>
      <span class="p">});</span>

      <span class="c1">// êµ¬ê¸€ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ ì‹¤í–‰</span>
      <span class="kd">const</span> <span class="nx">googleResult</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">GoogleAuth</span><span class="p">.</span><span class="nx">signIn</span><span class="p">();</span>

      <span class="c1">// êµ¬ê¸€ ID í† í°ì„ ë°±ì—”ë“œë¡œ ì „ë‹¬</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">googleResult</span><span class="p">.</span><span class="nx">authentication</span><span class="p">?.</span><span class="nx">idToken</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">êµ¬ê¸€ ID í† í°ì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</span><span class="dl">"</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">processGoogleNativeLogin</span><span class="p">(</span>
        <span class="nx">googleResult</span><span class="p">.</span><span class="nx">authentication</span><span class="p">.</span><span class="nx">idToken</span>
      <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span>
          <span class="k">new</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">oauth-login-success</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">detail</span><span class="p">:</span> <span class="p">{</span> <span class="na">userInfo</span><span class="p">:</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">user_info</span> <span class="p">},</span>
          <span class="p">})</span>
        <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">CustomEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">oauth-login-error</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">detail</span><span class="p">:</span> <span class="p">{</span> <span class="na">error</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="p">},</span>
        <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// ì›¹: ì¼ë°˜ OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">authorization_url</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// ë°±ì—”ë“œë¡œ êµ¬ê¸€ ID í† í° ì „ë‹¬</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">processGoogleNativeLogin</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span>
  <span class="nx">googleIdToken</span><span class="p">:</span> <span class="kr">string</span>
<span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">OAuthLoginResponse</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">getApiUrl</span><span class="p">()}</span><span class="s2">/v1/auth/oauth/google/native`</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span> <span class="p">},</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
      <span class="na">google_id_token</span><span class="p">:</span> <span class="nx">googleIdToken</span><span class="p">,</span>
      <span class="na">device_info</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
    <span class="p">}),</span>
    <span class="na">credentials</span><span class="p">:</span> <span class="dl">"</span><span class="s2">include</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="26-ì›¹-ì„¤ì •-ì„ íƒ">2.6 ì›¹ ì„¤ì • (ì„ íƒ)</h3>

<p><code class="language-plaintext highlighter-rouge">index.html</code>:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span>
  <span class="na">name=</span><span class="s">"google-signin-client_id"</span>
  <span class="na">content=</span><span class="s">"YOUR_WEB_CLIENT_ID.apps.googleusercontent.com"</span>
<span class="nt">/&gt;</span>
</code></pre></div></div>

<hr />

<h2 id="3-ë°±ì—”ë“œ-api-ì—”ë“œí¬ì¸íŠ¸">3. ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸</h2>

<h3 id="31-ì¹´ì¹´ì˜¤-ë„¤ì´í‹°ë¸Œ-ë¡œê·¸ì¸">3.1 ì¹´ì¹´ì˜¤ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /v1/auth/oauth/kakao/native
Content-Type: application/json

{
  "kakao_access_token": "ì¹´ì¹´ì˜¤_ì•¡ì„¸ìŠ¤_í† í°",
  "device_info": "í”Œë«í¼ ì •ë³´"
}
</code></pre></div></div>

<h3 id="32-êµ¬ê¸€-ë„¤ì´í‹°ë¸Œ-ë¡œê·¸ì¸">3.2 êµ¬ê¸€ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /v1/auth/oauth/google/native
Content-Type: application/json

{
  "google_id_token": "êµ¬ê¸€_ID_í† í°",
  "device_info": "í”Œë«í¼ ì •ë³´"
}
</code></pre></div></div>

<hr />

<h2 id="4-ì²´í¬ë¦¬ìŠ¤íŠ¸">4. ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>

<h3 id="ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><code class="language-plaintext highlighter-rouge">capacitor-kakao-login-plugin</code> ì„¤ì¹˜</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Android: Kakao SDK ì˜ì¡´ì„± ì¶”ê°€</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Android: <code class="language-plaintext highlighter-rouge">AndroidManifest.xml</code> ì„¤ì •</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Android: <code class="language-plaintext highlighter-rouge">strings.xml</code>ì— ì•± í‚¤ ì„¤ì •</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Android: <code class="language-plaintext highlighter-rouge">MainActivity.java</code>ì—ì„œ SDK ì´ˆê¸°í™”</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />iOS: <code class="language-plaintext highlighter-rouge">Info.plist</code> ì„¤ì •</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />iOS: <code class="language-plaintext highlighter-rouge">AppDelegate.swift</code>ì—ì„œ SDK ì´ˆê¸°í™”</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†”ì— í‚¤ í•´ì‹œ ë“±ë¡</li>
</ul>

<h3 id="êµ¬ê¸€-ë¡œê·¸ì¸">êµ¬ê¸€ ë¡œê·¸ì¸</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><code class="language-plaintext highlighter-rouge">@codetrix-studio/capacitor-google-auth</code> ì„¤ì¹˜</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Google Consoleì— ì›¹ í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Google Consoleì— Android í´ë¼ì´ì–¸íŠ¸ ID ìƒì„± (SHA-1 ì§€ë¬¸ ë“±ë¡)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Google Consoleì— iOS í´ë¼ì´ì–¸íŠ¸ ID ìƒì„± (ì„ íƒ)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Android: <code class="language-plaintext highlighter-rouge">strings.xml</code>ì— ì›¹ í´ë¼ì´ì–¸íŠ¸ ID ì„¤ì •</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Android: <code class="language-plaintext highlighter-rouge">capacitor.config.ts</code> ì„¤ì •</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />iOS: <code class="language-plaintext highlighter-rouge">GoogleService.plist</code> ì¶”ê°€</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />iOS: <code class="language-plaintext highlighter-rouge">Info.plist</code>ì— <code class="language-plaintext highlighter-rouge">REVERSED_CLIENT_ID</code> ì¶”ê°€</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ì›¹: <code class="language-plaintext highlighter-rouge">index.html</code>ì— meta tag ì¶”ê°€</li>
</ul>

<hr />

<h2 id="5-ì°¸ê³ -ìë£Œ">5. ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://capacitorjs.com/docs">Capacitor ê³µì‹ ë¬¸ì„œ</a></li>
  <li><a href="https://developers.kakao.com/docs/latest/ko/flutter/getting-started#project-scheme">Kakao developer</a></li>
  <li><a href="https://github.com/nerdFrenzs/capacitor-kakao-login-plugin">capacitor-kakao-login-plugin</a></li>
  <li><a href="https://github.com/CodetrixStudio/CapacitorGoogleAuth">@codetrix-studio/capacitor-google-auth</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œ ì¹´ì¹´ì˜¤/êµ¬ê¸€ ë„¤ì´í‹°ë¸Œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•œ ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitor Android ì•± ë¡œê·¸ì¸ ì—°ë™ CORS íŠ¸ëŸ¬ë¸” ìŠˆíŒ…</title><link href="https://nan0silver.github.io/projectdiary/2025-11-10-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitor Android ì•± ë¡œê·¸ì¸ ì—°ë™ CORS íŠ¸ëŸ¬ë¸” ìŠˆíŒ…" /><published>2025-11-10T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-10-diary/"><![CDATA[<ul>
  <li>ì§€ë‚œ ê¸€ì—ì„œëŠ” Capacitorë¡œ Android, iOS ì•± ë¹Œë“œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë‹¤ë¤˜ë‹¤.</li>
  <li>ì´ë²ˆ ê¸€ì—ì„œëŠ” Capacitorë¡œ ë¹Œë“œí•œ Android ì•±ì—ì„œ ë¡œê·¸ì¸ ì—°ë™ì„ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë‹¤ë¤„ë³´ê² ë‹¤.</li>
  <li>íŠ¹íˆ CORS ì—ëŸ¬ í•´ê²°ì— ëŒ€í•´ ë‹¤ë¤„ë³´ê² ë‹¤..
    <blockquote>
      <p>ì €ë²ˆì— í•œë²ˆ ì—¬ê¸°ê¹Œì§„ í•´ê²°ì„ í–ˆì—ˆëŠ”ë°,, ë‹¤ ë°€ê³  ë‹¤ì‹œí•˜ëŠ” ê³¼ì •ì—ì„œ ê¹Œë¨¹ì–´ì„œ.. ì´ë²ˆì—ë„ ì‚½ì§ˆì„ í–ˆë‹¤..ğŸ¥² <del>ì§„ì§œ ìš¸ë»”í•¨</del></p>
    </blockquote>
  </li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>ì¼ë‹¨ ë‚´ í”„ë¡œì íŠ¸ì˜ ìƒí™©ì„ ë§í•˜ìë©´</li>
</ul>

<ol>
  <li>Reactë¡œ ì›¹ ë¹Œë“œì‹œ nginx ì‚¬ìš©í•˜ê³  ìˆìŒ</li>
  <li>Android ì•± ë¹Œë“œ (Capacitorë¡œ ê°ì‹¸ê³  ìˆìŒ)</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>ì•±/ì›¹] â†’ HTTPS <span class="o">(</span>443<span class="o">)</span> â†’ <span class="o">[</span>Nginx] â†’ HTTP <span class="o">(</span>8080<span class="o">)</span> â†’ <span class="o">[</span>Spring Boot]
</code></pre></div></div>

<ul>
  <li>
    <p>Nginxì˜ ì—­í• ì€</p>

    <ol>
      <li>SSL ì¢…ë£Œ
        <ul>
          <li>HTTPSë¥¼ HTTPë¡œ ë³€í™˜</li>
        </ul>
      </li>
      <li>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
        <ul>
          <li>ìš”ì²­ì„ 8080í¬íŠ¸ë¡œ ì „ë‹¬</li>
        </ul>
      </li>
      <li>â€¼ï¸ ë¬¸ì œ : OPTIONS preflight ìš”ì²­ì´ ì—¬ê¸°ì„œ ìê¾¸ ë§‰í˜”ë‹¤.ğŸ¤®</li>
    </ol>

    <p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-10-pic1.png?raw=true" alt="ì—ëŸ¬ ì´ë¯¸ì§€" />
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-10-pic2.png?raw=true" alt="ì—ëŸ¬ ì´ë¯¸ì§€2" /></p>
  </li>
</ul>

<h3 id="ì¦ìƒ">ì¦ìƒ</h3>

<p><strong>ì›¹ (https://chingoohaja.app)</strong>: âœ… ë¡œê·¸ì¸ ì •ìƒ ì‘ë™<br />
<strong>ì•± (https://localhost)</strong>: âŒ CORS ì—ëŸ¬ ë°œìƒ</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Access to fetch at 'https://silverld.site/api/v1/auth/refresh'
from origin 'https://localhost' has been blocked by CORS policy
</code></pre></div></div>

<h3 id="ì™œ-ì›¹ì€-ë˜ê³ -ì•±ì€-ì•ˆë ê¹Œ">ì™œ ì›¹ì€ ë˜ê³  ì•±ì€ ì•ˆë ê¹Œ?</h3>

<ul>
  <li>ì›¹ ë¸Œë¼ìš°ì €ì™€ Capacitor WebViewëŠ” preflight OPTIONS ìš”ì²­ì„ ë‹¤ë¥´ê²Œ ë³´ë‚¸ë‹¤.</li>
</ul>

<ol>
  <li>ì›¹
    <ul>
      <li>Originì´ <code class="language-plaintext highlighter-rouge">https://chingoohaja.app</code> -&gt; Nginxê°€ í†µê³¼ì‹œí‚´</li>
    </ul>
  </li>
  <li>ì•±
    <ul>
      <li>Originì´ <code class="language-plaintext highlighter-rouge">https:/localhost</code> -&gt; Nginxê°€ ì˜ì‹¬
        <blockquote>
          <p>Capacitorì˜ URL/orignì€ ì•„ë˜ì™€ ê°™ë‹¤</p>

          <blockquote>
            <p>iOS: capacitor://localhost
Android: http://localhost</p>
          </blockquote>
        </blockquote>
      </li>
    </ul>
  </li>
</ol>

<ul>
  <li>ì„œë²„ì—ì„œ Corsì„¤ì •ê³¼ Securityì„¤ì •ì€ ë‹¤ í•´ë†¨ë‹¤.</li>
  <li>ê·¸ëŸ°ë°ë„ CORS ì—ëŸ¬ê°€ í•´ê²°ë˜ì§€ì•Šì•„ì„œ Nginx ì„¤ì • íŒŒì¼ì„ ì†ì„ ëŒ”ë‹¤
    <ul>
      <li>ë„ë©”ì¸ë“¤ì„ Nginxì—ì„œ ë™ì ìœ¼ë¡œ orign ë°˜í™˜í•˜ëŠ” í˜•ì‹ìœ¼ë¡œë„ ìˆ˜ì •ì„ í•´ë´¤ê³ ..</li>
      <li>ëª¨ë“  ë„ë©”ì¸ì„ ë‹¤ í—ˆìš©ë„ í•´ë´¤ê³ ..</li>
    </ul>
  </li>
  <li>ê·¸ëŸ°ë° CORS ë¬¸ì œëŠ” í•´ê²°ì´ ë˜ì§€ì•Šì•˜ë‹¤..!</li>
  <li>í•˜ì§€ë§Œ í•´ê²°ë°©ë²•ì€ ìƒê°ë³´ë‹¤ ê°„ë‹¨í–ˆë‹¤..</li>
</ul>

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">capacitor.config.ts</code>íŒŒì¼ì— capacitorì˜ HTTP í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì¤€ë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugins: {
    CapacitorHttp: {
      enabled: true,
    },
  },
</code></pre></div></div>

<h3 id="ì™œ-ì´ê²Œ-ì‘ë™í•˜ëŠ”ê°€">ì™œ ì´ê²Œ ì‘ë™í•˜ëŠ”ê°€?</h3>

<p><strong>ì¼ë°˜ fetch API</strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>App WebView â†’ Browser CORS Check â†’ âŒ Blocked
</code></pre></div></div>

<p><strong>Capacitor HTTP í”ŒëŸ¬ê·¸ì¸</strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>App â†’ Native HTTP Client â†’ ğŸš€ Direct Connection (CORS ìš°íšŒ)
</code></pre></div></div>

<p>ë„¤ì´í‹°ë¸Œ HTTP í´ë¼ì´ì–¸íŠ¸ëŠ” ë¸Œë¼ìš°ì €ì˜ CORS ì •ì±…ì„ ë”°ë¥´ì§€ ì•Šê³  <strong>ì§ì ‘ ì„œë²„ì™€ í†µì‹ </strong>í•œë‹¤.</p>

<ul>
  <li>
    <p>ë¬¼ë¡  ì„œë²„ì—ì„œ ì„¤ì •ì„ ë‹¤ í•´ì¤€ ë‹¤ìŒ ì´ ì½”ë“œë„ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤.</p>
  </li>
  <li>ì´í‹€ê°„ì˜ ì‚½ì§ˆì´ ëë‚¬ë‹¤..</li>
  <li>ì´ì œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì§€ì˜¥ì´ ì‹œì‘ì„</li>
</ul>

<h2 id="í•µì‹¬-êµí›ˆ">í•µì‹¬ êµí›ˆ</h2>

<h3 id="ë¬¸ì œ-í•´ê²°-ê³¼ì •ì—ì„œ-ë°°ìš´-ê²ƒ">ë¬¸ì œ í•´ê²° ê³¼ì •ì—ì„œ ë°°ìš´ ê²ƒ</h3>

<ol>
  <li>
    <p><strong>ë ˆì´ì–´ë³„ ë””ë²„ê¹…ì˜ ì¤‘ìš”ì„±</strong></p>

    <ul>
      <li>Frontend (Capacitor) â†’ Nginx â†’ Spring Boot ìˆœì„œë¡œ ë‹¨ê³„ë³„ í™•ì¸</li>
      <li>ë°±ì—”ë“œ ë¡œê·¸ì— ì•„ë¬´ê²ƒë„ ì•ˆ ì°íŒë‹¤ = ì•ë‹¨ì—ì„œ ë§‰íŒ ê²ƒ</li>
    </ul>
  </li>
  <li>
    <p><strong>ë¸Œë¼ìš°ì € vs ë„¤ì´í‹°ë¸Œì˜ ì°¨ì´</strong></p>

    <ul>
      <li>WebViewì˜ <code class="language-plaintext highlighter-rouge">fetch</code>ëŠ” ë¸Œë¼ìš°ì € CORS ì •ì±… ë”°ë¦„</li>
      <li>ë„¤ì´í‹°ë¸Œ HTTPëŠ” CORS ìš°íšŒ ê°€ëŠ¥</li>
    </ul>
  </li>
  <li>
    <p><strong>Mixed Content ì •ì±…</strong></p>
    <ul>
      <li>HTTPS í˜ì´ì§€ëŠ” HTTP ë¦¬ì†ŒìŠ¤ ì°¨ë‹¨</li>
      <li>Nginxë¥¼ í†µí•œ HTTPS í†µì‹  í•„ìˆ˜</li>
    </ul>
  </li>
</ol>

<h3 id="ì£¼ì˜ì‚¬í•­">ì£¼ì˜ì‚¬í•­</h3>

<p>âš ï¸ <strong>Capacitor HTTP í”ŒëŸ¬ê·¸ì¸ í™œì„±í™” ì‹œ</strong>:</p>

<ul>
  <li>ê¸°ì¡´ <code class="language-plaintext highlighter-rouge">fetch</code> API ë™ì‘ ë³€ê²½ ê°€ëŠ¥</li>
  <li>ì›¹ê³¼ ì•±ì˜ ë„¤íŠ¸ì›Œí¬ ë™ì‘ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ</li>
  <li>ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ í•„ìš”</li>
</ul>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-10-pic3.png?raw=true" alt="ì½”ë“œë˜ë¹—ì˜ í‰" /></p>

<h3 id="ì°¸ê³ -ë¬¸í—Œ">ì°¸ê³  ë¬¸í—Œ</h3>

<ul>
  <li><a href="https://stackoverflow.com/questions/75192411/cors-in-capacitor-for-android">StackOverFlowê°€ ì§±ì´ì•¼</a></li>
  <li><a href="https://capacitorjs.com/docs/apis/http">Capacitor HTTP Plugin ê³µì‹ ë¬¸ì„œ</a></li>
  <li><a href="https://developer.mozilla.org/ko/docs/Web/HTTP/CORS">MDN - CORS</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[Capacitorë¡œ ë¹Œë“œí•œ Android ì•± ë¡œê·¸ì¸ ì—°ë™ í•´ë³´ì! - CORS ì—ëŸ¬ í•´ê²°ì— ëŒ€í•´ ë‹¤ë£¹ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Capacitorë¡œ ì›¹ì„ ì•±ìœ¼ë¡œ ë¹Œë“œí•´ë³´ì!</title><link href="https://nan0silver.github.io/projectdiary/2025-11-06-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Capacitorë¡œ ì›¹ì„ ì•±ìœ¼ë¡œ ë¹Œë“œí•´ë³´ì!" /><published>2025-11-06T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-11-06-diary/"><![CDATA[<ul>
  <li>â€œì¹œêµ¬í•˜ìâ€ë¥¼ ì›¹ìœ¼ë¡œ MVP ì™„ì„±ì„ í•˜ë‹ˆ, ì´ê±¸ ì•±ìœ¼ë¡œ ë¹Œë“œí•´ì„œ ì‚¬ìš©ìë“¤ì´ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤ê³  ìƒê°í–ˆë‹¤.</li>
  <li>ì›ë˜ëŠ”.. ê°œë°œìì˜ ì…ì¥ìœ¼ë¡œ ë§í¬ë¡œ ì´ë™í•˜ëŠ” ë°©ì‹ì´ ì‰¬ìš¸êº¼ë¼ê³  ìƒê°í–ˆëŠ”ë°, ë§‰ìƒ ì‚¬ìš©ìì—ê²Œ ë§í¬ë¥¼ ë³´ë‚´ì£¼ë‹ˆê¹Œ ì–´ë ¤ì›€ì„ í† ë¡œí•˜ê±°ë‚˜ ë°©ì‹ì— ì˜ë¬¸ì„ ê°€ì§€ëŠ” ì‚¬ëŒë“¤ì´ ë§ì•˜ë‹¤..
    <ul>
      <li>ë§í¬ëŠ” ì¼ë‹¨ ì–´ë”” ì €ì¥í•´ë†“ê³  ì°¾ì•„ì„œ ì—°ê²°í•´ì•¼í•˜ê³ ..</li>
      <li>í•¸ë“œí°ì—ì„œ ë§í¬ë¥¼ í†µí•´ ì´ë™í•˜ëŠ” ë°©ì‹ì´ ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒë“¤ì´ ë” ë§ì•˜ë‹¤.. (ì¼íšŒìš© ë§í¬ì •ë„ë§Œ ë‹¤ë“¤ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì•˜ë‹¤.)</li>
    </ul>
  </li>
  <li>ë„¤ì´í‹°ë¸Œ ì•±ìœ¼ë¡œ ê°œë°œí•˜ëŠ”ê±´ ì¼ë‹¨ ì‹œê°„ì´ ë§ì´ ë“œë‹ˆê¹Œ ìµœëŒ€í•œ ë¹ ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ë‹¤ê°€ Capacitor í”ŒëŸ¬ê·¸ì¸ì„ ì°¾ê²Œ ë˜ì—ˆë‹¤.</li>
</ul>

<h2 id="capacitor">Capacitor</h2>

<ul>
  <li><a href="https://capacitorjs.com/">Capacitor</a>ëŠ” ê¸°ì¡´ Reactì›¹ì„ ë„¤ì´í‹°ë¸Œ ì•± ì»¨í…Œì´ë„ˆì— ë‹´ì•„ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤.</li>
  <li>ê¸°ì¡´ì˜ React ì½”ë“œë² ì´ìŠ¤ë¥¼ ê±°ì˜ ê±´ë“¤ì´ì§€ ì•Šê³  ëª¨ë°”ì¼ ì•±ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ê¸°ì¡´ React ì›¹ ì•±
         â†“
    Capacitor ì¶”ê°€
         â†“
ë„¤ì´í‹°ë¸Œ WebViewì—ì„œ ì‹¤í–‰
(iOS/Android ì•±ìœ¼ë¡œ íŒ¨í‚¤ì§•)
</code></pre></div></div>

<ul>
  <li>ì„¤ì¹˜ë§Œ í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì•±ìœ¼ë¡œ ë¹Œë“œí•  ìˆ˜ ìˆë‹¤!</li>
  <li>ì¼ë‹¨ ë‚˜ëŠ” iosë¡œ ë¹Œë“œí•˜ëŠ” ê²ƒì„ ì•„ë˜ì— ë³´ì—¬ì£¼ê² ë‹¤.</li>
</ul>

<h2 id="capacitorë¡œ-ios-ì•±-ë¹Œë“œí•˜ê¸°">Capacitorë¡œ iOS ì•± ë¹Œë“œí•˜ê¸°</h2>

<ul>
  <li>
    <p>ì¼ë‹¨ ë‚´ ê¸°ì¡´ í”„ë¡ íŠ¸ í”„ë¡œì íŠ¸ ìŠ¤í™ì„ ì •ë¦¬í•˜ìë©´</p>

    <ul>
      <li>ë§ì€ ì˜ì¡´ì„±ì„ ê°€ì§(íŠ¹íˆ @radix-ui/* íŒ¨í‚¤ì§€ë“¤)</li>
      <li>React 18 + TypeScript + Vite ìŠ¤íƒ</li>
      <li>Express ì„œë²„ í†µí•©</li>
    </ul>
  </li>
  <li>ë”°ë¼ì„œ npmì´ ì•„ë‹Œ pnpmì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.</li>
  <li>capacitor ê³µì‹ë¬¸ì„œì—ëŠ” npmìœ¼ë¡œ ì„¤ëª…ì´ ë‚˜ì™€ìˆëŠ”ë°, ê·¸ëƒ¥ pnpm ëª…ë ¹ì–´ë¡œë§Œ ë°”ê¿”ì„œ ë˜‘ê°™ì´ ì§„í–‰í•´ì¤¬ë‹¤.</li>
</ul>

<h3 id="1-capacitorì˜-ë©”ì¸-ì˜ì¡´ì„±-ì„¤ì¹˜">1. Capacitorì˜ ë©”ì¸ ì˜ì¡´ì„± ì„¤ì¹˜</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pnpm add @capacitor/core @capacitor/cli
</code></pre></div></div>

<p>í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥!</p>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-06-pic1.png?raw=true" alt="ì„±ê³µ ì´ë¯¸ì§€" /></p>

<h3 id="2-capacitor-config-ì´ˆê¸°í™”">2. Capacitor Config ì´ˆê¸°í™”</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx cap init
</code></pre></div></div>

<ul>
  <li>ì—¬ê¸°ì„œëŠ” ì´ë¦„ê³¼, Project IDë¥¼ ì…ë ¥í•˜ë¼ê³  í•œë‹¤.</li>
  <li>Project IDëŠ” ë„ë©”ì¸ ë„¤ì„ í˜•íƒœë¡œ ì ì–´ì£¼ë©´ ëœë‹¤. (ì˜ˆ: com.example.app)</li>
  <li>ë‚˜ëŠ” í”„ë¡ íŠ¸ ë„ë©”ì¸ì„ ì‚¬ë†“ì€ê²Œ ìˆì–´ì„œ ê·¸ëŒ€ë¡œ ë„£ì—ˆë‹¤.</li>
</ul>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-06-pic2.png?raw=true" alt="ì„±ê³µ ì´ë¯¸ì§€2" /></p>

<h3 id="3-í”Œë«í¼-ì¶”ê°€-android-ios">3. í”Œë«í¼ ì¶”ê°€ (android, iOS)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Android</span>
pnpm add @capacitor/android

<span class="c"># iOS (macOSì—ì„œë§Œ)</span>
pnpm add @capacitor/android
</code></pre></div></div>

<ul>
  <li>
    <p>ë‚˜ëŠ” ë§¥ë¶ì—ì„œ ì‘ì—…í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë‘˜ë‹¤ ì¶”ê°€í•´ì¤¬ë‹¤.</p>

    <blockquote>
      <p>ios ë§Œë“¤ê³  ì‹¶ì–´ì„œ 3ë…„ì „ì— ë§¥ë¶ ìƒ€ë˜ ê¸°ì–µ..</p>
    </blockquote>
  </li>
  <li>
    <p>ì„±ê³µí•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ ë‚˜ì˜¨ë‹¤.</p>
  </li>
</ul>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-06-pic3.png?raw=true" alt="ì„±ê³µ ì´ë¯¸ì§€3" /></p>

<h3 id="ì´ì œ-ì‹¤í–‰í•´ë³´ì">ì´ì œ ì‹¤í–‰í•´ë³´ì!!</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Android</span>
npx cap run android

<span class="c"># iOS</span>
npx cap run ios
</code></pre></div></div>

<p>ì¼ë‹¨ iosë¡œ ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰ ì„±ê³µ!</p>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-06-pic4.png?raw=true" alt="ì„±ê³µ ì´ë¯¸ì§€4" height="500" /></p>

<p><br />
ë‹¤ìŒì— android studio ì—…ë°ì´íŠ¸ë¥¼ ì¢€ í•˜ê³ .. (ì•ˆí•œì§€ ë„˜ ì˜¤ë˜ëŒ..) ì•„ë˜ì™€ ê°™ì´ ë¹Œë“œ ì„±ê³µ!</p>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-11-06-pic5.png?raw=true" alt="ì„±ê³µ ì´ë¯¸ì§€5" height="500" /></p>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ì›¹ì„ ì•±ìœ¼ë¡œ ë¹ ë¥´ê²Œ ë¹Œë“œí•˜ê¸° ìœ„í•´ Capacitorë¥¼ ì‚¬ìš©í•´ë³´ê¸°]]></summary></entry><entry><title type="html">[Algorithm] ì½”í…Œì—ì„œ ìì£¼ ì“°ì´ëŠ” Collection ëª¨ìŒ</title><link href="https://nan0silver.github.io/algorithm/2025-10-23-collections/" rel="alternate" type="text/html" title="[Algorithm] ì½”í…Œì—ì„œ ìì£¼ ì“°ì´ëŠ” Collection ëª¨ìŒ" /><published>2025-10-23T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/algorithm/collections</id><content type="html" xml:base="https://nan0silver.github.io/algorithm/2025-10-23-collections/"><![CDATA[<ol>
  <li><a href="#ï¸-1ï¸âƒ£-hashmapk-v--key-value-í˜•íƒœë¡œ-ë¹ ë¥´ê²Œ-ì°¾ê³ -ì„¸ëŠ”-ìš©ë„">HashMap</a></li>
  <li><a href="#-2ï¸âƒ£-hashset--ì¤‘ë³µ-ì—†ëŠ”-ë°ì´í„°-ì €ì¥">HashSet</a></li>
  <li><a href="#-3ï¸âƒ£-arraylist--ìˆœì„œ-ìˆëŠ”-ë¦¬ìŠ¤íŠ¸-ì¸ë±ìŠ¤-ì ‘ê·¼-ê°€ëŠ¥">ArrayList</a></li>
  <li><a href="#-4ï¸âƒ£-priorityqueue--ìš°ì„ ìˆœìœ„-í-í™">PriorityQueue</a></li>
  <li><a href="#-5ï¸âƒ£-stack--queue-deque--ì„ í˜•-êµ¬ì¡°">Stack / Queue</a></li>
  <li><a href="#-6ï¸âƒ£-collections--arrays-ìœ í‹¸ë¦¬í‹°-ë©”ì„œë“œ">Collections / Arrays</a></li>
  <li><a href="#-ì¶”ì²œ-ì—°ìŠµë¬¸ì œ-ìœ í˜•ë³„-í™œìš©-ì˜ˆì‹œ">ì¶”ì²œ ì—°ìŠµë¬¸ì œ ìœ í˜•ë³„ í™œìš© ì˜ˆì‹œ</a></li>
</ol>

<hr />

<h2 id="ï¸-1ï¸âƒ£-hashmapk-v--key-value-í˜•íƒœë¡œ-ë¹ ë¥´ê²Œ-ì°¾ê³ -ì„¸ëŠ”-ìš©ë„">ğŸ—‚ï¸ 1ï¸âƒ£ HashMap&lt;K, V&gt; â€” key-value í˜•íƒœë¡œ ë¹ ë¥´ê²Œ ì°¾ê³  ì„¸ëŠ” ìš©ë„</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œì´ ê°’ì´ ëª‡ ë²ˆ ë‚˜ì™”ëŠ”ê°€?â€</li>
  <li>â€œì´ keyê°€ ì´ë¯¸ ì¡´ì¬í•˜ë‚˜?â€</li>
  <li>â€œì¹´í…Œê³ ë¦¬ë³„ ê°œìˆ˜ ì„¸ê¸° (ìœ„ì¥ ë¬¸ì œ ë“±)â€</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">put(K key, V value)</code></td>
      <td>ê°’ ì‚½ì… (ë®ì–´ì”€)</td>
      <td><code class="language-plaintext highlighter-rouge">map.put("apple", 3);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">get(K key)</code></td>
      <td>keyë¡œ value ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">int v = map.get("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getOrDefault(K key, V defaultVal)</code></td>
      <td>key ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ë°˜í™˜</td>
      <td><code class="language-plaintext highlighter-rouge">map.getOrDefault("pear", 0);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">containsKey(K key)</code></td>
      <td>key ì¡´ì¬ ì—¬ë¶€</td>
      <td><code class="language-plaintext highlighter-rouge">if (map.containsKey("apple"))</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">remove(K key)</code></td>
      <td>key/value ìŒ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">map.remove("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">keySet()</code></td>
      <td>ëª¨ë“  key ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">for (String k : map.keySet())</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">values()</code></td>
      <td>ëª¨ë“  value ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">for (int v : map.values())</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">entrySet()</code></td>
      <td>key+value ë™ì‹œ ì ‘ê·¼</td>
      <td>`for (Map.Entry&lt;String, Integer&gt; e : map.entrySet()) {</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> System.out.println(e.getKey() + " â†’ " + e.getValue());
</code></pre></div></div>

<p>}<code class="language-plaintext highlighter-rouge">|
|</code>size()<code class="language-plaintext highlighter-rouge">| ì›ì†Œ ìˆ˜ |</code>map.size();<code class="language-plaintext highlighter-rouge">|
|</code>clear()<code class="language-plaintext highlighter-rouge">| ëª¨ë‘ ì‚­ì œ |</code>map.clear();` |</p>

<hr />

<h2 id="-2ï¸âƒ£-hashset--ì¤‘ë³µ-ì—†ëŠ”-ë°ì´í„°-ì €ì¥">ğŸ§© 2ï¸âƒ£ HashSet â€” ì¤‘ë³µ ì—†ëŠ” ë°ì´í„° ì €ì¥</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©-1">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œì´ë¯¸ ë‚˜ì˜¨ ì  ìˆëŠ” ê°’ì¸ê°€?â€</li>
  <li>â€œêµì§‘í•©, ì¤‘ë³µ ì œê±°â€</li>
  <li>â€œì „í™”ë²ˆí˜¸ë¶€ ì ‘ë‘ì‚¬, ì°¸ê°€ì ì¤‘ ì™„ì£¼ ëª»í•œ ì‚¬ëŒ ì°¾ê¸° ë“±â€</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ-1">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(E e)</code></td>
      <td>ì›ì†Œ ì¶”ê°€</td>
      <td><code class="language-plaintext highlighter-rouge">set.add("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">contains(E e)</code></td>
      <td>í¬í•¨ ì—¬ë¶€ í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">if (set.contains("apple"))</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">remove(E e)</code></td>
      <td>ì›ì†Œ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">set.remove("apple");</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">size()</code></td>
      <td>ì›ì†Œ ê°œìˆ˜</td>
      <td><code class="language-plaintext highlighter-rouge">set.size();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">clear()</code></td>
      <td>ëª¨ë‘ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">set.clear();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">isEmpty()</code></td>
      <td>ë¹„ì—ˆëŠ”ì§€ í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">if (set.isEmpty())</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">iterator()</code></td>
      <td>ìˆœíšŒìš© Iterator ìƒì„±</td>
      <td><code class="language-plaintext highlighter-rouge">for (String s : set) System.out.println(s);</code></td>
    </tr>
  </tbody>
</table>

<p>or
<code class="language-plaintext highlighter-rouge">Iterator&lt;String&gt; it = set.iterator();
while (it.hasNext()) {
      System.out.println(it.next());
}</code> |</p>

<blockquote>
  <p>ğŸ’¡ ì°¸ê³ : HashSetì€ ë‚´ë¶€ì ìœ¼ë¡œ HashMapì„ ì‚¬ìš©í•˜ë¯€ë¡œ add, contains ëª¨ë‘ O(1)ì…ë‹ˆë‹¤.</p>
</blockquote>

<hr />

<h2 id="-3ï¸âƒ£-arraylist--ìˆœì„œ-ìˆëŠ”-ë¦¬ìŠ¤íŠ¸-ì¸ë±ìŠ¤-ì ‘ê·¼-ê°€ëŠ¥">ğŸ“‹ 3ï¸âƒ£ ArrayList â€” ìˆœì„œ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ (ì¸ë±ìŠ¤ ì ‘ê·¼ ê°€ëŠ¥)</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©-2">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œìˆœì°¨ì  ì ‘ê·¼â€, â€œì •ë ¬â€, â€œì¡°í•©/ìˆœì—´ ì €ì¥â€</li>
  <li>BFS/DFSì—ì„œ ë°©ë¬¸ ìˆœì„œ ì €ì¥ ë“±</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ-2">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(E e)</code></td>
      <td>ëì— ì¶”ê°€</td>
      <td><code class="language-plaintext highlighter-rouge">list.add(5);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(int idx, E e)</code></td>
      <td>ì¸ë±ìŠ¤ì— ì‚½ì…</td>
      <td><code class="language-plaintext highlighter-rouge">list.add(1, 10);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">get(int idx)</code></td>
      <td>íŠ¹ì • ì¸ë±ìŠ¤ ì¡°íšŒ</td>
      <td><code class="language-plaintext highlighter-rouge">list.get(0);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">set(int idx, E e)</code></td>
      <td>íŠ¹ì • ìœ„ì¹˜ ê°’ ìˆ˜ì •</td>
      <td><code class="language-plaintext highlighter-rouge">list.set(2, 99);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">remove(int idx)</code></td>
      <td>ì¸ë±ìŠ¤ë¡œ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">list.remove(1);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">contains(E e)</code></td>
      <td>í¬í•¨ ì—¬ë¶€</td>
      <td><code class="language-plaintext highlighter-rouge">if (list.contains(5))</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">size()</code></td>
      <td>í¬ê¸° í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">list.size();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">clear()</code></td>
      <td>ëª¨ë‘ ì‚­ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">list.clear();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sort(Comparator&lt;? super E&gt; c)</code></td>
      <td>ì •ë ¬</td>
      <td>`Arrays.sort(arr, new Comparator<String>() {</String></td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        @Override
        public int compare(String o1, String o2) {
            if (o1.length()==o2.length()) {
                return o1.compareTo(o2);
            } else {
                return o1.length()-o2.length();
            }}});` |
</code></pre></div></div>

<hr />

<h2 id="-4ï¸âƒ£-priorityqueue--ìš°ì„ ìˆœìœ„-í-í™">ğŸ§® 4ï¸âƒ£ PriorityQueue â€” ìš°ì„ ìˆœìœ„ í (í™)</h2>

<h3 id="-í•µì‹¬-í™œìš©-ìƒí™©-3">ğŸ’¡ í•µì‹¬ í™œìš© ìƒí™©</h3>

<ul>
  <li>â€œê°€ì¥ ì‘ì€/í° ê°’â€ì„ ë°˜ë³µì ìœ¼ë¡œ êº¼ë‚¼ ë•Œ (Dijkstra, HeapSort, ìŠ¤ì¼€ì¤„ë§ ë¬¸ì œ ë“±)</li>
</ul>

<h3 id="-ìì£¼-ì“°ëŠ”-ë©”ì„œë“œ-3">ğŸš€ ìì£¼ ì“°ëŠ” ë©”ì„œë“œ</h3>

<table>
  <thead>
    <tr>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
      <th>ì˜ˆì‹œ ì½”ë“œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">add(E e)</code></td>
      <td>ì›ì†Œ ì¶”ê°€</td>
      <td><code class="language-plaintext highlighter-rouge">pq.add(10);</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">peek()</code></td>
      <td>ìµœìƒë‹¨ ì›ì†Œ í™•ì¸(ì‚­ì œ ì•ˆ í•¨)</td>
      <td><code class="language-plaintext highlighter-rouge">int top = pq.peek();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">poll()</code></td>
      <td>ìµœìƒë‹¨ ì›ì†Œ êº¼ë‚´ê¸°</td>
      <td><code class="language-plaintext highlighter-rouge">int top = pq.poll();</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">isEmpty()</code></td>
      <td>ë¹„ì—ˆëŠ”ì§€ í™•ì¸</td>
      <td><code class="language-plaintext highlighter-rouge">if (pq.isEmpty())</code></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ğŸ’¡ ë””í´íŠ¸ëŠ” ì˜¤ë¦„ì°¨ìˆœ(ìµœì†Œ í™) â†’ ì‘ì€ ìˆ«ìê°€ ë¨¼ì € ë‚˜ì˜´</p>

  <p>ë‚´ë¦¼ì°¨ìˆœì€ <code class="language-plaintext highlighter-rouge">new PriorityQueue&lt;&gt;(Collections.reverseOrder());</code></p>
</blockquote>

<hr />

<h2 id="-5ï¸âƒ£-stack--queue-deque--ì„ í˜•-êµ¬ì¡°">ğŸ§° 5ï¸âƒ£ Stack / Queue (Deque) â€” ì„ í˜• êµ¬ì¡°</h2>

<h3 id="-queue">ğŸ’¡ Queue</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>
</code></pre></div></div>

<h3 id="-stack-dequeë¡œ-ëŒ€ì²´-ê¶Œì¥">ğŸ’¡ Stack (Dequeë¡œ ëŒ€ì²´ ê¶Œì¥)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Deque</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stack</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>
</code></pre></div></div>

<hr />

<h2 id="-6ï¸âƒ£-collections--arrays-ìœ í‹¸ë¦¬í‹°-ë©”ì„œë“œ">ğŸ’ 6ï¸âƒ£ Collections / Arrays ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ</h2>

<table>
  <thead>
    <tr>
      <th>í´ë˜ìŠ¤</th>
      <th>ë©”ì„œë“œ</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.sort(list)</code></td>
      <td>ë¦¬ìŠ¤íŠ¸ ì •ë ¬</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.reverse(list)</code></td>
      <td>ì—­ìˆœ ì •ë ¬</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.max(list)</code></td>
      <td>ìµœëŒ“ê°’</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Collections.min(list)</code></td>
      <td>ìµœì†Ÿê°’</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Arrays.sort(arr)</code></td>
      <td>ë°°ì—´ ì •ë ¬</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Arrays.equals(arr1, arr2)</code></td>
      <td>ë°°ì—´ ë¹„êµ</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Arrays.toString(arr)</code></td>
      <td>ë°°ì—´ ì¶œë ¥ìš©</td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="-ì¶”ì²œ-ì—°ìŠµë¬¸ì œ-ìœ í˜•ë³„-í™œìš©-ì˜ˆì‹œ">ğŸ“˜ ì¶”ì²œ ì—°ìŠµë¬¸ì œ ìœ í˜•ë³„ í™œìš© ì˜ˆì‹œ</h2>

<table>
  <thead>
    <tr>
      <th>ìœ í˜•</th>
      <th>í•µì‹¬ ìë£Œêµ¬ì¡°/ë©”ì„œë“œ</th>
      <th>ì˜ˆì‹œ ë¬¸ì œ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Hash (ì¤‘ë³µ, ì™„ì£¼í•˜ì§€ ëª»í•œ ì„ ìˆ˜ ë“±)</td>
      <td><code class="language-plaintext highlighter-rouge">HashMap</code>, <code class="language-plaintext highlighter-rouge">HashSet</code></td>
      <td><code class="language-plaintext highlighter-rouge">map.getOrDefault</code>, <code class="language-plaintext highlighter-rouge">set.contains</code></td>
    </tr>
    <tr>
      <td>Stack/Queue</td>
      <td><code class="language-plaintext highlighter-rouge">Deque</code>, <code class="language-plaintext highlighter-rouge">LinkedList</code></td>
      <td>ê´„í˜¸ ê²€ì‚¬, ê¸°ëŠ¥ê°œë°œ</td>
    </tr>
    <tr>
      <td>ì •ë ¬</td>
      <td><code class="language-plaintext highlighter-rouge">Arrays.sort</code>, <code class="language-plaintext highlighter-rouge">Collections.sort</code></td>
      <td>H-index, Kë²ˆì§¸ ìˆ˜</td>
    </tr>
    <tr>
      <td>ì´ì¤‘ ë£¨í”„ íšŒí”¼</td>
      <td><code class="language-plaintext highlighter-rouge">HashMap</code> lookup</td>
      <td>ì „í™”ë²ˆí˜¸ ëª©ë¡</td>
    </tr>
    <tr>
      <td>ìš°ì„ ìˆœìœ„ ë¬¸ì œ</td>
      <td><code class="language-plaintext highlighter-rouge">PriorityQueue</code></td>
      <td>ë” ë§µê²Œ, ë””ìŠ¤í¬ ì»¨íŠ¸ë¡¤ëŸ¬</td>
    </tr>
    <tr>
      <td>ê·¸ë˜í”„/BFS/DFS</td>
      <td><code class="language-plaintext highlighter-rouge">Queue</code>, <code class="language-plaintext highlighter-rouge">ArrayList</code></td>
      <td>ë¯¸ë¡œ íƒìƒ‰, ë„¤íŠ¸ì›Œí¬</td>
    </tr>
  </tbody>
</table>

<hr />]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="algorithm" /><summary type="html"><![CDATA[ì½”ë”©í…ŒìŠ¤íŠ¸ ëŒ€ë¹„ JAVA Collectionsì˜ ì‚¬ìš©ì²˜ ë° ë©”ì„œë“œë¥¼ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Agora Cloud Recording êµ¬í˜„ ì‹œ Hibernate ì—ëŸ¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</title><link href="https://nan0silver.github.io/projectdiary/2025-10-20-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Agora Cloud Recording êµ¬í˜„ ì‹œ Hibernate ì—ëŸ¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" /><published>2025-10-20T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-20-diary/"><![CDATA[<ul>
  <li><a href="#1-ë¬¸ì œ-ë°œê²¬">1. ë¬¸ì œ ë°œê²¬</a></li>
  <li><a href="#2-lazyinitializationexception-ì´í•´í•˜ê¸°">2. LazyInitializationException ì´í•´í•˜ê¸°</a></li>
  <li><a href="#3-optimisticlockingfailureexception-ì´í•´í•˜ê¸°">3. OptimisticLockingFailureException ì´í•´í•˜ê¸°</a></li>
  <li><a href="#4-ë¬¸ì œ-ì›ì¸-ë¶„ì„">4. ë¬¸ì œ ì›ì¸ ë¶„ì„</a></li>
  <li><a href="#5-í•´ê²°-ë°©ë²•">5. í•´ê²° ë°©ë²•</a></li>
  <li><a href="#6-í•µì‹¬-ê°œë…-ì •ë¦¬">6. í•µì‹¬ ê°œë… ì •ë¦¬</a></li>
</ul>

<h2 id="ìŒì„±-í†µí™”-ë…¹ìŒ-ê¸°ëŠ¥ì€-ë™ì‘í•˜ëŠ”ë°-ì—ëŸ¬ê°€">ìŒì„± í†µí™” ë…¹ìŒ, ê¸°ëŠ¥ì€ ë™ì‘í•˜ëŠ”ë° ì—ëŸ¬ê°€?</h2>

<blockquote>
  <p>Agora Cloud Recordingì„ ì´ìš©í•œ ìŒì„± í†µí™” ë…¹ìŒ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆë‹¤. ë…¹ìŒ ì‹œì‘ê³¼ ì¤‘ì§€ëŠ” ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì˜€ì§€ë§Œ, í†µí™” ì¢…ë£Œ ì§í›„ ì½˜ì†”ì— ì˜ˆì™¸ ìŠ¤íƒì´ ì—°ì†ìœ¼ë¡œ ì¶œë ¥ë˜ì—ˆë‹¤. LazyInitializationExceptionê³¼ OptimisticLockingFailureExceptionâ€¦ ë‘˜ ë‹¤ ë­”ê°€ ìµìˆ™í•œë° ë™ì‹œì— ë°œìƒí•˜ë‹¤ë‹ˆ..ğŸ¥²</p>
</blockquote>

<h2 id="1-ë¬¸ì œ-ë°œê²¬">1. ë¬¸ì œ ë°œê²¬</h2>

<h3 id="ìƒí™©">ìƒí™©</h3>

<p>Agora Cloud Recordingì„ ì‚¬ìš©í•˜ì—¬ ìŒì„± í†µí™” ë…¹ìŒ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë˜ ì¤‘, í†µí™”ëŠ” ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ê³  ë…¹ìŒë„ ì‹œì‘ë˜ì§€ë§Œ, <strong>í†µí™” ì¢…ë£Œ ì‹œì ì— ì˜ˆì™¸ê°€ ì—°ë‹¬ì•„ ë°œìƒ</strong>í–ˆë‹¤.</p>

<p>êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤:</p>

<ul>
  <li>í†µí™” ì¢…ë£Œ â†’ ë¹„ë™ê¸°ë¡œ ë…¹ìŒ ì¤‘ì§€ API í˜¸ì¶œ</li>
  <li>ë…¹ìŒ ì •ë³´ë¥¼ DBì— ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ì—ëŸ¬ ë°œìƒ</li>
</ul>

<h3 id="ì—ëŸ¬-ë¡œê·¸">ì—ëŸ¬ ë¡œê·¸</h3>

<p><strong>ì²« ë²ˆì§¸ ì—ëŸ¬:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>org.hibernate.LazyInitializationException: Could not initialize proxy
[com.example.domain.Call#1] - no session
	at org.hibernate.proxy.AbstractLazyInitializer.initialize(...)
	at RecordingResponse.from(RecordingResponse.java:76)
</code></pre></div></div>

<p><strong>ë‘ ë²ˆì§¸ ì—ëŸ¬:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>org.springframework.orm.ObjectOptimisticLockingFailureException:
Row was updated or deleted by another transaction

Caused by: org.hibernate.StaleObjectStateException:
Row was updated or deleted by another transaction
</code></pre></div></div>

<blockquote>
  <p>â€œë¶„ëª…íˆ <code class="language-plaintext highlighter-rouge">@Transactional</code>ë„ ë¶™ì˜€ê³ , ì—”í‹°í‹°ë„ ì œëŒ€ë¡œ ì¡°íšŒí–ˆëŠ”ë° ì™œ ì„¸ì…˜ì´ ì—†ë‹¤ëŠ” ê±°ì§€? ê·¸ë¦¬ê³  ì™œ ë‚™ê´€ì  ë½ ì¶©ëŒì´ ë°œìƒí•˜ëŠ” ê±°ì•¼?â€</p>
</blockquote>

<hr />

<h2 id="2-lazyinitializationexception-ì´í•´í•˜ê¸°">2. LazyInitializationException ì´í•´í•˜ê¸°</h2>

<h3 id="ì—ëŸ¬ì˜-ì˜ë¯¸">ì—ëŸ¬ì˜ ì˜ë¯¸</h3>

<p><code class="language-plaintext highlighter-rouge">LazyInitializationException</code>ì€ Hibernateì—ì„œ <strong>ì§€ì—° ë¡œë”©(Lazy Loading)ìœ¼ë¡œ ì„¤ì •ëœ ì—°ê´€ ì—”í‹°í‹°ì— ì ‘ê·¼í•˜ë ¤ í•  ë•Œ, ì´ë¯¸ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(Persistence Context)ê°€ ë‹«í˜€ìˆì–´ì„œ ë°œìƒ</strong>í•˜ëŠ” ì—ëŸ¬ë‹¤.</p>

<h3 id="ì¼ë°˜ì ì¸-ë°œìƒ-ìƒí™©">ì¼ë°˜ì ì¸ ë°œìƒ ìƒí™©</h3>

<p><strong>1. íŠ¸ëœì­ì…˜ ë°–ì—ì„œ Lazy í”„ë¡ì‹œ ì ‘ê·¼</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="nc">User</span> <span class="nf">findUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  <span class="c1">// User.ordersëŠ” LAZY</span>
<span class="o">}</span>

<span class="c1">// íŠ¸ëœì­ì…˜ ë°–</span>
<span class="n">user</span><span class="o">.</span><span class="na">getOrders</span><span class="o">().</span><span class="na">size</span><span class="o">();</span>  <span class="c1">// âŒ LazyInitializationException!</span>
</code></pre></div></div>

<p><strong>2. ë¹„ë™ê¸° ì‘ì—…ì—ì„œ ì ‘ê·¼</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processOrder</span><span class="o">(</span><span class="nc">Long</span> <span class="n">orderId</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="n">findOrder</span><span class="o">(</span><span class="n">orderId</span><span class="o">);</span>
    <span class="nc">CompletableFuture</span><span class="o">.</span><span class="na">runAsync</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">order</span><span class="o">.</span><span class="na">getUser</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>  <span class="c1">// âŒ ì„¸ì…˜ ì¢…ë£Œ í›„ ì ‘ê·¼</span>
    <span class="o">});</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="ë‚´-ê²½ìš°ì˜-ì›ì¸">ë‚´ ê²½ìš°ì˜ ì›ì¸</h3>

<p>ì—”í‹°í‹° êµ¬ì¡°:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">class</span> <span class="nc">CallRecording</span> <span class="o">{</span>
    <span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">fetch</span> <span class="o">=</span> <span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>  <span class="c1">// â† LAZY ë¡œë”©</span>
    <span class="kd">private</span> <span class="nc">Call</span> <span class="n">call</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë¬¸ì œ íë¦„:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">@Async</code>ë¡œ ë¹„ë™ê¸° ìŠ¤ë ˆë“œì—ì„œ ë…¹ìŒ ì¤‘ì§€ ë¡œì§ ì‹¤í–‰</li>
  <li><code class="language-plaintext highlighter-rouge">CallRecording</code> ì¡°íšŒ (ì´ë•Œ <code class="language-plaintext highlighter-rouge">Call</code>ì€ í”„ë¡ì‹œ ìƒíƒœ)</li>
  <li>DTO ë³€í™˜ ì‹œ <code class="language-plaintext highlighter-rouge">call.getChannelName()</code> í˜¸ì¶œ</li>
  <li><strong>í”„ë¡ì‹œ ì´ˆê¸°í™” ì‹œë„í•˜ì§€ë§Œ ì´ë¯¸ ì„¸ì…˜ ì¢…ë£Œ â†’ ì—ëŸ¬!</strong></li>
</ol>

<p>í•µì‹¬ì€ <strong>ë¹„ë™ê¸° ìŠ¤ë ˆë“œëŠ” ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°€ì§€ë©°</strong>, ì—°ê´€ ì—”í‹°í‹°ê°€ LAZYë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ì„¸ì…˜ ë°–ì—ì„œ ì ‘ê·¼ ì‹œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ëŠ” ì ì´ë‹¤.</p>

<hr />

<h2 id="3-optimisticlockingfailureexception-ì´í•´í•˜ê¸°">3. OptimisticLockingFailureException ì´í•´í•˜ê¸°</h2>

<h3 id="ì—ëŸ¬ì˜-ì˜ë¯¸-1">ì—ëŸ¬ì˜ ì˜ë¯¸</h3>

<p><code class="language-plaintext highlighter-rouge">OptimisticLockingFailureException</code>ì€ <strong>ë‚™ê´€ì  ë½(Optimistic Lock) ê²€ì¦ ì‹¤íŒ¨</strong> ì‹œ ë°œìƒí•œë‹¤. JPAì˜ <code class="language-plaintext highlighter-rouge">@Version</code>ì„ ì‚¬ìš©í•œ ì—”í‹°í‹°ì—ì„œ <strong>ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì´ë¯¸ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ë²„ì „ì´ ì¦ê°€í–ˆì„ ë•Œ</strong> ë°œìƒí•œë‹¤.</p>

<h3 id="ë‚™ê´€ì -ë½ì´ë€">ë‚™ê´€ì  ë½ì´ë€?</h3>

<p>ë™ì‹œì„± ì œì–´ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ, ì‹¤ì œ ì¶©ëŒì´ ìì£¼ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒì´ë¼ê³  â€œë‚™ê´€ì ìœ¼ë¡œâ€ ê°€ì •í•œë‹¤.</p>

<p><strong>ë™ì‘ ë°©ì‹:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">class</span> <span class="nc">CallRecording</span> <span class="o">{</span>
    <span class="nd">@Version</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">version</span><span class="o">;</span>  <span class="c1">// ìˆ˜ì •ë  ë•Œë§ˆë‹¤ ìë™ ì¦ê°€</span>
<span class="o">}</span>
</code></pre></div></div>

<ol>
  <li>ì—”í‹°í‹° ì¡°íšŒ ì‹œ version ê°’ í•¨ê»˜ ì¡°íšŒ</li>
  <li>ì—…ë°ì´íŠ¸ ì‹œ WHERE ì ˆì— version ì¡°ê±´ ì¶”ê°€</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">UPDATE</span> <span class="n">call_recordings</span>
   <span class="k">SET</span> <span class="n">status</span> <span class="o">=</span> <span class="s1">'COMPLETED'</span><span class="p">,</span> <span class="k">version</span> <span class="o">=</span> <span class="k">version</span> <span class="o">+</span> <span class="mi">1</span>
   <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">AND</span> <span class="k">version</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>

<ol>
  <li>ì˜í–¥ë°›ì€ í–‰ì´ 0ê°œë©´ â†’ <strong>OptimisticLockingFailureException!</strong></li>
</ol>

<h3 id="ì¼ë°˜ì ì¸-ë°œìƒ-ìƒí™©-1">ì¼ë°˜ì ì¸ ë°œìƒ ìƒí™©</h3>

<p><strong>ë™ì‹œì— ê°™ì€ ì—”í‹°í‹° ìˆ˜ì •:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// íŠ¸ëœì­ì…˜ 1</span>
<span class="nc">Recording</span> <span class="n">rec</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>  <span class="c1">// version = 0</span>
<span class="n">rec</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="no">COMPLETED</span><span class="o">);</span>
<span class="n">repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">rec</span><span class="o">);</span>  <span class="c1">// version = 1</span>

<span class="c1">// íŠ¸ëœì­ì…˜ 2 (ë™ì‹œ ì‹¤í–‰)</span>
<span class="nc">Recording</span> <span class="n">rec</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>  <span class="c1">// version = 0 (ì¡°íšŒ ì‹œì )</span>
<span class="n">rec</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="no">FAILED</span><span class="o">);</span>
<span class="n">repo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">rec</span><span class="o">);</span>  <span class="c1">// âŒ versionì´ ì´ë¯¸ 1ì´ë¼ ì‹¤íŒ¨!</span>
</code></pre></div></div>

<h3 id="ë‚´-ê²½ìš°ì˜-ì›ì¸-1">ë‚´ ê²½ìš°ì˜ ì›ì¸</h3>

<p>ë¬¸ì œ íë¦„:</p>

<ol>
  <li>ë©”ì¸ ë¡œì§ì—ì„œ <code class="language-plaintext highlighter-rouge">recording.complete()</code> í˜¸ì¶œ â†’ version ì¦ê°€</li>
  <li>ë¹„ë™ê¸° ìŠ¤ë ˆë“œì—ì„œë„ ê°™ì€ recording ì ‘ê·¼</li>
  <li>ì—ëŸ¬ ë°œìƒ â†’ <code class="language-plaintext highlighter-rouge">recording.fail()</code> í˜¸ì¶œ</li>
  <li>ì €ì¥ ì‹œë„ â†’ <strong>ì´ë¯¸ versionì´ ë³€ê²½ë˜ì–´ ì¶©ëŒ!</strong></li>
</ol>

<hr />

<h2 id="4-ë¬¸ì œ-ì›ì¸-ë¶„ì„">4. ë¬¸ì œ ì›ì¸ ë¶„ì„</h2>

<h3 id="ê·¼ë³¸-ì›ì¸">ê·¼ë³¸ ì›ì¸</h3>

<p>ë‘ ì—ëŸ¬ê°€ ë™ì‹œì— ë°œìƒí•œ ì´ìœ ëŠ” <strong>ë¹„ë™ê¸° ì²˜ë¦¬ì™€ ë™ì‹œì„± ì œì–´ì˜ ì¡°í•©</strong> ë•Œë¬¸ì´ì—ˆë‹¤.</p>

<p><strong>ì‹œë‚˜ë¦¬ì˜¤:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. í†µí™” ì¢…ë£Œ ì´ë²¤íŠ¸ ë°œìƒ
2. @Async ë©”ì„œë“œë¡œ ë…¹ìŒ ì¤‘ì§€ ë¡œì§ ì‹¤í–‰ (ë³„ë„ ìŠ¤ë ˆë“œ)
3. CallRecording ì¡°íšŒ (Callì€ LAZY í”„ë¡ì‹œ ìƒíƒœ)
4. DTO ë³€í™˜ ì‹œ Call ì ‘ê·¼ â†’ LazyInitializationException
5. ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ì—ì„œ recording.fail() í˜¸ì¶œ
6. ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì´ë¯¸ recordingì„ ìˆ˜ì • â†’ OptimisticLockingFailureException
</code></pre></div></div>

<p><strong>í•µì‹¬ ë¬¸ì œì :</strong></p>

<ul>
  <li>LAZY ë¡œë”©ëœ ì—°ê´€ ì—”í‹°í‹°ë¥¼ ë¹„ë™ê¸° ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì ‘ê·¼</li>
  <li>ë™ì¼ ì—”í‹°í‹°ì— ëŒ€í•œ ë™ì‹œ ì—…ë°ì´íŠ¸ ì‹œë„</li>
</ul>

<hr />

<h2 id="5-í•´ê²°-ë°©ë²•">5. í•´ê²° ë°©ë²•</h2>

<h3 id="í•´ê²°-ì „ëµ">í•´ê²° ì „ëµ</h3>

<ol>
  <li><strong>LazyInitializationException</strong>: ì—°ê´€ ì—”í‹°í‹°ë¥¼ ë¯¸ë¦¬ ë¡œë“œ</li>
  <li><strong>OptimisticLockingFailureException</strong>: ì˜ˆì™¸ ì²˜ë¦¬ ì „ëµ ìˆ˜ë¦½</li>
</ol>

<h3 id="1-join-fetchë¡œ-ì—°ê´€-ì—”í‹°í‹°-ì¦‰ì‹œ-ë¡œë”©">1) JOIN FETCHë¡œ ì—°ê´€ ì—”í‹°í‹° ì¦‰ì‹œ ë¡œë”©</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT cr FROM CallRecording cr "</span> <span class="o">+</span>
       <span class="s">"JOIN FETCH cr.call "</span> <span class="o">+</span>
       <span class="s">"WHERE cr.call.id = :callId"</span><span class="o">)</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">CallRecording</span><span class="o">&gt;</span> <span class="nf">findByCallIdWithCall</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"callId"</span><span class="o">)</span> <span class="nc">Long</span> <span class="n">callId</span><span class="o">);</span>
</code></pre></div></div>

<p><strong>íš¨ê³¼:</strong></p>

<ul>
  <li>í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ <code class="language-plaintext highlighter-rouge">CallRecording</code>ê³¼ <code class="language-plaintext highlighter-rouge">Call</code>ì„ í•¨ê»˜ ì¡°íšŒ</li>
  <li>LAZY í”„ë¡ì‹œ ë¬¸ì œ í•´ê²°</li>
</ul>

<h3 id="2-dto-ìƒì„±-ì‹œ-í•„ìš”í•œ-ë°ì´í„°ë§Œ-ì „ë‹¬">2) DTO ìƒì„± ì‹œ í•„ìš”í•œ ë°ì´í„°ë§Œ ì „ë‹¬</h3>

<p>ê¸°ì¡´ì˜ í”„ë¡ì‹œ ê°ì²´ì—ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ëŠ” ëŒ€ì‹ , <strong>ì´ë¯¸ ë¡œë“œëœ ì—”í‹°í‹°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬</strong>í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Before: recordingì—ì„œ callì„ êº¼ë‚´ë ¤ ì‹œë„ (í”„ë¡ì‹œ ì´ˆê¸°í™”)</span>
<span class="nc">RecordingResponse</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">recording</span><span class="o">);</span>

<span class="c1">// After: ì´ë¯¸ ë¡œë“œëœ callì„ ì§ì ‘ ì „ë‹¬</span>
<span class="nc">RecordingResponse</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">recording</span><span class="o">,</span> <span class="n">call</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="3-ë¹„ë™ê¸°-ë©”ì„œë“œì—-transactional-ì¶”ê°€">3) ë¹„ë™ê¸° ë©”ì„œë“œì— @Transactional ì¶”ê°€</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Async</span>
<span class="nd">@Transactional</span>  <span class="c1">// â† ë¹„ë™ê¸° ìŠ¤ë ˆë“œì—ë„ íŠ¸ëœì­ì…˜ ì»¨í…ìŠ¤íŠ¸</span>
<span class="kd">public</span> <span class="nc">CompletableFuture</span><span class="o">&lt;</span><span class="nc">Void</span><span class="o">&gt;</span> <span class="nf">autoStopRecording</span><span class="o">(</span><span class="nc">Long</span> <span class="n">callId</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ìƒˆë¡œìš´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="4-ë‚™ê´€ì -ë½-ì˜ˆì™¸-ì²˜ë¦¬">4) ë‚™ê´€ì  ë½ ì˜ˆì™¸ ì²˜ë¦¬</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
    <span class="n">recording</span><span class="o">.</span><span class="na">fail</span><span class="o">();</span>
    <span class="n">repository</span><span class="o">.</span><span class="na">saveAndFlush</span><span class="o">(</span><span class="n">recording</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">OptimisticLockException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ì´ë¯¸ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ì²˜ë¦¬ë¨ - ë¬´ì‹œ</span>
    <span class="n">log</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"ë‚™ê´€ì  ë½ ì¶©ëŒ (ë¬´ì‹œ): callId={}"</span><span class="o">,</span> <span class="n">callId</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>ì „ëµ:</strong></p>

<ul>
  <li>ì´ë¯¸ ì²˜ë¦¬ëœ ê²½ìš° ë¬´ì‹œ (ì¬ì‹œë„ ë¶ˆí•„ìš”)</li>
  <li><code class="language-plaintext highlighter-rouge">saveAndFlush()</code>ë¡œ ì¦‰ì‹œ DB ë°˜ì˜</li>
</ul>

<h3 id="5-ì ìš©-í›„-ê°œì„ ëœ-íë¦„">5) ì ìš© í›„ ê°œì„ ëœ íë¦„</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. í†µí™” ì¢…ë£Œ
2. JOIN FETCHë¡œ Callê³¼ í•¨ê»˜ CallRecording ì¡°íšŒ
3. í•„ìš”í•œ ë°ì´í„°ë¥¼ DTOì— ì „ë‹¬ (í”„ë¡ì‹œ ì ‘ê·¼ ì—†ìŒ)
4. ì—…ë°ì´íŠ¸ ì‹œ ë‚™ê´€ì  ë½ ì¶©ëŒ ë°œìƒ ì‹œ ì ì ˆíˆ ì²˜ë¦¬
</code></pre></div></div>

<hr />

<h2 id="6-í•µì‹¬-ê°œë…-ì •ë¦¬">6. í•µì‹¬ ê°œë… ì •ë¦¬</h2>

<h3 id="lazy-loading">Lazy Loading</h3>

<p><strong>ê°œë…:</strong><br />
ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì‹¤ì œë¡œ ì‚¬ìš©í•  ë•Œê¹Œì§€ ì¡°íšŒë¥¼ ë¯¸ë£¨ëŠ” ì „ëµ</p>

<p><strong>ì¥ì :</strong></p>

<ul>
  <li>ë¶ˆí•„ìš”í•œ ì¿¼ë¦¬ ê°ì†Œ</li>
  <li>ì„±ëŠ¥ ìµœì í™”</li>
</ul>

<p><strong>ë‹¨ì :</strong></p>

<ul>
  <li>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë°–ì—ì„œ ì ‘ê·¼ ì‹œ LazyInitializationException</li>
</ul>

<p><strong>í•´ê²° ë°©ë²•:</strong></p>

<ul>
  <li>JOIN FETCHë¡œ ì¦‰ì‹œ ë¡œë”©</li>
  <li>DTO ë³€í™˜ ì‹œì  ì¡°ì •</li>
  <li>EAGER ë¡œë”© (ì‹ ì¤‘í•˜ê²Œ)</li>
</ul>

<h3 id="ë‚™ê´€ì -ë½-vs-ë¹„ê´€ì -ë½">ë‚™ê´€ì  ë½ vs ë¹„ê´€ì  ë½</h3>

<table>
  <thead>
    <tr>
      <th>êµ¬ë¶„</th>
      <th>ë‚™ê´€ì  ë½</th>
      <th>ë¹„ê´€ì  ë½</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ê°€ì •</td>
      <td>ì¶©ëŒì´ ì ì„ ê²ƒ</td>
      <td>ì¶©ëŒì´ ë§ì„ ê²ƒ</td>
    </tr>
    <tr>
      <td>ë½ ì‹œì </td>
      <td>ì—…ë°ì´íŠ¸ ì‹œ</td>
      <td>ì¡°íšŒ ì‹œ</td>
    </tr>
    <tr>
      <td>êµ¬í˜„</td>
      <td>@Version</td>
      <td>@Lock(PESSIMISTIC_WRITE)</td>
    </tr>
    <tr>
      <td>ì í•©í•œ ê²½ìš°</td>
      <td>ì½ê¸°ê°€ ë§ì€ ê²½ìš°</td>
      <td>ì“°ê¸°ê°€ ë§ì€ ê²½ìš°</td>
    </tr>
  </tbody>
</table>

<p><strong>ë‚™ê´€ì  ë½ ë™ì‘:</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ì¡°íšŒ</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">recordings</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">-- version = 0</span>

<span class="c1">-- ì—…ë°ì´íŠ¸</span>
<span class="k">UPDATE</span> <span class="n">recordings</span>
<span class="k">SET</span> <span class="n">status</span> <span class="o">=</span> <span class="s1">'COMPLETED'</span><span class="p">,</span> <span class="k">version</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">AND</span> <span class="k">version</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">-- ë²„ì „ ì²´í¬</span>

<span class="c1">-- ì˜í–¥ë°›ì€ í–‰ì´ 0ê°œë©´ ì‹¤íŒ¨ â†’ ì˜ˆì™¸ ë°œìƒ</span>
</code></pre></div></div>

<h3 id="ë¹„ë™ê¸°-ì²˜ë¦¬ì™€-ì˜ì†ì„±-ì»¨í…ìŠ¤íŠ¸">ë¹„ë™ê¸° ì²˜ë¦¬ì™€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸</h3>

<p><strong>ì£¼ì˜ì‚¬í•­:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Async</code> ë©”ì„œë“œëŠ” ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰</li>
  <li>ê° ìŠ¤ë ˆë“œëŠ” ë…ë¦½ì ì¸ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸</li>
  <li>LAZY ì—”í‹°í‹°ëŠ” ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ë³„ë„ íŠ¸ëœì­ì…˜ í•„ìš”</li>
</ul>

<hr />

<h2 id="7-í•™ìŠµ-í¬ì¸íŠ¸">7. í•™ìŠµ í¬ì¸íŠ¸</h2>

<h3 id="ì´ë²ˆ-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„-í†µí•´-ë°°ìš´-ê²ƒ">ì´ë²ˆ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ í†µí•´ ë°°ìš´ ê²ƒ</h3>

<ol>
  <li>
    <p><strong>ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±</strong></p>

    <ul>
      <li>JOIN FETCHë¡œ í•„ìš”í•œ ë°ì´í„° ë¯¸ë¦¬ ë¡œë“œ</li>
      <li>ë¹„ë™ê¸° ì»¨í…ìŠ¤íŠ¸ì—ëŠ” ë³„ë„ì˜ íŠ¸ëœì­ì…˜ í•„ìš”</li>
    </ul>
  </li>
  <li>
    <p><strong>ë™ì‹œì„± ì œì–´ ì „ëµ ì„ íƒ</strong></p>

    <ul>
      <li>ë‚™ê´€ì  ë½: ì¶©ëŒì´ ì ì„ ë•Œ íš¨ìœ¨ì </li>
      <li>ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ì¬ì‹œë„ ë˜ëŠ” ë¬´ì‹œ ì „ëµ êµ¬í˜„</li>
    </ul>
  </li>
  <li>
    <p><strong>íŠ¸ëœì­ì…˜ ë²”ìœ„ì™€ ë°ì´í„° ì¼ê´€ì„±</strong></p>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">saveAndFlush()</code>ë¡œ ì¦‰ì‹œ ë°˜ì˜</li>
      <li>ì—ëŸ¬ ì²˜ë¦¬ ì‹œ ìµœì‹  ë°ì´í„° ì¬ì¡°íšŒ ê³ ë ¤</li>
    </ul>
  </li>
</ol>

<h3 id="ë”-ë‚˜ì€-ì„¤ê³„ë¥¼-ìœ„í•œ-ê³ ë¯¼">ë” ë‚˜ì€ ì„¤ê³„ë¥¼ ìœ„í•œ ê³ ë¯¼</h3>

<ul>
  <li>ë¹„ë™ê¸° ì‘ì—…ì—ì„œëŠ” IDë§Œ ì „ë‹¬í•˜ê³  ë‚´ë¶€ì—ì„œ ì¬ì¡°íšŒ</li>
  <li>DTO ë³€í™˜ì€ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ì™„ë£Œ</li>
  <li>ë™ì‹œì„±ì´ ì¤‘ìš”í•œ ì—”í‹°í‹°ëŠ” ë¹„ê´€ì  ë½ ê³ ë ¤</li>
</ul>

<hr />

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://docs.jboss.org/hibernate/orm/6.0/userguide/html_single/Hibernate_User_Guide.html">Hibernate User Guide - LazyInitializationException</a></li>
  <li><a href="https://www.baeldung.com/jpa-optimistic-locking">Baeldung - JPA Optimistic Locking</a></li>
  <li><a href="https://docs.spring.io/spring-framework/reference/integration/scheduling.html">Spring Framework - Async Execution</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ìŒì„± í†µí™” ë…¹ìŒ ê¸°ëŠ¥ êµ¬í˜„ ì¤‘ ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œ ë°œìƒí•œ LazyInitializationExceptionê³¼ OptimisticLockingFailureExceptionì„ í•´ê²°í•œ ê³¼ì •ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ #2</title><link href="https://nan0silver.github.io/projectdiary/2025-10-16-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ #2" /><published>2025-10-16T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-16-diary/"><![CDATA[<ul>
  <li><a href="#1-csrf-í† í°-íŒ¨í„´">1. CSRF í† í° íŒ¨í„´</a></li>
  <li><a href="#2-originreferer-ê²€ì¦">2. Origin/Referer ê²€ì¦</a></li>
  <li><a href="#3-jwtì˜-ì´ì¤‘-ê²€ì¦">3. JWTì˜ ì´ì¤‘ ê²€ì¦</a></li>
  <li><a href="#4-samsite--csrf-í† í°-ì¡°í•©">4. SamSite + CSRF í† í° ì¡°í•©</a></li>
</ul>

<h2 id="í¬ë¡œìŠ¤-ë„ë©”ì¸-í™˜ê²½ì—ì„œ-refresh-token-ì¿ í‚¤-ì†Œì‹¤-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-2">í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… 2</h2>

<blockquote>
  <p>ì €ë²ˆ í¸ì—ì„œ í•´ê²°ê¹Œì§€ëŠ” ë‹¤ë¤˜ì§€ë§Œ, ê·¸ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” CSRF ê³µê²©ì— ëŒ€í•œ ì•½í•œ ë°©ì–´ë¥¼ ë°©ì§€í•˜ëŠ” ë¡œì§ì— ëŒ€í•´ì„œëŠ” ì´ë²ˆ í¸ì—ì„œ ë‹¤ë£¨ê¸°ë¡œ í•œë‹¤. (ë„ˆë¬´ ê¸¸ì–´ì ¸ì„œ..)</p>
</blockquote>

<h2 id="csrf-ê³µê²©-ë°©ì–´">CSRF ê³µê²© ë°©ì–´</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">SamSite=None</code>ìœ¼ë¡œ í•˜ë©´ CSRF ê³µê²©ì„ ë°©ì–´í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ ì¶”ê°€ ì„¤ì •ì„ í•´ì¤˜ì•¼ í•œë‹¤.</li>
  <li>ë°©ì–´ ë°©ë²•ë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.</li>
</ul>

<h3 id="1-csrf-í† í°-íŒ¨í„´">1. CSRF í† í° íŒ¨í„´</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SecurityConfig.java</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">filterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">http</span>
            <span class="o">.</span><span class="na">csrf</span><span class="o">(</span><span class="n">csrf</span> <span class="o">-&gt;</span> <span class="n">csrf</span>
                <span class="o">.</span><span class="na">csrfTokenRepository</span><span class="o">(</span><span class="nc">CookieCsrfTokenRepository</span><span class="o">.</span><span class="na">withHttpOnlyFalse</span><span class="o">())</span>
                <span class="o">.</span><span class="na">csrfTokenRequestHandler</span><span class="o">(</span><span class="k">new</span> <span class="nc">SpaCsrfTokenRequestHandler</span><span class="o">())</span>
            <span class="o">)</span>
            <span class="c1">// ... ë‚˜ë¨¸ì§€ ì„¤ì •</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// í”„ë¡ íŠ¸ì—”ë“œ</span>
<span class="kd">const</span> <span class="nx">csrfToken</span> <span class="o">=</span> <span class="nx">getCookie</span><span class="p">(</span><span class="dl">"</span><span class="s2">XSRF-TOKEN</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/v1/users/delete</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">X-XSRF-TOKEN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">csrfToken</span><span class="p">,</span> <span class="c1">// CSRF í† í° í¬í•¨</span>
  <span class="p">},</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li>ì´ë ‡ê²Œ í•˜ë©´ ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ëŠ”
    <ul>
      <li>JavaScriptë¡œ ì¿ í‚¤ë¥¼ ì½ì„ ìˆ˜ ì—†ìŒ</li>
      <li>ë”°ë¼ì„œ í—¤ë”ì— í† í°ì„ í¬í•¨í•  ìˆ˜ ì—†ìŒ</li>
    </ul>
  </li>
</ul>

<h3 id="2-originreferer-ê²€ì¦">2. Origin/Referer ê²€ì¦</h3>

<ul>
  <li>ì„œë²„ì—ì„œ ìš”ì²­ì˜ <code class="language-plaintext highlighter-rouge">Origin</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">Referer</code> í—¤ë”ë¥¼ í™•ì¸í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë„ë©”ì¸ì—ì„œ ì˜¨ ìš”ì²­ì¸ì§€ ê²€ì¦</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// CorsConfig.java</span>
<span class="nd">@Bean</span>
<span class="nd">@Profile</span><span class="o">(</span><span class="s">"prod"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">CorsConfigurationSource</span> <span class="nf">prodCorsConfigurationSource</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">CorsConfiguration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CorsConfiguration</span><span class="o">();</span>

    <span class="c1">// âœ… í—ˆìš©ëœ ì¶œì²˜ë§Œ ëª…ì‹œ</span>
    <span class="n">configuration</span><span class="o">.</span><span class="na">setAllowedOriginPatterns</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
        <span class="s">"https://chingoo-frontend.vercel.app"</span><span class="o">,</span>
        <span class="s">"https://www.chingoo-frontend.vercel.app"</span>
    <span class="o">));</span>

    <span class="n">configuration</span><span class="o">.</span><span class="na">setAllowCredentials</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ í•˜ë©´</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DELETE https://your-backend.com/api/v1/users/delete
Origin: https://evil.com  â† ì´ ê°’ìœ¼ë¡œ ê²€ì¦!
Cookie: refreshToken=...
</code></pre></div></div>

<ul>
  <li>ë°±ì—”ë“œê°€ <code class="language-plaintext highlighter-rouge">Origin</code> í—¤ë” í™•ì¸:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">evail.com</code>ì€ í—ˆìš© ëª©ë¡ì— ì—†ìŒ</li>
      <li>CORS ì˜¤ë¥˜ ë°œìƒìœ¼ë¡œ ìš”ì²­ ì°¨ë‹¨</li>
    </ul>
  </li>
  <li>ì´ ë°©ë²•ì˜ ë‹¨ì ì´ ìˆë‹¤.
    <ul>
      <li>Origin í—¤ë”ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œëŠ” ìš°íšŒ ê°€ëŠ¥</li>
      <li>ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ ìš”ì²­(Postman, curl)ì—ì„œëŠ” ê²€ì¦ ì•ˆë¨</li>
    </ul>
  </li>
</ul>

<h3 id="3-jwtì˜-ì´ì¤‘-ê²€ì¦">3. JWTì˜ ì´ì¤‘ ê²€ì¦</h3>

<ul>
  <li>ê°€ì¥ í˜„ëŒ€ì ì¸ ë°©ë²•ì´ë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// JwtAuthenticationFilter.java</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doFilterInternal</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
                                <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span>
                                <span class="nc">FilterChain</span> <span class="n">filterChain</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// 1ï¸âƒ£ ì¿ í‚¤ì—ì„œ RefreshToken ì¶”ì¶œ</span>
    <span class="nc">String</span> <span class="n">refreshTokenFromCookie</span> <span class="o">=</span> <span class="n">extractTokenFromCookie</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="c1">// 2ï¸âƒ£ í—¤ë”ì—ì„œ AccessToken ì¶”ì¶œ</span>
    <span class="nc">String</span> <span class="n">accessTokenFromHeader</span> <span class="o">=</span> <span class="n">extractTokenFromHeader</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

    <span class="c1">// 3ï¸âƒ£ ë‘˜ ë‹¤ ê²€ì¦</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isValidToken</span><span class="o">(</span><span class="n">refreshTokenFromCookie</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
        <span class="n">isValidToken</span><span class="o">(</span><span class="n">accessTokenFromHeader</span><span class="o">))</span> <span class="o">{</span>

        <span class="c1">// 4ï¸âƒ£ í† í°ì˜ userIdê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸</span>
        <span class="nc">Long</span> <span class="n">userIdFromRefresh</span> <span class="o">=</span> <span class="n">getUserIdFromToken</span><span class="o">(</span><span class="n">refreshTokenFromCookie</span><span class="o">);</span>
        <span class="nc">Long</span> <span class="n">userIdFromAccess</span> <span class="o">=</span> <span class="n">getUserIdFromToken</span><span class="o">(</span><span class="n">accessTokenFromHeader</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">userIdFromRefresh</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">userIdFromAccess</span><span class="o">))</span> <span class="o">{</span>
            <span class="c1">// âœ… ì¸ì¦ ì„±ê³µ</span>
            <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">createAuthentication</span><span class="o">(</span><span class="n">userIdFromAccess</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì¿ í‚¤(Refresh Token)ì´ ìë™ìœ¼ë¡œ í¬í•¨ë¨</li>
  <li>í•˜ì§€ë§Œ í•´ë”(Access Token)ëŠ” JavaScriptë¡œ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•´ì•¼í•¨</li>
  <li>ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ëŠ” ì •ìƒ ì‚¬ì´íŠ¸ì˜ localStorageì— ì ‘ê·¼ ë¶ˆê°€ (Cross-Origin)</li>
  <li>ë”°ë¼ì„œ Access Tokenì„ ì–»ì„ ìˆ˜ ì—†ìŒ</li>
</ul>

<h3 id="4-samsite--csrf-í† í°-ì¡°í•©">4. SamSite + CSRF í† í° ì¡°í•©</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="nd">@Profile</span><span class="o">(</span><span class="s">"prod"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">prodFilterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">http</span>
            <span class="c1">// CSRF í† í° í™œì„±í™”</span>
            <span class="o">.</span><span class="na">csrf</span><span class="o">(</span><span class="n">csrf</span> <span class="o">-&gt;</span> <span class="n">csrf</span>
                <span class="o">.</span><span class="na">csrfTokenRepository</span><span class="o">(</span><span class="nc">CookieCsrfTokenRepository</span><span class="o">.</span><span class="na">withHttpOnlyFalse</span><span class="o">())</span>
            <span class="o">)</span>
            <span class="c1">// CORS ì„¤ì • (Origin ê²€ì¦)</span>
            <span class="o">.</span><span class="na">cors</span><span class="o">(</span><span class="n">cors</span> <span class="o">-&gt;</span> <span class="n">cors</span><span class="o">.</span><span class="na">configurationSource</span><span class="o">(</span><span class="n">corsConfigurationSource</span><span class="o">))</span>
            <span class="c1">// ...</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># application-prod.yml</span>
<span class="na">app</span><span class="pi">:</span>
  <span class="na">cookie</span><span class="pi">:</span>
    <span class="na">secure</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">same-site</span><span class="pi">:</span> <span class="s">None</span> <span class="c1"># í¬ë¡œìŠ¤ ë„ë©”ì¸ ì§€ì›</span>
    <span class="na">max-age</span><span class="pi">:</span> <span class="m">2592000</span>
</code></pre></div></div>

<ul>
  <li>ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ì¤‘ ë°©ì–´ì„ ì´ ë§Œë“¤ì–´ì§„ë‹¤.
    <ul>
      <li>Origin ê²€ì¦ (CORS)</li>
      <li>CSRF í† í° ê²€ì¦</li>
      <li>JWT ê²€ì¦</li>
    </ul>
  </li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ë°±ì—”ë“œ, í”„ë¡ íŠ¸ ë„ë©”ì¸ì´ ë‹¤ë¥¸ í¬ë¡œìŠ¤ ë„ë©”ì¸ì˜ Production í™˜ê²½ì—ì„œ Refresh Tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤!]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ</title><link href="https://nan0silver.github.io/projectdiary/2025-10-15-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ ë¬¸ì œ" /><published>2025-10-15T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-15-diary/"><![CDATA[<ul>
  <li><a href="#ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</a></li>
  <li><a href="#ì›ì¸-ë¶„ì„">ì›ì¸ ë¶„ì„</a></li>
  <li><a href="#í•´ê²°-ë°©ë²•">í•´ê²°ë°©ë²•</a></li>
  <li><a href="#ì°¸ê³ -ì‚¬í•­">ì°¸ê³ ì‚¬í•­</a></li>
</ul>

<h2 id="í¬ë¡œìŠ¤-ë„ë©”ì¸-í™˜ê²½ì—ì„œ-refresh-token-ì¿ í‚¤-ì†Œì‹¤-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…">í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ì—ì„œ Refresh Token ì¿ í‚¤ ì†Œì‹¤ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>

<ul>
  <li>ê°œë°œ í™˜ê²½ì—ì„œëŠ” tokenê´€ë ¨ ë¬¸ì œê°€ ì „í˜€ ì—†ì—ˆë‹¤. ê·¸ëŸ°ë° ë°°í¬í•œ í›„ ë¡œê·¸ì¸ì´ ìƒˆë¡œìš´ íƒ­ì—ì„œ ìœ ì§€ë˜ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  í•˜ë‹¤ê°€ Refresh Tokenì´ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì‚¬ë¼ì§€ëŠ”ê±¸ ë°œê²¬í•˜ì˜€ë‹¤.
    <blockquote>
      <p>ì–´ë””ê°”ì–´.. ë‚´ refresh token ğŸ¥²</p>
    </blockquote>
  </li>
  <li>ë¡œê·¸ì¸ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ” ë¬¸ì œëŠ” ì™œì¸ì§€ ì•Œì•˜ê¸° ë•Œë¬¸ì— ê¸ˆë°© í•´ê²°í•˜ì˜€ì§€ë§Œ, refresh tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œê°€ ë” ë‚˜ë¥¼ í˜ë“¤ê²Œ ë§Œë“¤ì—ˆë‹¤..</li>
  <li>ë”°ë¼ì„œ ì™œ ê·¸ëŸ° ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ì§€ ì¢€ ë” ì•Œì•„ë³´ê³ ì í–ˆë‹¤.</li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>Local í™˜ê²½: Refresh Token ì¿ í‚¤ê°€ ì •ìƒì ìœ¼ë¡œ ìœ ì§€ë¨ âœ…</li>
  <li>Production í™˜ê²½ : ë¡œê·¸ì¸ì€ ì„±ê³µí•˜ì§€ë§Œ, ìƒˆë¡œê³ ì¹¨í•˜ë©´ Refresh Token ì¿ í‚¤ê°€ ì‚¬ë¼ì§ ğŸ‘» (Refresh Tokenì€ HttpOnly Cookieì— ì €ì¥í•¨)</li>
  <li>
    <p>ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ í™•ì¸í•œ ì¿ í‚¤ ë§Œë£Œ ì‹œê°„: 30ì¼ âœ…</p>

    <blockquote>
      <p>ì²˜ìŒì—” ë§Œë£Œ ì‹œê°„ì´ ì˜ëª» ì„¤ì •ë˜ì–´ìˆëŠ”ì¤„ ì•Œì•˜ë‹¤.</p>
    </blockquote>
  </li>
  <li>
    <p>í™˜ê²½ ì •ë³´</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Local í™˜ê²½:
- Frontend: http://localhost:3000
- Backend:  http://localhost:8080
- ë™ì¼ í˜¸ìŠ¤íŠ¸(localhost), ë‹¤ë¥¸ í¬íŠ¸ â†’ Same-Site

Production í™˜ê²½:
- Frontend: https://chingoo-frontend.vercel.app
- Backend:  https://your-backend-domain.com
- ë‹¤ë¥¸ ë„ë©”ì¸ â†’ Cross-Site
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="ì›ì¸-ë¶„ì„">ì›ì¸ ë¶„ì„</h2>

<h3 id="1-ì˜ëª»ëœ-ì¿ í‚¤-ì„¤ì •">1. ì˜ëª»ëœ ì¿ í‚¤ ì„¤ì •</h3>

<p>application-prod.ymlì˜ ë¬¸ì œ:</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">app:
  cookie:
    secure: false     # âŒ HTTPS í™˜ê²½ì¸ë° false
    sam-site: Lax     # âŒ í¬ë¡œìŠ¤ ë„ë©”ì¸ì¸ë° Lax
    max-age: 2592000  # âœ… 30ì¼ (ì •ìƒ)
</span></code></pre></div></div>

<h3 id="2-samsite-ì¿ í‚¤-ì •ì±…-ì´í•´í•˜ê¸°">2. SamSite ì¿ í‚¤ ì •ì±… ì´í•´í•˜ê¸°</h3>

<h4 id="samsite-ì†ì„±ì´ë€">SamSite ì†ì„±ì´ë€?</h4>

<ul>
  <li>
    <p>CSRF(Cross-Site Request Forgery) ê³µê²©ì„ ë°©ì–´í•˜ê¸° ìœ„í•´ ë„ì…ëœ ì¿ í‚¤ ì •ì±…ìœ¼ë¡œ, ì–¸ì œ ì¿ í‚¤ë¥¼ ì „ì†¡í• ì§€ë¥¼ ì œì–´</p>

    <blockquote>
      <p>CSRFê³µê²© ì´ë€?</p>

      <blockquote>
        <p>ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜ì§€ì™€ëŠ” ìƒê´€ì—†ì´ ê³µê²©ìê°€ ì˜ë„í•œ í–‰ìœ„(ìˆ˜ì •, ì‚­ì œ, ë“±ë¡ ë“±)ë¥¼ íŠ¹ì • ì›¹ì‚¬ì´íŠ¸ì— ìš”ì²­í•˜ê²Œ í•˜ëŠ” ê³µê²©
ê³µê²©ìê°€ ì‚¬ìš©ìì˜ ì„¸ì…˜ì„ ê°€ë¡œì±„ëŠ” ë°©ì‹ìœ¼ë¡œ ì¼ì–´ë‚œë‹¤.</p>
      </blockquote>
    </blockquote>
  </li>
  <li>
    <p>SamSite 3ê°€ì§€ ê°’</p>
    <ol>
      <li>Strict
        <ul>
          <li>ë™ì¼ ì‚¬ì´íŠ¸ì—ì„œë§Œ ì¿ í‚¤ ì „ê³µ</li>
          <li>ëª¨ë“  í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ì—ì„œ ì°¨ë‹¨</li>
          <li>ìµœê³  ìˆ˜ì¤€ ë³´ì•ˆì´ í•„ìš”í•œ ê²½ìš°ì— ì‚¬ìš© (ë§¤ìš° ì—„ê²©í•´ì„œ ì˜ ì•ˆì”€)</li>
        </ul>
      </li>
      <li>Lax (ê¸°ë³¸ê°’)
        <ul>
          <li>TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ + GET ìš”ì²­ë§Œ í—ˆìš©</li>
          <li>POST, PUT, DELETE ë“±ì€ ì°¨ë‹¨</li>
          <li>ì¼ë°˜ì ì¸ Sam-Site í™˜ê²½ (í”„ë¡ íŠ¸ì—”ë“œì™€ ë²¡ì—”ë“œê°€ ê°™ì€ ë„ë©”ì¸)</li>
        </ul>
      </li>
      <li>None
        <ul>
          <li>ëª¨ë“  í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ì—ì„œ ì¿ í‚¤ì „ì†¡</li>
          <li>ë‹¨, <code class="language-plaintext highlighter-rouge">Secure=true</code> í•„ìˆ˜ (HTTPS)</li>
          <li>í¬ë¡œìŠ¤ ë„ë©”ì¸ í™˜ê²½ (í”„ë¡ íŠ¸ì—”íŠ¸ì™€ ë°±ì—”ë“œ ë„ë©”ì¸ ë‹¤ë¦„)</li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h4 id="ë¸Œë¼ìš°ì„œì˜-samsitelax-ë™ì‘-ë¶„ì„">ë¸Œë¼ìš°ì„œì˜ SamSite=Lax ë™ì‘ ë¶„ì„</h4>

<h4 id="ì‹œë‚˜ë¦¬ì˜¤-1-ë¡œê·¸ì¸-ì‹œ-ìµœì´ˆ-ìš”ì²­">ì‹œë‚˜ë¦¬ì˜¤ 1: ë¡œê·¸ì¸ ì‹œ (ìµœì´ˆ ìš”ì²­)</h4>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST https://your-backend.com/api/v1/auth/login
Origin: https://your-frontend.com
Content-Type: application/json

{"email": "user@example.com", "password": "..."}
</span></code></pre></div></div>

<p>ë°±ì—”ë“œ ì‘ë‹µ:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Set-Cookie: refreshToken=eyJhbGc...;
            Path=/;
            Max-Age=2592000;
            HttpOnly;
            Secure;
            SameSite=Lax  â† ì—¬ê¸°ê°€ ë¬¸ì œ! âŒ
Access-Control-Allow-Origin: https://chingoo-frontend.vercel.app
Access-Control-Allow-Credentials: true
</code></pre></div></div>

<ul>
  <li>ì¿ í‚¤ëŠ” ì„¤ì •ë¨ (ë¸Œë¼ìš°ì €ê°€ Set-Cookie í—¤ë”ë¥¼ ë°›ì•„ì„œ ì €ì¥)</li>
  <li>ê°œë°œì ë„êµ¬ì—ì„œ ì¿ í‚¤ í™•ì¸ ê°€ëŠ¥</li>
  <li>Expires/Max-Ageë„ 30ì¼ë¡œ ì •ìƒ</li>
</ul>

<h4 id="ì‹œë‚˜ë¦¬ì˜¤-2-ìƒˆë¡œê³ ì¹¨-ì‹œ-ë‘ë²ˆì§¸-ìš”ì²­">ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒˆë¡œê³ ì¹¨ ì‹œ (ë‘ë²ˆì§¸ ìš”ì²­)</h4>

<ul>
  <li>ì‚¬ìš©ìê°€ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” í˜ì´ì§€ ì´ë™ ì‹œ, í”„ë¡ íŠ¸ì—”ë“œê°€ ìë™ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” API í˜¸ì¶œ:</li>
</ul>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">// í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ (ìë™ ì‹¤í–‰)
useEffect(() =&gt; {
  axios.get('https://your-backend.com/api/v1/users/me', {
    withCredentials: true  // ì¿ í‚¤ ì „ì†¡ ìš”ì²­
  });
}, []);
</span></code></pre></div></div>

<p>ë¸Œë¼ìš°ì €ì˜ ìš”ì²­:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://your-backend.com/api/v1/users/me
Origin: https://your-frontend.com
Cookie: (ì—†ìŒ!) &lt;- SamSite=Laxê°€ ì¿ í‚¤ ì „ì†¡ì„ ì°¨ë‹¨!
</code></pre></div></div>

<ul>
  <li>TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ì´ ì•„ë‹ˆê³  JavaScript ìš”ì²­ì´ê¸° ë•Œë¬¸ì— ì¿ í‚¤ ì „ì†¡ì´ ì•ˆëŒ
    <blockquote>
      <p>TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>

      <blockquote>
        <ol>
          <li>ì£¼ì†Œì°½ì— URLì„ ì§ì ‘ ì…ë ¥</li>
          <li><code class="language-plaintext highlighter-rouge">&lt;a href = "..."&gt;</code> ë§í¬ í´ë¦­</li>
          <li><code class="language-plaintext highlighter-rouge">window.location.href</code> ë³€ê²½
            <blockquote>
              <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   // âŒ ì´ëŸ° JavaScript ìš”ì²­ì€ TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ì´ ì•„ë‹˜
   axios.get('https://api.example.com/user');

   // âœ… ì´ëŸ° ìš”ì²­ë§Œ TOP-LEVEL ë„¤ë¹„ê²Œì´ì…˜ìœ¼ë¡œ ì¸ì •
   window.location.href = 'https://api.example.com/user';
   &lt;a href="https://api.example.com/user"&gt;í´ë¦­&lt;/a&gt;
</code></pre></div>              </div>
            </blockquote>
          </li>
        </ol>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h4 id="ì‹œë‚˜ë¦¬ì˜¤-3-post-ìš”ì²­">ì‹œë‚˜ë¦¬ì˜¤ 3: POST ìš”ì²­</h4>

<ul>
  <li>ì‚¬ìš©ìê°€ í¼ì„ ì œì¶œí•˜ëŠ” ë“± POST ìš”ì²­ì„ ë³´ë‚¼ ë•Œ:</li>
</ul>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">POST https://your-backend.com/api/v1/some-action
Origin: https://your-frontend.com
Cookie: (ì—†ìŒ!) &lt;- SamSite=Laxê°€ ì¿ í‚¤ ì „ì†¡ì„ ì°¨ë‹¨
</span></code></pre></div></div>

<p>ê²°ê³¼:</p>

<ul>
  <li>Refresh Token ì¿ í‚¤ê°€ ì „ì†¡ë˜ì§€ ì•ŠìŒ</li>
  <li>ë°±ì—”ë“œì—ì„œ ì¸ì¦ ì‹¤íŒ¨ (401 Unauthorized)</li>
  <li>ì‚¬ìš©ìëŠ” ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì•¼í•¨</li>
</ul>

<h2 id="í•´ê²°">í•´ê²°</h2>

<ul>
  <li>application-prod.yml ìˆ˜ì •</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app:
  cookie:
    secure: true       # HTTPS í•„ìˆ˜
    same-site: None    # í¬ë¡œìŠ¤ ë„ë©”ì¸ í—ˆìš©
    max-age: 2592000   # 30ì¼
</code></pre></div></div>

<ul>
  <li>ì´ë¡œ ì¸í•œ CSRF ê³µê²©ì— ëŒ€í•œ ë°©ì–´ëŠ” ë‹¤ìŒ í¸ì—ì„œ ë‹¤ë£¨ê¸°ë¡œ í•œë‹¤.</li>
</ul>

<h2 id="ì°¸ê³ -ìë£Œ">ì°¸ê³  ìë£Œ</h2>

<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite">MDN: SamSite cookies</a></li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ë°±ì—”ë“œ, í”„ë¡ íŠ¸ ë„ë©”ì¸ì´ ë‹¤ë¥¸ í¬ë¡œìŠ¤ ë„ë©”ì¸ì˜ Production í™˜ê²½ì—ì„œ Refresh Tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤! (í•´ê²°ì€ ë‹¤ìŒí¸)]]></summary></entry><entry><title type="html">[ì¹œêµ¬í•˜ì] Redis ë°ì´í„° ì´ˆê¸°í™” íŠ¸ëŸ¬ë¸” ìŠˆíŒ…</title><link href="https://nan0silver.github.io/projectdiary/2025-10-14-diary/" rel="alternate" type="text/html" title="[ì¹œêµ¬í•˜ì] Redis ë°ì´í„° ì´ˆê¸°í™” íŠ¸ëŸ¬ë¸” ìŠˆíŒ…" /><published>2025-10-14T00:00:00+00:00</published><updated>2025-11-21T02:04:39+00:00</updated><id>https://nan0silver.github.io/projectdiary/diary</id><content type="html" xml:base="https://nan0silver.github.io/projectdiary/2025-10-14-diary/"><![CDATA[<ul>
  <li><a href="#ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</a></li>
  <li><a href="#ì›ì¸">ì›ì¸</a></li>
  <li><a href="#í•´ê²°-ë°©ë²•">í•´ê²°ë°©ë²•</a></li>
  <li><a href="#ì°¸ê³ -ì‚¬í•­">ì°¸ê³ ì‚¬í•­</a></li>
</ul>

<h2 id="redis-ë°ì´í„°-ì´ˆê¸°í™”-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…">Redis ë°ì´í„° ì´ˆê¸°í™” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>

<ul>
  <li>
    <p>ë‚˜ëŠ” ë¡œì»¬ í™˜ê²½ì—ì„œ Docker Composeë¡œ Redis, MySQLë£° ì»¨í…Œì´ë„ˆí™”í•´ì„œ ì‹¤í–‰í•˜ê³  ìˆë‹¤.</p>

    <blockquote>
      <p>Redis 7 Alpine ì´ë¯¸ì§€ ê¸°ë°˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</p>
    </blockquote>
  </li>
  <li>Redis(ì¸ë©”ëª¨ë¦¬ ìºì‹œ)ëŠ” ì‹¤ì‹œê°„ ë§¤ì¹­ ëŒ€ê¸°ì—´ ê´€ë¦¬ì— ì‚¬ìš©ë˜ê³ ,</li>
  <li>
    <p>MySQLì€ ë§¤ì¹­ ê²°ê³¼ ë° ì‚¬ìš©ì ì •ë³´ ì €ì¥ì— ì‚¬ìš©ëœë‹¤.</p>

    <blockquote>
      <p>ë§¤ì¹­ ëŒ€ê¸°ì—´ì—ì„œ Redisë¥¼ ì‚¬ìš©í•œ í”Œë¡œìš°ì™€ ì´ìœ ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒ ê²Œì‹œê¸€ì—ì„œ ë‹¤ë£¨ê² ë‹¤.</p>
    </blockquote>
  </li>
  <li>Spring Bootë¡œ ë¡œì»¬ ê°œë°œì„ í•˜ë©° ë§¤ì¹­ - í†µí™” - í†µí™” í‰ê°€ í”„ë¡œì„¸ìŠ¤ êµ¬ì¶•ì— ì‹œê°„ì„ ë§ì´ ì¼ë‹¤.</li>
  <li>Redis, WebSockeì„ ì´ìš©í•œ ê°œë°œì´ ì²˜ìŒì´ê¸°ë„ í•˜ê³ , ê³µë¶€í•˜ë©´ì„œ ê°œë°œí–ˆê¸° ë•Œë¬¸ì— ì‹œí–‰ì°©ì˜¤ë¥¼ ë§ì´ ê±°ì³¤ë‹¤.</li>
  <li>ì´ ê³¼ì •ì—ì„œ ê³„ì† DBë¥¼ ì´ˆê¸°í™” í•˜ê³ .. ë¡œì§ì„ ì—ê³ .. í•˜ëŠ” ì¼ë“¤ì´ ë§ì•˜ëŠ”ë°</li>
  <li>
    <p>ì—¬ëŸ¬ë²ˆ ë°˜ë³µì ìœ¼ë¡œ Redisë¥¼ ì´ˆê¸°í™” í• ë•ŒëŠ” ì™¸ì›Œì„œ í–ˆì§€ë§Œ í”„ë¡ íŠ¸ì™€ ì—°ë™í•˜ë©° ì˜¤ëœë§Œì— ë§¤ì¹­ ê´€ë ¨ ì½”ë“œë¥¼ ëœ¯ì–´ë³´ë‹¤ ë¬¸ì œê°€ ìƒê²¨ Redisë¥¼ ì´ˆê¸°í™” í•˜ë ¤ë‹ˆ ìƒê°ì´ í•˜ë‚˜ë„ ì•ˆë‚˜ëŠ” ê²ƒì´ë‹¤!!</p>
  </li>
  <li>ê·¸ë˜ì„œ ê·¸ëƒ¥ ì •ë¦¬í•´ë‘ê¸°ë¡œ í–ˆë‹¤.</li>
</ul>

<h2 id="ë¬¸ì œ-ìƒí™©">ë¬¸ì œ ìƒí™©</h2>

<ul>
  <li>Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë§¤ì¹­ ëŒ€ê¸°ì—´ì— ì‚¬ìš©ìê°€ ê³„ì† ë‚¨ì•„ìˆëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.</li>
  <li>
    <p>MySQLì€ ì´ˆê¸°í™” í•œ ìƒí™©, userê°€ í•œëª…ë„ ì—†ëŠ”ë°ë„ userIDë§Œ redisì— ê³„ì† ì €ì¥ë˜ì–´ìˆëŠ” ìƒí™©</p>

    <ul>
      <li>MySQLì€ spring boot ì¬ì‹¤í–‰ë§Œìœ¼ë¡œë„ ì´ˆê¸°í™”ê°€ ì‰½ê²Œ ë˜ëŠ”ë° redisëŠ” ì–´ë–»ê²Œ í–ˆë”ë¼.. ë¬¸ì œ ë°œìƒ</li>
    </ul>
  </li>
  <li><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-10-14-image.png?raw=true" alt="ê³„ì† ë‚¨ì•„ìˆëŠ” ë§¤ì¹­ ëŒ€ê¸°ì—´ì˜ ìœ ë ¹ë“¤" />
    <blockquote>
      <p>ê³„ì† ë‚¨ì•„ìˆëŠ” ë§¤ì¹­ ëŒ€ê¸°ì—´ì˜ ìœ ë ¹ë“¤</p>
    </blockquote>
  </li>
</ul>

<h2 id="ì›ì¸">ì›ì¸</h2>

<ul>
  <li>ìœ„ì—ë„ ë§í–ˆì§€ë§Œ Docker Composeë¡œ MySQL ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì´ˆê¸°í™”ë¨</li>
  <li>í•˜ì§€ë§Œ RedisëŠ” ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì´ë©´ì„œë„ <code class="language-plaintext highlighter-rouge">redis_data</code>ë³¼ë¥¨ì•  ë°ì´í„°ë¥¼ ì˜êµ¬ ì €ì¥</li>
  <li>ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•´ë„ ë³¼ë¥¨ì— ì €ì¥ëœ ë°ì´í„°ëŠ” ìœ ì§€ë¨..</li>
  <li>ê²°ê³¼ì ìœ¼ë¡œ DBì—ëŠ” ì—†ëŠ” ì‚¬ìš©ìê°€ Redisì—ë§Œ ë‚¨ì•„ìˆëŠ” ë¶ˆì¼ì¹˜ ìƒíƒœ ë°œìƒ</li>
</ul>

<h2 id="í•´ê²°-ë°©ë²•">í•´ê²° ë°©ë²•</h2>

<h3 id="ë°©ë²•-1--redis-clië¡œ-ë°ì´í„°-ì‚­ì œ">ë°©ë²• 1 : Redis CLIë¡œ ë°ì´í„° ì‚­ì œ</h3>

<blockquote>
  <p>ë‚˜ëŠ” ì´ê±¸ë¡œ í•´ê²°</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Redis ì»¨í…Œì´ë„ˆì— ì ‘ì†
docker exec -it &lt;ë‚´ redis ì´ë¦„&gt; redis-cli

# ëª¨ë“  ë°ì´í„° ì‚­ì œ
127.0.0.1:6379&gt; FLUSHALL

# ì‚­ì œ í™•ì¸
127.0.0.1:6379&gt; KEYS *

# ì¢…ë£Œ
127.0.0.1:6379&gt; exit
</code></pre></div></div>

<p><img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-10-14-image-1.png?raw=true" alt="ìº¡ì³ ì‚¬ì§„" /></p>

<p>-&gt; ê¸ˆë°© í•´ê²°!</p>

<h3 id="ë°©ë²•-2--ëª…ë ¹ì–´-í•œì¤„ë¡œ-ì‹¤í–‰">ë°©ë²• 2 : ëª…ë ¹ì–´ í•œì¤„ë¡œ ì‹¤í–‰</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec -it chingoo-redis redis-cli FLUSHALL
</code></pre></div></div>

<h3 id="ë°©ë²•-3--docker-ë³¼ë¥¨ê¹Œì§€-ì™„ì „-ì‚­ì œ">ë°©ë²• 3 : Docker ë³¼ë¥¨ê¹Œì§€ ì™„ì „ ì‚­ì œ</h3>

<ul>
  <li>ë” í™•ì‹¤í•œ ì´ˆê¸°í™” ë°©ë²•</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># docker ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd docker

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ë³¼ë¥¨ ì‚­ì œ
docker-compose down -v

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose up -d
</code></pre></div></div>

<ul>
  <li>ë³¼ë¥¨ê¹Œì§€ ì‚­ì œë˜ë¯€ë¡œ Redis ë°ì´í„°ê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë¨</li>
  <li>â€¼ <code class="language-plaintext highlighter-rouge">-v</code>ì˜µì…˜ì€ MySQL ë°ì´í„°ë„ ì‚­ì œí•˜ë¯€ë¡œ ì£¼ì˜ê°€ í•„ìš”!</li>
</ul>

<h2 id="í•´ê²°">í•´ê²°</h2>

<p>ì´ë ‡ê²Œ í•˜ë©´
<img src="https://github.com/nan0silver/nan0silver.github.io/blob/main/assets/img/blog/2025-10-14-image-2.png?raw=true" alt="alt text" /></p>

<blockquote>
  <p>ë§¤ì¹­ ëŒ€ê¸°ì—´ì´ ê¹¨ë—í•´ì§„ ëª¨ìŠµ
ì´ë ‡ê²Œ ìœ ë ¹ë“¤ì´ ì‚¬ë¼ì§„ë‹¤.</p>
</blockquote>

<h2 id="ì°¸ê³ -ì‚¬í•­">ì°¸ê³  ì‚¬í•­</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">FLUSHALL</code>: ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ì˜ ëª¨ë“  í‚¤ ì‚­ì œ</li>
  <li><code class="language-plaintext highlighter-rouge">FLUSHDB</code>: í˜„ì¬ ì„ íƒëœ ë°ì´í„°ë² ì´ìŠ¤ì˜ í‚¤ë§Œ ì‚­ì œ</li>
  <li>RedisëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ 0~15ë²ˆê¹Œì§€ 16ê°œë¥¼ ì œê³µ</li>
  <li>ìš´ì˜í™˜ê²½ì—ì„œëŠ” ì ˆëŒ€ <code class="language-plaintext highlighter-rouge">FLUSHALL</code>ì„ ì‹¤í–‰í•˜ë©´ ì•ˆë¨!</li>
</ul>]]></content><author><name>Nahyun Eun ì€ë‚˜í˜„</name><email>dmsskgus@sookmyung.ac.kr</email></author><category term="projectdiary" /><summary type="html"><![CDATA[ê°€ë” ë°œìƒí–ˆë˜ Redis ë°ì´í„° ì´ˆê¸°í™” ë°©ë²•ê³¼ ê´€ë ¨í•´ ì •ë¦¬]]></summary></entry></feed>